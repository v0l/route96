<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/jpg" href="./route96.jpg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>route96</title>
    <script type="module" crossorigin>var jE=Object.defineProperty;var y0=e=>{throw TypeError(e)};var _E=(e,t,r)=>t in e?jE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Se=(e,t,r)=>_E(e,typeof t!="symbol"?t+"":t,r),rf=(e,t,r)=>t.has(e)||y0("Cannot "+r);var c=(e,t,r)=>(rf(e,t,"read from private field"),r?r.call(e):t.get(e)),z=(e,t,r)=>t.has(e)?y0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),T=(e,t,r,n)=>(rf(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),R=(e,t,r)=>(rf(e,t,"access private method"),r);var fi=(e,t,r,n)=>({set _(i){T(e,t,i,r)},get _(){return c(e,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();function Op(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zy={exports:{}},Cd={},$y={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cu=Symbol.for("react.element"),AE=Symbol.for("react.portal"),TE=Symbol.for("react.fragment"),PE=Symbol.for("react.strict_mode"),UE=Symbol.for("react.profiler"),FE=Symbol.for("react.provider"),ME=Symbol.for("react.context"),BE=Symbol.for("react.forward_ref"),OE=Symbol.for("react.suspense"),IE=Symbol.for("react.memo"),DE=Symbol.for("react.lazy"),w0=Symbol.iterator;function zE(e){return e===null||typeof e!="object"?null:(e=w0&&e[w0]||e["@@iterator"],typeof e=="function"?e:null)}var Hy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wy=Object.assign,Vy={};function Ra(e,t,r){this.props=e,this.context=t,this.refs=Vy,this.updater=r||Hy}Ra.prototype.isReactComponent={};Ra.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ra.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qy(){}qy.prototype=Ra.prototype;function Ip(e,t,r){this.props=e,this.context=t,this.refs=Vy,this.updater=r||Hy}var Dp=Ip.prototype=new qy;Dp.constructor=Ip;Wy(Dp,Ra.prototype);Dp.isPureReactComponent=!0;var v0=Array.isArray,Ky=Object.prototype.hasOwnProperty,zp={current:null},Gy={key:!0,ref:!0,__self:!0,__source:!0};function Qy(e,t,r){var n,i={},s=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Ky.call(t,n)&&!Gy.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:cu,type:e,key:s,ref:o,props:i,_owner:zp.current}}function $E(e,t){return{$$typeof:cu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function $p(e){return typeof e=="object"&&e!==null&&e.$$typeof===cu}function HE(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var x0=/\/+/g;function nf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?HE(""+e.key):t.toString(36)}function lc(e,t,r,n,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case cu:case AE:o=!0}}if(o)return o=e,i=i(o),e=n===""?"."+nf(o,0):n,v0(i)?(r="",e!=null&&(r=e.replace(x0,"$&/")+"/"),lc(i,t,r,"",function(u){return u})):i!=null&&($p(i)&&(i=$E(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(x0,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=n===""?".":n+":",v0(e))for(var a=0;a<e.length;a++){s=e[a];var l=n+nf(s,a);o+=lc(s,t,r,l,i)}else if(l=zE(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=n+nf(s,a++),o+=lc(s,t,r,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Fu(e,t,r){if(e==null)return e;var n=[],i=0;return lc(e,n,"","",function(s){return t.call(r,s,i++)}),n}function WE(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var It={current:null},uc={transition:null},VE={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:uc,ReactCurrentOwner:zp};function Yy(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Fu,forEach:function(e,t,r){Fu(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Fu(e,function(){t++}),t},toArray:function(e){return Fu(e,function(t){return t})||[]},only:function(e){if(!$p(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ye.Component=Ra;ye.Fragment=TE;ye.Profiler=UE;ye.PureComponent=Ip;ye.StrictMode=PE;ye.Suspense=OE;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VE;ye.act=Yy;ye.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Wy({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=zp.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Ky.call(t,l)&&!Gy.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:cu,type:e.type,key:i,ref:s,props:n,_owner:o}};ye.createContext=function(e){return e={$$typeof:ME,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:FE,_context:e},e.Consumer=e};ye.createElement=Qy;ye.createFactory=function(e){var t=Qy.bind(null,e);return t.type=e,t};ye.createRef=function(){return{current:null}};ye.forwardRef=function(e){return{$$typeof:BE,render:e}};ye.isValidElement=$p;ye.lazy=function(e){return{$$typeof:DE,_payload:{_status:-1,_result:e},_init:WE}};ye.memo=function(e,t){return{$$typeof:IE,type:e,compare:t===void 0?null:t}};ye.startTransition=function(e){var t=uc.transition;uc.transition={};try{e()}finally{uc.transition=t}};ye.unstable_act=Yy;ye.useCallback=function(e,t){return It.current.useCallback(e,t)};ye.useContext=function(e){return It.current.useContext(e)};ye.useDebugValue=function(){};ye.useDeferredValue=function(e){return It.current.useDeferredValue(e)};ye.useEffect=function(e,t){return It.current.useEffect(e,t)};ye.useId=function(){return It.current.useId()};ye.useImperativeHandle=function(e,t,r){return It.current.useImperativeHandle(e,t,r)};ye.useInsertionEffect=function(e,t){return It.current.useInsertionEffect(e,t)};ye.useLayoutEffect=function(e,t){return It.current.useLayoutEffect(e,t)};ye.useMemo=function(e,t){return It.current.useMemo(e,t)};ye.useReducer=function(e,t,r){return It.current.useReducer(e,t,r)};ye.useRef=function(e){return It.current.useRef(e)};ye.useState=function(e){return It.current.useState(e)};ye.useSyncExternalStore=function(e,t,r){return It.current.useSyncExternalStore(e,t,r)};ye.useTransition=function(){return It.current.useTransition()};ye.version="18.3.1";$y.exports=ye;var P=$y.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qE=P,KE=Symbol.for("react.element"),GE=Symbol.for("react.fragment"),QE=Object.prototype.hasOwnProperty,YE=qE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZE={key:!0,ref:!0,__self:!0,__source:!0};function Zy(e,t,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)QE.call(t,n)&&!ZE.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:KE,type:e,key:s,ref:o,props:i,_owner:YE.current}}Cd.Fragment=GE;Cd.jsx=Zy;Cd.jsxs=Zy;zy.exports=Cd;var m=zy.exports,Xy={exports:{}},mr={},Jy={exports:{}},ew={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_,H){var q=_.length;_.push(H);e:for(;0<q;){var V=q-1>>>1,K=_[V];if(0<i(K,H))_[V]=H,_[q]=K,q=V;else break e}}function r(_){return _.length===0?null:_[0]}function n(_){if(_.length===0)return null;var H=_[0],q=_.pop();if(q!==H){_[0]=q;e:for(var V=0,K=_.length,ee=K>>>1;V<ee;){var oe=2*(V+1)-1,Le=_[oe],le=oe+1,be=_[le];if(0>i(Le,q))le<K&&0>i(be,Le)?(_[V]=be,_[le]=q,V=le):(_[V]=Le,_[oe]=q,V=oe);else if(le<K&&0>i(be,q))_[V]=be,_[le]=q,V=le;else break e}}return H}function i(_,H){var q=_.sortIndex-H.sortIndex;return q!==0?q:_.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,f=null,h=3,w=!1,E=!1,S=!1,x=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(_){for(var H=r(u);H!==null;){if(H.callback===null)n(u);else if(H.startTime<=_)n(u),H.sortIndex=H.expirationTime,t(l,H);else break;H=r(u)}}function b(_){if(S=!1,y(_),!E)if(r(l)!==null)E=!0,N(L);else{var H=r(u);H!==null&&j(b,H.startTime-_)}}function L(_,H){E=!1,S&&(S=!1,p(O),O=-1),w=!0;var q=h;try{for(y(H),f=r(l);f!==null&&(!(f.expirationTime>H)||_&&!C());){var V=f.callback;if(typeof V=="function"){f.callback=null,h=f.priorityLevel;var K=V(f.expirationTime<=H);H=e.unstable_now(),typeof K=="function"?f.callback=K:f===r(l)&&n(l),y(H)}else n(l);f=r(l)}if(f!==null)var ee=!0;else{var oe=r(u);oe!==null&&j(b,oe.startTime-H),ee=!1}return ee}finally{f=null,h=q,w=!1}}var v=!1,F=null,O=-1,M=5,k=-1;function C(){return!(e.unstable_now()-k<M)}function U(){if(F!==null){var _=e.unstable_now();k=_;var H=!0;try{H=F(!0,_)}finally{H?B():(v=!1,F=null)}}else v=!1}var B;if(typeof g=="function")B=function(){g(U)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,D=$.port2;$.port1.onmessage=U,B=function(){D.postMessage(null)}}else B=function(){x(U,0)};function N(_){F=_,v||(v=!0,B())}function j(_,H){O=x(function(){_(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_){_.callback=null},e.unstable_continueExecution=function(){E||w||(E=!0,N(L))},e.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<_?Math.floor(1e3/_):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(_){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var q=h;h=H;try{return _()}finally{h=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_,H){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var q=h;h=_;try{return H()}finally{h=q}},e.unstable_scheduleCallback=function(_,H,q){var V=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?V+q:V):q=V,_){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=q+K,_={id:d++,callback:H,priorityLevel:_,startTime:q,expirationTime:K,sortIndex:-1},q>V?(_.sortIndex=q,t(u,_),r(l)===null&&_===r(u)&&(S?(p(O),O=-1):S=!0,j(b,q-V))):(_.sortIndex=K,t(l,_),E||w||(E=!0,N(L))),_},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(_){var H=h;return function(){var q=h;h=H;try{return _.apply(this,arguments)}finally{h=q}}}})(ew);Jy.exports=ew;var XE=Jy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JE=P,pr=XE;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tw=new Set,ml={};function Js(e,t){va(e,t),va(e+"Capture",t)}function va(e,t){for(ml[e]=t,e=0;e<t.length;e++)tw.add(t[e])}var ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yf=Object.prototype.hasOwnProperty,eS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E0={},S0={};function tS(e){return Yf.call(S0,e)?!0:Yf.call(E0,e)?!1:eS.test(e)?S0[e]=!0:(E0[e]=!0,!1)}function rS(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function nS(e,t,r,n){if(t===null||typeof t>"u"||rS(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Dt(e,t,r,n,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vt[e]=new Dt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vt[t]=new Dt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vt[e]=new Dt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vt[e]=new Dt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vt[e]=new Dt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vt[e]=new Dt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vt[e]=new Dt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vt[e]=new Dt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vt[e]=new Dt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Hp=/[\-:]([a-z])/g;function Wp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Hp,Wp);vt[t]=new Dt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Hp,Wp);vt[t]=new Dt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Hp,Wp);vt[t]=new Dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vt[e]=new Dt(e,1,!1,e.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vt[e]=new Dt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Vp(e,t,r,n){var i=vt.hasOwnProperty(t)?vt[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(nS(t,r,i,n)&&(r=null),n||i===null?tS(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ai=JE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mu=Symbol.for("react.element"),Eo=Symbol.for("react.portal"),So=Symbol.for("react.fragment"),qp=Symbol.for("react.strict_mode"),Zf=Symbol.for("react.profiler"),rw=Symbol.for("react.provider"),nw=Symbol.for("react.context"),Kp=Symbol.for("react.forward_ref"),Xf=Symbol.for("react.suspense"),Jf=Symbol.for("react.suspense_list"),Gp=Symbol.for("react.memo"),bi=Symbol.for("react.lazy"),iw=Symbol.for("react.offscreen"),b0=Symbol.iterator;function Ba(e){return e===null||typeof e!="object"?null:(e=b0&&e[b0]||e["@@iterator"],typeof e=="function"?e:null)}var ze=Object.assign,sf;function Qa(e){if(sf===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);sf=t&&t[1]||""}return`
`+sf+e}var of=!1;function af(e,t){if(!e||of)return"";of=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{of=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Qa(e):""}function iS(e){switch(e.tag){case 5:return Qa(e.type);case 16:return Qa("Lazy");case 13:return Qa("Suspense");case 19:return Qa("SuspenseList");case 0:case 2:case 15:return e=af(e.type,!1),e;case 11:return e=af(e.type.render,!1),e;case 1:return e=af(e.type,!0),e;default:return""}}function eh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case So:return"Fragment";case Eo:return"Portal";case Zf:return"Profiler";case qp:return"StrictMode";case Xf:return"Suspense";case Jf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nw:return(e.displayName||"Context")+".Consumer";case rw:return(e._context.displayName||"Context")+".Provider";case Kp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Gp:return t=e.displayName||null,t!==null?t:eh(e.type)||"Memo";case bi:t=e._payload,e=e._init;try{return eh(e(t))}catch{}}return null}function sS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eh(t);case 8:return t===qp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Yi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sw(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function oS(e){var t=sw(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bu(e){e._valueTracker||(e._valueTracker=oS(e))}function ow(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=sw(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Pc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function th(e,t){var r=t.checked;return ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function k0(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Yi(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function aw(e,t){t=t.checked,t!=null&&Vp(e,"checked",t,!1)}function rh(e,t){aw(e,t);var r=Yi(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?nh(e,t.type,r):t.hasOwnProperty("defaultValue")&&nh(e,t.type,Yi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function C0(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function nh(e,t,r){(t!=="number"||Pc(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ya=Array.isArray;function Po(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Yi(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ih(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function N0(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Q(92));if(Ya(r)){if(1<r.length)throw Error(Q(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Yi(r)}}function lw(e,t){var r=Yi(t.value),n=Yi(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function R0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function uw(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?uw(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ou,cw=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ou=Ou||document.createElement("div"),Ou.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ou.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function gl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var il={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aS=["Webkit","ms","Moz","O"];Object.keys(il).forEach(function(e){aS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),il[t]=il[e]})});function dw(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||il.hasOwnProperty(e)&&il[e]?(""+t).trim():t+"px"}function fw(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=dw(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var lS=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oh(e,t){if(t){if(lS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function ah(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lh=null;function Qp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var uh=null,Uo=null,Fo=null;function L0(e){if(e=hu(e)){if(typeof uh!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=_d(t),uh(e.stateNode,e.type,t))}}function hw(e){Uo?Fo?Fo.push(e):Fo=[e]:Uo=e}function pw(){if(Uo){var e=Uo,t=Fo;if(Fo=Uo=null,L0(e),t)for(e=0;e<t.length;e++)L0(t[e])}}function mw(e,t){return e(t)}function gw(){}var lf=!1;function yw(e,t,r){if(lf)return e(t,r);lf=!0;try{return mw(e,t,r)}finally{lf=!1,(Uo!==null||Fo!==null)&&(gw(),pw())}}function yl(e,t){var r=e.stateNode;if(r===null)return null;var n=_d(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Q(231,t,typeof r));return r}var ch=!1;if(ei)try{var Oa={};Object.defineProperty(Oa,"passive",{get:function(){ch=!0}}),window.addEventListener("test",Oa,Oa),window.removeEventListener("test",Oa,Oa)}catch{ch=!1}function uS(e,t,r,n,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var sl=!1,Uc=null,Fc=!1,dh=null,cS={onError:function(e){sl=!0,Uc=e}};function dS(e,t,r,n,i,s,o,a,l){sl=!1,Uc=null,uS.apply(cS,arguments)}function fS(e,t,r,n,i,s,o,a,l){if(dS.apply(this,arguments),sl){if(sl){var u=Uc;sl=!1,Uc=null}else throw Error(Q(198));Fc||(Fc=!0,dh=u)}}function eo(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function ww(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function j0(e){if(eo(e)!==e)throw Error(Q(188))}function hS(e){var t=e.alternate;if(!t){if(t=eo(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return j0(i),e;if(s===n)return j0(i),t;s=s.sibling}throw Error(Q(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(r.alternate!==n)throw Error(Q(190))}if(r.tag!==3)throw Error(Q(188));return r.stateNode.current===r?e:t}function vw(e){return e=hS(e),e!==null?xw(e):null}function xw(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xw(e);if(t!==null)return t;e=e.sibling}return null}var Ew=pr.unstable_scheduleCallback,_0=pr.unstable_cancelCallback,pS=pr.unstable_shouldYield,mS=pr.unstable_requestPaint,We=pr.unstable_now,gS=pr.unstable_getCurrentPriorityLevel,Yp=pr.unstable_ImmediatePriority,Sw=pr.unstable_UserBlockingPriority,Mc=pr.unstable_NormalPriority,yS=pr.unstable_LowPriority,bw=pr.unstable_IdlePriority,Nd=null,Nn=null;function wS(e){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(Nd,e,void 0,(e.current.flags&128)===128)}catch{}}var Jr=Math.clz32?Math.clz32:ES,vS=Math.log,xS=Math.LN2;function ES(e){return e>>>=0,e===0?32:31-(vS(e)/xS|0)|0}var Iu=64,Du=4194304;function Za(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Bc(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=Za(a):(s&=o,s!==0&&(n=Za(s)))}else o=r&~i,o!==0?n=Za(o):s!==0&&(n=Za(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Jr(t),i=1<<r,n|=e[r],t&=~i;return n}function SS(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bS(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Jr(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=SS(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function fh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function kw(){var e=Iu;return Iu<<=1,!(Iu&4194240)&&(Iu=64),e}function uf(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function du(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Jr(t),e[t]=r}function kS(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Jr(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}function Zp(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Jr(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Ce=0;function Cw(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Nw,Xp,Rw,Lw,jw,hh=!1,zu=[],zi=null,$i=null,Hi=null,wl=new Map,vl=new Map,Ni=[],CS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function A0(e,t){switch(e){case"focusin":case"focusout":zi=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Hi=null;break;case"pointerover":case"pointerout":wl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vl.delete(t.pointerId)}}function Ia(e,t,r,n,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=hu(t),t!==null&&Xp(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function NS(e,t,r,n,i){switch(t){case"focusin":return zi=Ia(zi,e,t,r,n,i),!0;case"dragenter":return $i=Ia($i,e,t,r,n,i),!0;case"mouseover":return Hi=Ia(Hi,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return wl.set(s,Ia(wl.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,vl.set(s,Ia(vl.get(s)||null,e,t,r,n,i)),!0}return!1}function _w(e){var t=xs(e.target);if(t!==null){var r=eo(t);if(r!==null){if(t=r.tag,t===13){if(t=ww(r),t!==null){e.blockedOn=t,jw(e.priority,function(){Rw(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ph(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);lh=n,r.target.dispatchEvent(n),lh=null}else return t=hu(r),t!==null&&Xp(t),e.blockedOn=r,!1;t.shift()}return!0}function T0(e,t,r){cc(e)&&r.delete(t)}function RS(){hh=!1,zi!==null&&cc(zi)&&(zi=null),$i!==null&&cc($i)&&($i=null),Hi!==null&&cc(Hi)&&(Hi=null),wl.forEach(T0),vl.forEach(T0)}function Da(e,t){e.blockedOn===t&&(e.blockedOn=null,hh||(hh=!0,pr.unstable_scheduleCallback(pr.unstable_NormalPriority,RS)))}function xl(e){function t(i){return Da(i,e)}if(0<zu.length){Da(zu[0],e);for(var r=1;r<zu.length;r++){var n=zu[r];n.blockedOn===e&&(n.blockedOn=null)}}for(zi!==null&&Da(zi,e),$i!==null&&Da($i,e),Hi!==null&&Da(Hi,e),wl.forEach(t),vl.forEach(t),r=0;r<Ni.length;r++)n=Ni[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ni.length&&(r=Ni[0],r.blockedOn===null);)_w(r),r.blockedOn===null&&Ni.shift()}var Mo=ai.ReactCurrentBatchConfig,Oc=!0;function LS(e,t,r,n){var i=Ce,s=Mo.transition;Mo.transition=null;try{Ce=1,Jp(e,t,r,n)}finally{Ce=i,Mo.transition=s}}function jS(e,t,r,n){var i=Ce,s=Mo.transition;Mo.transition=null;try{Ce=4,Jp(e,t,r,n)}finally{Ce=i,Mo.transition=s}}function Jp(e,t,r,n){if(Oc){var i=ph(e,t,r,n);if(i===null)vf(e,t,n,Ic,r),A0(e,n);else if(NS(i,e,t,r,n))n.stopPropagation();else if(A0(e,n),t&4&&-1<CS.indexOf(e)){for(;i!==null;){var s=hu(i);if(s!==null&&Nw(s),s=ph(e,t,r,n),s===null&&vf(e,t,n,Ic,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else vf(e,t,n,null,r)}}var Ic=null;function ph(e,t,r,n){if(Ic=null,e=Qp(n),e=xs(e),e!==null)if(t=eo(e),t===null)e=null;else if(r=t.tag,r===13){if(e=ww(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ic=e,null}function Aw(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gS()){case Yp:return 1;case Sw:return 4;case Mc:case yS:return 16;case bw:return 536870912;default:return 16}default:return 16}}var Ii=null,em=null,dc=null;function Tw(){if(dc)return dc;var e,t=em,r=t.length,n,i="value"in Ii?Ii.value:Ii.textContent,s=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[s-n];n++);return dc=i.slice(e,1<n?1-n:void 0)}function fc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $u(){return!0}function P0(){return!1}function gr(e){function t(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$u:P0,this.isPropagationStopped=P0,this}return ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=$u)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=$u)},persist:function(){},isPersistent:$u}),t}var La={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tm=gr(La),fu=ze({},La,{view:0,detail:0}),_S=gr(fu),cf,df,za,Rd=ze({},fu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==za&&(za&&e.type==="mousemove"?(cf=e.screenX-za.screenX,df=e.screenY-za.screenY):df=cf=0,za=e),cf)},movementY:function(e){return"movementY"in e?e.movementY:df}}),U0=gr(Rd),AS=ze({},Rd,{dataTransfer:0}),TS=gr(AS),PS=ze({},fu,{relatedTarget:0}),ff=gr(PS),US=ze({},La,{animationName:0,elapsedTime:0,pseudoElement:0}),FS=gr(US),MS=ze({},La,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),BS=gr(MS),OS=ze({},La,{data:0}),F0=gr(OS),IS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $S(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zS[e])?!!t[e]:!1}function rm(){return $S}var HS=ze({},fu,{key:function(e){if(e.key){var t=IS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?DS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rm,charCode:function(e){return e.type==="keypress"?fc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),WS=gr(HS),VS=ze({},Rd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M0=gr(VS),qS=ze({},fu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rm}),KS=gr(qS),GS=ze({},La,{propertyName:0,elapsedTime:0,pseudoElement:0}),QS=gr(GS),YS=ze({},Rd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ZS=gr(YS),XS=[9,13,27,32],nm=ei&&"CompositionEvent"in window,ol=null;ei&&"documentMode"in document&&(ol=document.documentMode);var JS=ei&&"TextEvent"in window&&!ol,Pw=ei&&(!nm||ol&&8<ol&&11>=ol),B0=" ",O0=!1;function Uw(e,t){switch(e){case"keyup":return XS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fw(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bo=!1;function eb(e,t){switch(e){case"compositionend":return Fw(t);case"keypress":return t.which!==32?null:(O0=!0,B0);case"textInput":return e=t.data,e===B0&&O0?null:e;default:return null}}function tb(e,t){if(bo)return e==="compositionend"||!nm&&Uw(e,t)?(e=Tw(),dc=em=Ii=null,bo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pw&&t.locale!=="ko"?null:t.data;default:return null}}var rb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rb[e.type]:t==="textarea"}function Mw(e,t,r,n){hw(n),t=Dc(t,"onChange"),0<t.length&&(r=new tm("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var al=null,El=null;function nb(e){Kw(e,0)}function Ld(e){var t=No(e);if(ow(t))return e}function ib(e,t){if(e==="change")return t}var Bw=!1;if(ei){var hf;if(ei){var pf="oninput"in document;if(!pf){var D0=document.createElement("div");D0.setAttribute("oninput","return;"),pf=typeof D0.oninput=="function"}hf=pf}else hf=!1;Bw=hf&&(!document.documentMode||9<document.documentMode)}function z0(){al&&(al.detachEvent("onpropertychange",Ow),El=al=null)}function Ow(e){if(e.propertyName==="value"&&Ld(El)){var t=[];Mw(t,El,e,Qp(e)),yw(nb,t)}}function sb(e,t,r){e==="focusin"?(z0(),al=t,El=r,al.attachEvent("onpropertychange",Ow)):e==="focusout"&&z0()}function ob(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ld(El)}function ab(e,t){if(e==="click")return Ld(t)}function lb(e,t){if(e==="input"||e==="change")return Ld(t)}function ub(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tn=typeof Object.is=="function"?Object.is:ub;function Sl(e,t){if(tn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Yf.call(t,i)||!tn(e[i],t[i]))return!1}return!0}function $0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function H0(e,t){var r=$0(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$0(r)}}function Iw(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Iw(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Dw(){for(var e=window,t=Pc();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Pc(e.document)}return t}function im(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function cb(e){var t=Dw(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Iw(r.ownerDocument.documentElement,r)){if(n!==null&&im(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=H0(r,s);var o=H0(r,n);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var db=ei&&"documentMode"in document&&11>=document.documentMode,ko=null,mh=null,ll=null,gh=!1;function W0(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;gh||ko==null||ko!==Pc(n)||(n=ko,"selectionStart"in n&&im(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ll&&Sl(ll,n)||(ll=n,n=Dc(mh,"onSelect"),0<n.length&&(t=new tm("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ko)))}function Hu(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Co={animationend:Hu("Animation","AnimationEnd"),animationiteration:Hu("Animation","AnimationIteration"),animationstart:Hu("Animation","AnimationStart"),transitionend:Hu("Transition","TransitionEnd")},mf={},zw={};ei&&(zw=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function jd(e){if(mf[e])return mf[e];if(!Co[e])return e;var t=Co[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in zw)return mf[e]=t[r];return e}var $w=jd("animationend"),Hw=jd("animationiteration"),Ww=jd("animationstart"),Vw=jd("transitionend"),qw=new Map,V0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(e,t){qw.set(e,t),Js(t,[e])}for(var gf=0;gf<V0.length;gf++){var yf=V0[gf],fb=yf.toLowerCase(),hb=yf[0].toUpperCase()+yf.slice(1);ns(fb,"on"+hb)}ns($w,"onAnimationEnd");ns(Hw,"onAnimationIteration");ns(Ww,"onAnimationStart");ns("dblclick","onDoubleClick");ns("focusin","onFocus");ns("focusout","onBlur");ns(Vw,"onTransitionEnd");va("onMouseEnter",["mouseout","mouseover"]);va("onMouseLeave",["mouseout","mouseover"]);va("onPointerEnter",["pointerout","pointerover"]);va("onPointerLeave",["pointerout","pointerover"]);Js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Js("onBeforeInput",["compositionend","keypress","textInput","paste"]);Js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xa));function q0(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,fS(n,t,void 0,e),e.currentTarget=null}function Kw(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;q0(i,a,u),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;q0(i,a,u),s=l}}}if(Fc)throw e=dh,Fc=!1,dh=null,e}function _e(e,t){var r=t[Eh];r===void 0&&(r=t[Eh]=new Set);var n=e+"__bubble";r.has(n)||(Gw(t,e,2,!1),r.add(n))}function wf(e,t,r){var n=0;t&&(n|=4),Gw(r,e,n,t)}var Wu="_reactListening"+Math.random().toString(36).slice(2);function bl(e){if(!e[Wu]){e[Wu]=!0,tw.forEach(function(r){r!=="selectionchange"&&(pb.has(r)||wf(r,!1,e),wf(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wu]||(t[Wu]=!0,wf("selectionchange",!1,t))}}function Gw(e,t,r,n){switch(Aw(t)){case 1:var i=LS;break;case 4:i=jS;break;default:i=Jp}r=i.bind(null,t,r,e),i=void 0,!ch||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function vf(e,t,r,n,i){var s=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=xs(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}yw(function(){var u=s,d=Qp(r),f=[];e:{var h=qw.get(e);if(h!==void 0){var w=tm,E=e;switch(e){case"keypress":if(fc(r)===0)break e;case"keydown":case"keyup":w=WS;break;case"focusin":E="focus",w=ff;break;case"focusout":E="blur",w=ff;break;case"beforeblur":case"afterblur":w=ff;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=U0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=TS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=KS;break;case $w:case Hw:case Ww:w=FS;break;case Vw:w=QS;break;case"scroll":w=_S;break;case"wheel":w=ZS;break;case"copy":case"cut":case"paste":w=BS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=M0}var S=(t&4)!==0,x=!S&&e==="scroll",p=S?h!==null?h+"Capture":null:h;S=[];for(var g=u,y;g!==null;){y=g;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,p!==null&&(b=yl(g,p),b!=null&&S.push(kl(g,b,y)))),x)break;g=g.return}0<S.length&&(h=new w(h,E,null,r,d),f.push({event:h,listeners:S}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",h&&r!==lh&&(E=r.relatedTarget||r.fromElement)&&(xs(E)||E[ti]))break e;if((w||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,w?(E=r.relatedTarget||r.toElement,w=u,E=E?xs(E):null,E!==null&&(x=eo(E),E!==x||E.tag!==5&&E.tag!==6)&&(E=null)):(w=null,E=u),w!==E)){if(S=U0,b="onMouseLeave",p="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(S=M0,b="onPointerLeave",p="onPointerEnter",g="pointer"),x=w==null?h:No(w),y=E==null?h:No(E),h=new S(b,g+"leave",w,r,d),h.target=x,h.relatedTarget=y,b=null,xs(d)===u&&(S=new S(p,g+"enter",E,r,d),S.target=y,S.relatedTarget=x,b=S),x=b,w&&E)t:{for(S=w,p=E,g=0,y=S;y;y=ao(y))g++;for(y=0,b=p;b;b=ao(b))y++;for(;0<g-y;)S=ao(S),g--;for(;0<y-g;)p=ao(p),y--;for(;g--;){if(S===p||p!==null&&S===p.alternate)break t;S=ao(S),p=ao(p)}S=null}else S=null;w!==null&&K0(f,h,w,S,!1),E!==null&&x!==null&&K0(f,x,E,S,!0)}}e:{if(h=u?No(u):window,w=h.nodeName&&h.nodeName.toLowerCase(),w==="select"||w==="input"&&h.type==="file")var L=ib;else if(I0(h))if(Bw)L=lb;else{L=ob;var v=sb}else(w=h.nodeName)&&w.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(L=ab);if(L&&(L=L(e,u))){Mw(f,L,r,d);break e}v&&v(e,h,u),e==="focusout"&&(v=h._wrapperState)&&v.controlled&&h.type==="number"&&nh(h,"number",h.value)}switch(v=u?No(u):window,e){case"focusin":(I0(v)||v.contentEditable==="true")&&(ko=v,mh=u,ll=null);break;case"focusout":ll=mh=ko=null;break;case"mousedown":gh=!0;break;case"contextmenu":case"mouseup":case"dragend":gh=!1,W0(f,r,d);break;case"selectionchange":if(db)break;case"keydown":case"keyup":W0(f,r,d)}var F;if(nm)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else bo?Uw(e,r)&&(O="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(Pw&&r.locale!=="ko"&&(bo||O!=="onCompositionStart"?O==="onCompositionEnd"&&bo&&(F=Tw()):(Ii=d,em="value"in Ii?Ii.value:Ii.textContent,bo=!0)),v=Dc(u,O),0<v.length&&(O=new F0(O,e,null,r,d),f.push({event:O,listeners:v}),F?O.data=F:(F=Fw(r),F!==null&&(O.data=F)))),(F=JS?eb(e,r):tb(e,r))&&(u=Dc(u,"onBeforeInput"),0<u.length&&(d=new F0("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=F))}Kw(f,t)})}function kl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Dc(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=yl(e,r),s!=null&&n.unshift(kl(e,s,i)),s=yl(e,t),s!=null&&n.push(kl(e,s,i))),e=e.return}return n}function ao(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function K0(e,t,r,n,i){for(var s=t._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,i?(l=yl(r,s),l!=null&&o.unshift(kl(r,l,a))):i||(l=yl(r,s),l!=null&&o.push(kl(r,l,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var mb=/\r\n?/g,gb=/\u0000|\uFFFD/g;function G0(e){return(typeof e=="string"?e:""+e).replace(mb,`
`).replace(gb,"")}function Vu(e,t,r){if(t=G0(t),G0(e)!==t&&r)throw Error(Q(425))}function zc(){}var yh=null,wh=null;function vh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xh=typeof setTimeout=="function"?setTimeout:void 0,yb=typeof clearTimeout=="function"?clearTimeout:void 0,Q0=typeof Promise=="function"?Promise:void 0,wb=typeof queueMicrotask=="function"?queueMicrotask:typeof Q0<"u"?function(e){return Q0.resolve(null).then(e).catch(vb)}:xh;function vb(e){setTimeout(function(){throw e})}function xf(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),xl(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);xl(t)}function Wi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Y0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ja=Math.random().toString(36).slice(2),Sn="__reactFiber$"+ja,Cl="__reactProps$"+ja,ti="__reactContainer$"+ja,Eh="__reactEvents$"+ja,xb="__reactListeners$"+ja,Eb="__reactHandles$"+ja;function xs(e){var t=e[Sn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ti]||r[Sn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Y0(e);e!==null;){if(r=e[Sn])return r;e=Y0(e)}return t}e=r,r=e.parentNode}return null}function hu(e){return e=e[Sn]||e[ti],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function No(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function _d(e){return e[Cl]||null}var Sh=[],Ro=-1;function is(e){return{current:e}}function Pe(e){0>Ro||(e.current=Sh[Ro],Sh[Ro]=null,Ro--)}function Re(e,t){Ro++,Sh[Ro]=e.current,e.current=t}var Zi={},jt=is(Zi),Zt=is(!1),Ks=Zi;function xa(e,t){var r=e.type.contextTypes;if(!r)return Zi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Xt(e){return e=e.childContextTypes,e!=null}function $c(){Pe(Zt),Pe(jt)}function Z0(e,t,r){if(jt.current!==Zi)throw Error(Q(168));Re(jt,t),Re(Zt,r)}function Qw(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Q(108,sS(e)||"Unknown",i));return ze({},r,n)}function Hc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Zi,Ks=jt.current,Re(jt,e),Re(Zt,Zt.current),!0}function X0(e,t,r){var n=e.stateNode;if(!n)throw Error(Q(169));r?(e=Qw(e,t,Ks),n.__reactInternalMemoizedMergedChildContext=e,Pe(Zt),Pe(jt),Re(jt,e)):Pe(Zt),Re(Zt,r)}var Bn=null,Ad=!1,Ef=!1;function Yw(e){Bn===null?Bn=[e]:Bn.push(e)}function Sb(e){Ad=!0,Yw(e)}function ss(){if(!Ef&&Bn!==null){Ef=!0;var e=0,t=Ce;try{var r=Bn;for(Ce=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Bn=null,Ad=!1}catch(i){throw Bn!==null&&(Bn=Bn.slice(e+1)),Ew(Yp,ss),i}finally{Ce=t,Ef=!1}}return null}var Lo=[],jo=0,Wc=null,Vc=0,kr=[],Cr=0,Gs=null,Qn=1,Yn="";function fs(e,t){Lo[jo++]=Vc,Lo[jo++]=Wc,Wc=e,Vc=t}function Zw(e,t,r){kr[Cr++]=Qn,kr[Cr++]=Yn,kr[Cr++]=Gs,Gs=e;var n=Qn;e=Yn;var i=32-Jr(n)-1;n&=~(1<<i),r+=1;var s=32-Jr(t)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Qn=1<<32-Jr(t)+i|r<<i|n,Yn=s+e}else Qn=1<<s|r<<i|n,Yn=e}function sm(e){e.return!==null&&(fs(e,1),Zw(e,1,0))}function om(e){for(;e===Wc;)Wc=Lo[--jo],Lo[jo]=null,Vc=Lo[--jo],Lo[jo]=null;for(;e===Gs;)Gs=kr[--Cr],kr[Cr]=null,Yn=kr[--Cr],kr[Cr]=null,Qn=kr[--Cr],kr[Cr]=null}var hr=null,fr=null,Be=!1,Zr=null;function Xw(e,t){var r=Rr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function J0(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,hr=e,fr=Wi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,hr=e,fr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Gs!==null?{id:Qn,overflow:Yn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Rr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,hr=e,fr=null,!0):!1;default:return!1}}function bh(e){return(e.mode&1)!==0&&(e.flags&128)===0}function kh(e){if(Be){var t=fr;if(t){var r=t;if(!J0(e,t)){if(bh(e))throw Error(Q(418));t=Wi(r.nextSibling);var n=hr;t&&J0(e,t)?Xw(n,r):(e.flags=e.flags&-4097|2,Be=!1,hr=e)}}else{if(bh(e))throw Error(Q(418));e.flags=e.flags&-4097|2,Be=!1,hr=e}}}function eg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;hr=e}function qu(e){if(e!==hr)return!1;if(!Be)return eg(e),Be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vh(e.type,e.memoizedProps)),t&&(t=fr)){if(bh(e))throw Jw(),Error(Q(418));for(;t;)Xw(e,t),t=Wi(t.nextSibling)}if(eg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){fr=Wi(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}fr=null}}else fr=hr?Wi(e.stateNode.nextSibling):null;return!0}function Jw(){for(var e=fr;e;)e=Wi(e.nextSibling)}function Ea(){fr=hr=null,Be=!1}function am(e){Zr===null?Zr=[e]:Zr.push(e)}var bb=ai.ReactCurrentBatchConfig;function $a(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Q(309));var n=r.stateNode}if(!n)throw Error(Q(147,e));var i=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(Q(284));if(!r._owner)throw Error(Q(290,e))}return e}function Ku(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function tg(e){var t=e._init;return t(e._payload)}function ev(e){function t(p,g){if(e){var y=p.deletions;y===null?(p.deletions=[g],p.flags|=16):y.push(g)}}function r(p,g){if(!e)return null;for(;g!==null;)t(p,g),g=g.sibling;return null}function n(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function i(p,g){return p=Gi(p,g),p.index=0,p.sibling=null,p}function s(p,g,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<g?(p.flags|=2,g):y):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,g,y,b){return g===null||g.tag!==6?(g=Lf(y,p.mode,b),g.return=p,g):(g=i(g,y),g.return=p,g)}function l(p,g,y,b){var L=y.type;return L===So?d(p,g,y.props.children,b,y.key):g!==null&&(g.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===bi&&tg(L)===g.type)?(b=i(g,y.props),b.ref=$a(p,g,y),b.return=p,b):(b=vc(y.type,y.key,y.props,null,p.mode,b),b.ref=$a(p,g,y),b.return=p,b)}function u(p,g,y,b){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=jf(y,p.mode,b),g.return=p,g):(g=i(g,y.children||[]),g.return=p,g)}function d(p,g,y,b,L){return g===null||g.tag!==7?(g=Hs(y,p.mode,b,L),g.return=p,g):(g=i(g,y),g.return=p,g)}function f(p,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Lf(""+g,p.mode,y),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Mu:return y=vc(g.type,g.key,g.props,null,p.mode,y),y.ref=$a(p,null,g),y.return=p,y;case Eo:return g=jf(g,p.mode,y),g.return=p,g;case bi:var b=g._init;return f(p,b(g._payload),y)}if(Ya(g)||Ba(g))return g=Hs(g,p.mode,y,null),g.return=p,g;Ku(p,g)}return null}function h(p,g,y,b){var L=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return L!==null?null:a(p,g,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Mu:return y.key===L?l(p,g,y,b):null;case Eo:return y.key===L?u(p,g,y,b):null;case bi:return L=y._init,h(p,g,L(y._payload),b)}if(Ya(y)||Ba(y))return L!==null?null:d(p,g,y,b,null);Ku(p,y)}return null}function w(p,g,y,b,L){if(typeof b=="string"&&b!==""||typeof b=="number")return p=p.get(y)||null,a(g,p,""+b,L);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Mu:return p=p.get(b.key===null?y:b.key)||null,l(g,p,b,L);case Eo:return p=p.get(b.key===null?y:b.key)||null,u(g,p,b,L);case bi:var v=b._init;return w(p,g,y,v(b._payload),L)}if(Ya(b)||Ba(b))return p=p.get(y)||null,d(g,p,b,L,null);Ku(g,b)}return null}function E(p,g,y,b){for(var L=null,v=null,F=g,O=g=0,M=null;F!==null&&O<y.length;O++){F.index>O?(M=F,F=null):M=F.sibling;var k=h(p,F,y[O],b);if(k===null){F===null&&(F=M);break}e&&F&&k.alternate===null&&t(p,F),g=s(k,g,O),v===null?L=k:v.sibling=k,v=k,F=M}if(O===y.length)return r(p,F),Be&&fs(p,O),L;if(F===null){for(;O<y.length;O++)F=f(p,y[O],b),F!==null&&(g=s(F,g,O),v===null?L=F:v.sibling=F,v=F);return Be&&fs(p,O),L}for(F=n(p,F);O<y.length;O++)M=w(F,p,O,y[O],b),M!==null&&(e&&M.alternate!==null&&F.delete(M.key===null?O:M.key),g=s(M,g,O),v===null?L=M:v.sibling=M,v=M);return e&&F.forEach(function(C){return t(p,C)}),Be&&fs(p,O),L}function S(p,g,y,b){var L=Ba(y);if(typeof L!="function")throw Error(Q(150));if(y=L.call(y),y==null)throw Error(Q(151));for(var v=L=null,F=g,O=g=0,M=null,k=y.next();F!==null&&!k.done;O++,k=y.next()){F.index>O?(M=F,F=null):M=F.sibling;var C=h(p,F,k.value,b);if(C===null){F===null&&(F=M);break}e&&F&&C.alternate===null&&t(p,F),g=s(C,g,O),v===null?L=C:v.sibling=C,v=C,F=M}if(k.done)return r(p,F),Be&&fs(p,O),L;if(F===null){for(;!k.done;O++,k=y.next())k=f(p,k.value,b),k!==null&&(g=s(k,g,O),v===null?L=k:v.sibling=k,v=k);return Be&&fs(p,O),L}for(F=n(p,F);!k.done;O++,k=y.next())k=w(F,p,O,k.value,b),k!==null&&(e&&k.alternate!==null&&F.delete(k.key===null?O:k.key),g=s(k,g,O),v===null?L=k:v.sibling=k,v=k);return e&&F.forEach(function(U){return t(p,U)}),Be&&fs(p,O),L}function x(p,g,y,b){if(typeof y=="object"&&y!==null&&y.type===So&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Mu:e:{for(var L=y.key,v=g;v!==null;){if(v.key===L){if(L=y.type,L===So){if(v.tag===7){r(p,v.sibling),g=i(v,y.props.children),g.return=p,p=g;break e}}else if(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===bi&&tg(L)===v.type){r(p,v.sibling),g=i(v,y.props),g.ref=$a(p,v,y),g.return=p,p=g;break e}r(p,v);break}else t(p,v);v=v.sibling}y.type===So?(g=Hs(y.props.children,p.mode,b,y.key),g.return=p,p=g):(b=vc(y.type,y.key,y.props,null,p.mode,b),b.ref=$a(p,g,y),b.return=p,p=b)}return o(p);case Eo:e:{for(v=y.key;g!==null;){if(g.key===v)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){r(p,g.sibling),g=i(g,y.children||[]),g.return=p,p=g;break e}else{r(p,g);break}else t(p,g);g=g.sibling}g=jf(y,p.mode,b),g.return=p,p=g}return o(p);case bi:return v=y._init,x(p,g,v(y._payload),b)}if(Ya(y))return E(p,g,y,b);if(Ba(y))return S(p,g,y,b);Ku(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(r(p,g.sibling),g=i(g,y),g.return=p,p=g):(r(p,g),g=Lf(y,p.mode,b),g.return=p,p=g),o(p)):r(p,g)}return x}var Sa=ev(!0),tv=ev(!1),qc=is(null),Kc=null,_o=null,lm=null;function um(){lm=_o=Kc=null}function cm(e){var t=qc.current;Pe(qc),e._currentValue=t}function Ch(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Bo(e,t){Kc=e,lm=_o=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Qt=!0),e.firstContext=null)}function Ar(e){var t=e._currentValue;if(lm!==e)if(e={context:e,memoizedValue:t,next:null},_o===null){if(Kc===null)throw Error(Q(308));_o=e,Kc.dependencies={lanes:0,firstContext:e}}else _o=_o.next=e;return t}var Es=null;function dm(e){Es===null?Es=[e]:Es.push(e)}function rv(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,dm(t)):(r.next=i.next,i.next=r),t.interleaved=r,ri(e,n)}function ri(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ki=!1;function fm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vi(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ve&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,ri(e,r)}return i=n.interleaved,i===null?(t.next=t,dm(n)):(t.next=i.next,i.next=t),n.interleaved=t,ri(e,r)}function hc(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Zp(e,r)}}function rg(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=t:s=s.next=t}else i=s=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Gc(e,t,r,n){var i=e.updateQueue;ki=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,d=u=l=null,a=s;do{var h=a.lane,w=a.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=e,S=a;switch(h=t,w=r,S.tag){case 1:if(E=S.payload,typeof E=="function"){f=E.call(w,f,h);break e}f=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=S.payload,h=typeof E=="function"?E.call(w,f,h):E,h==null)break e;f=ze({},f,h);break e;case 2:ki=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else w={eventTime:w,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=w,l=f):d=d.next=w,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Ys|=o,e.lanes=o,e.memoizedState=f}}function ng(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Q(191,i));i.call(n)}}}var pu={},Rn=is(pu),Nl=is(pu),Rl=is(pu);function Ss(e){if(e===pu)throw Error(Q(174));return e}function hm(e,t){switch(Re(Rl,t),Re(Nl,e),Re(Rn,pu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:sh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=sh(t,e)}Pe(Rn),Re(Rn,t)}function ba(){Pe(Rn),Pe(Nl),Pe(Rl)}function iv(e){Ss(Rl.current);var t=Ss(Rn.current),r=sh(t,e.type);t!==r&&(Re(Nl,e),Re(Rn,r))}function pm(e){Nl.current===e&&(Pe(Rn),Pe(Nl))}var Ie=is(0);function Qc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Sf=[];function mm(){for(var e=0;e<Sf.length;e++)Sf[e]._workInProgressVersionPrimary=null;Sf.length=0}var pc=ai.ReactCurrentDispatcher,bf=ai.ReactCurrentBatchConfig,Qs=0,De=null,Je=null,ct=null,Yc=!1,ul=!1,Ll=0,kb=0;function St(){throw Error(Q(321))}function gm(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!tn(e[r],t[r]))return!1;return!0}function ym(e,t,r,n,i,s){if(Qs=s,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pc.current=e===null||e.memoizedState===null?Lb:jb,e=r(n,i),ul){s=0;do{if(ul=!1,Ll=0,25<=s)throw Error(Q(301));s+=1,ct=Je=null,t.updateQueue=null,pc.current=_b,e=r(n,i)}while(ul)}if(pc.current=Zc,t=Je!==null&&Je.next!==null,Qs=0,ct=Je=De=null,Yc=!1,t)throw Error(Q(300));return e}function wm(){var e=Ll!==0;return Ll=0,e}function hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?De.memoizedState=ct=e:ct=ct.next=e,ct}function Tr(){if(Je===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=Je.next;var t=ct===null?De.memoizedState:ct.next;if(t!==null)ct=t,Je=e;else{if(e===null)throw Error(Q(310));Je=e,e={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},ct===null?De.memoizedState=ct=e:ct=ct.next=e}return ct}function jl(e,t){return typeof t=="function"?t(e):t}function kf(e){var t=Tr(),r=t.queue;if(r===null)throw Error(Q(311));r.lastRenderedReducer=e;var n=Je,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((Qs&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=n):l=l.next=f,De.lanes|=d,Ys|=d}u=u.next}while(u!==null&&u!==s);l===null?o=n:l.next=a,tn(n,t.memoizedState)||(Qt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do s=i.lane,De.lanes|=s,Ys|=s,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Cf(e){var t=Tr(),r=t.queue;if(r===null)throw Error(Q(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);tn(s,t.memoizedState)||(Qt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function sv(){}function ov(e,t){var r=De,n=Tr(),i=t(),s=!tn(n.memoizedState,i);if(s&&(n.memoizedState=i,Qt=!0),n=n.queue,vm(uv.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||ct!==null&&ct.memoizedState.tag&1){if(r.flags|=2048,_l(9,lv.bind(null,r,n,i,t),void 0,null),ft===null)throw Error(Q(349));Qs&30||av(r,t,i)}return i}function av(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function lv(e,t,r,n){t.value=r,t.getSnapshot=n,cv(t)&&dv(e)}function uv(e,t,r){return r(function(){cv(t)&&dv(e)})}function cv(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!tn(e,r)}catch{return!0}}function dv(e){var t=ri(e,1);t!==null&&en(t,e,1,-1)}function ig(e){var t=hn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:e},t.queue=e,e=e.dispatch=Rb.bind(null,De,e),[t.memoizedState,e]}function _l(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function fv(){return Tr().memoizedState}function mc(e,t,r,n){var i=hn();De.flags|=e,i.memoizedState=_l(1|t,r,void 0,n===void 0?null:n)}function Td(e,t,r,n){var i=Tr();n=n===void 0?null:n;var s=void 0;if(Je!==null){var o=Je.memoizedState;if(s=o.destroy,n!==null&&gm(n,o.deps)){i.memoizedState=_l(t,r,s,n);return}}De.flags|=e,i.memoizedState=_l(1|t,r,s,n)}function sg(e,t){return mc(8390656,8,e,t)}function vm(e,t){return Td(2048,8,e,t)}function hv(e,t){return Td(4,2,e,t)}function pv(e,t){return Td(4,4,e,t)}function mv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gv(e,t,r){return r=r!=null?r.concat([e]):null,Td(4,4,mv.bind(null,t,e),r)}function xm(){}function yv(e,t){var r=Tr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&gm(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function wv(e,t){var r=Tr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&gm(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function vv(e,t,r){return Qs&21?(tn(r,t)||(r=kw(),De.lanes|=r,Ys|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Qt=!0),e.memoizedState=r)}function Cb(e,t){var r=Ce;Ce=r!==0&&4>r?r:4,e(!0);var n=bf.transition;bf.transition={};try{e(!1),t()}finally{Ce=r,bf.transition=n}}function xv(){return Tr().memoizedState}function Nb(e,t,r){var n=Ki(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ev(e))Sv(t,r);else if(r=rv(e,t,r,n),r!==null){var i=Bt();en(r,e,n,i),bv(r,t,n)}}function Rb(e,t,r){var n=Ki(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ev(e))Sv(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,tn(a,o)){var l=t.interleaved;l===null?(i.next=i,dm(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=rv(e,t,i,n),r!==null&&(i=Bt(),en(r,e,n,i),bv(r,t,n))}}function Ev(e){var t=e.alternate;return e===De||t!==null&&t===De}function Sv(e,t){ul=Yc=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function bv(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Zp(e,r)}}var Zc={readContext:Ar,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},Lb={readContext:Ar,useCallback:function(e,t){return hn().memoizedState=[e,t===void 0?null:t],e},useContext:Ar,useEffect:sg,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,mc(4194308,4,mv.bind(null,t,e),r)},useLayoutEffect:function(e,t){return mc(4194308,4,e,t)},useInsertionEffect:function(e,t){return mc(4,2,e,t)},useMemo:function(e,t){var r=hn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=hn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Nb.bind(null,De,e),[n.memoizedState,e]},useRef:function(e){var t=hn();return e={current:e},t.memoizedState=e},useState:ig,useDebugValue:xm,useDeferredValue:function(e){return hn().memoizedState=e},useTransition:function(){var e=ig(!1),t=e[0];return e=Cb.bind(null,e[1]),hn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=De,i=hn();if(Be){if(r===void 0)throw Error(Q(407));r=r()}else{if(r=t(),ft===null)throw Error(Q(349));Qs&30||av(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,sg(uv.bind(null,n,s,e),[e]),n.flags|=2048,_l(9,lv.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=hn(),t=ft.identifierPrefix;if(Be){var r=Yn,n=Qn;r=(n&~(1<<32-Jr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ll++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=kb++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},jb={readContext:Ar,useCallback:yv,useContext:Ar,useEffect:vm,useImperativeHandle:gv,useInsertionEffect:hv,useLayoutEffect:pv,useMemo:wv,useReducer:kf,useRef:fv,useState:function(){return kf(jl)},useDebugValue:xm,useDeferredValue:function(e){var t=Tr();return vv(t,Je.memoizedState,e)},useTransition:function(){var e=kf(jl)[0],t=Tr().memoizedState;return[e,t]},useMutableSource:sv,useSyncExternalStore:ov,useId:xv,unstable_isNewReconciler:!1},_b={readContext:Ar,useCallback:yv,useContext:Ar,useEffect:vm,useImperativeHandle:gv,useInsertionEffect:hv,useLayoutEffect:pv,useMemo:wv,useReducer:Cf,useRef:fv,useState:function(){return Cf(jl)},useDebugValue:xm,useDeferredValue:function(e){var t=Tr();return Je===null?t.memoizedState=e:vv(t,Je.memoizedState,e)},useTransition:function(){var e=Cf(jl)[0],t=Tr().memoizedState;return[e,t]},useMutableSource:sv,useSyncExternalStore:ov,useId:xv,unstable_isNewReconciler:!1};function Or(e,t){if(e&&e.defaultProps){t=ze({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Nh(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ze({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Pd={isMounted:function(e){return(e=e._reactInternals)?eo(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Bt(),i=Ki(e),s=Xn(n,i);s.payload=t,r!=null&&(s.callback=r),t=Vi(e,s,i),t!==null&&(en(t,e,i,n),hc(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Bt(),i=Ki(e),s=Xn(n,i);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=Vi(e,s,i),t!==null&&(en(t,e,i,n),hc(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Bt(),n=Ki(e),i=Xn(r,n);i.tag=2,t!=null&&(i.callback=t),t=Vi(e,i,n),t!==null&&(en(t,e,n,r),hc(t,e,n))}};function og(e,t,r,n,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,o):t.prototype&&t.prototype.isPureReactComponent?!Sl(r,n)||!Sl(i,s):!0}function kv(e,t,r){var n=!1,i=Zi,s=t.contextType;return typeof s=="object"&&s!==null?s=Ar(s):(i=Xt(t)?Ks:jt.current,n=t.contextTypes,s=(n=n!=null)?xa(e,i):Zi),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Pd,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ag(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Pd.enqueueReplaceState(t,t.state,null)}function Rh(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},fm(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Ar(s):(s=Xt(t)?Ks:jt.current,i.context=xa(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Nh(e,t,s,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Pd.enqueueReplaceState(i,i.state,null),Gc(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ka(e,t){try{var r="",n=t;do r+=iS(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Nf(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Lh(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Ab=typeof WeakMap=="function"?WeakMap:Map;function Cv(e,t,r){r=Xn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Jc||(Jc=!0,Oh=n),Lh(e,t)},r}function Nv(e,t,r){r=Xn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){Lh(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Lh(e,t),typeof n!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function lg(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Ab;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Vb.bind(null,e,t,r),t.then(e,e))}function ug(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cg(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Xn(-1,1),t.tag=2,Vi(r,t,1))),r.lanes|=1),e)}var Tb=ai.ReactCurrentOwner,Qt=!1;function Mt(e,t,r,n){t.child=e===null?tv(t,null,r,n):Sa(t,e.child,r,n)}function dg(e,t,r,n,i){r=r.render;var s=t.ref;return Bo(t,i),n=ym(e,t,r,n,s,i),r=wm(),e!==null&&!Qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ni(e,t,i)):(Be&&r&&sm(t),t.flags|=1,Mt(e,t,n,i),t.child)}function fg(e,t,r,n,i){if(e===null){var s=r.type;return typeof s=="function"&&!Lm(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,Rv(e,t,s,n,i)):(e=vc(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Sl,r(o,n)&&e.ref===t.ref)return ni(e,t,i)}return t.flags|=1,e=Gi(s,n),e.ref=t.ref,e.return=t,t.child=e}function Rv(e,t,r,n,i){if(e!==null){var s=e.memoizedProps;if(Sl(s,n)&&e.ref===t.ref)if(Qt=!1,t.pendingProps=n=s,(e.lanes&i)!==0)e.flags&131072&&(Qt=!0);else return t.lanes=e.lanes,ni(e,t,i)}return jh(e,t,r,n,i)}function Lv(e,t,r){var n=t.pendingProps,i=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(To,cr),cr|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Re(To,cr),cr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Re(To,cr),cr|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,Re(To,cr),cr|=n;return Mt(e,t,i,r),t.child}function jv(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function jh(e,t,r,n,i){var s=Xt(r)?Ks:jt.current;return s=xa(t,s),Bo(t,i),r=ym(e,t,r,n,s,i),n=wm(),e!==null&&!Qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ni(e,t,i)):(Be&&n&&sm(t),t.flags|=1,Mt(e,t,r,i),t.child)}function hg(e,t,r,n,i){if(Xt(r)){var s=!0;Hc(t)}else s=!1;if(Bo(t,i),t.stateNode===null)gc(e,t),kv(t,r,n),Rh(t,r,n,i),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ar(u):(u=Xt(r)?Ks:jt.current,u=xa(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&ag(t,o,n,u),ki=!1;var h=t.memoizedState;o.state=h,Gc(t,n,o,i),l=t.memoizedState,a!==n||h!==l||Zt.current||ki?(typeof d=="function"&&(Nh(t,r,d,n),l=t.memoizedState),(a=ki||og(t,r,a,n,h,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,nv(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Or(t.type,a),o.props=u,f=t.pendingProps,h=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ar(l):(l=Xt(r)?Ks:jt.current,l=xa(t,l));var w=r.getDerivedStateFromProps;(d=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==l)&&ag(t,o,n,l),ki=!1,h=t.memoizedState,o.state=h,Gc(t,n,o,i);var E=t.memoizedState;a!==f||h!==E||Zt.current||ki?(typeof w=="function"&&(Nh(t,r,w,n),E=t.memoizedState),(u=ki||og(t,r,u,n,h,E,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,E,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=E),o.props=n,o.state=E,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return _h(e,t,r,n,s,i)}function _h(e,t,r,n,i,s){jv(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&X0(t,r,!1),ni(e,t,s);n=t.stateNode,Tb.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Sa(t,e.child,null,s),t.child=Sa(t,null,a,s)):Mt(e,t,a,s),t.memoizedState=n.state,i&&X0(t,r,!0),t.child}function _v(e){var t=e.stateNode;t.pendingContext?Z0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Z0(e,t.context,!1),hm(e,t.containerInfo)}function pg(e,t,r,n,i){return Ea(),am(i),t.flags|=256,Mt(e,t,r,n),t.child}var Ah={dehydrated:null,treeContext:null,retryLane:0};function Th(e){return{baseLanes:e,cachePool:null,transitions:null}}function Av(e,t,r){var n=t.pendingProps,i=Ie.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Re(Ie,i&1),e===null)return kh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,s?(n=t.mode,s=t.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Md(o,n,0,null),e=Hs(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Th(r),t.memoizedState=Ah,e):Em(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Pb(e,t,o,n,a,i,r);if(s){s=n.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Gi(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Gi(a,s):(s=Hs(s,o,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,o=e.child.memoizedState,o=o===null?Th(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=Ah,n}return s=e.child,e=s.sibling,n=Gi(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Em(e,t){return t=Md({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gu(e,t,r,n){return n!==null&&am(n),Sa(t,e.child,null,r),e=Em(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Pb(e,t,r,n,i,s,o){if(r)return t.flags&256?(t.flags&=-257,n=Nf(Error(Q(422))),Gu(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=Md({mode:"visible",children:n.children},i,0,null),s=Hs(s,i,o,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&Sa(t,e.child,null,o),t.child.memoizedState=Th(o),t.memoizedState=Ah,s);if(!(t.mode&1))return Gu(e,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(Q(419)),n=Nf(s,n,void 0),Gu(e,t,o,n)}if(a=(o&e.childLanes)!==0,Qt||a){if(n=ft,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ri(e,i),en(n,e,i,-1))}return Rm(),n=Nf(Error(Q(421))),Gu(e,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=qb.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,fr=Wi(i.nextSibling),hr=t,Be=!0,Zr=null,e!==null&&(kr[Cr++]=Qn,kr[Cr++]=Yn,kr[Cr++]=Gs,Qn=e.id,Yn=e.overflow,Gs=t),t=Em(t,n.children),t.flags|=4096,t)}function mg(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Ch(e.return,t,r)}function Rf(e,t,r,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Tv(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(Mt(e,t,n.children,r),n=Ie.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mg(e,r,t);else if(e.tag===19)mg(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Re(Ie,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Qc(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Rf(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Qc(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Rf(t,!0,r,null,s);break;case"together":Rf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function gc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ni(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ys|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,r=Gi(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Gi(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Ub(e,t,r){switch(t.tag){case 3:_v(t),Ea();break;case 5:iv(t);break;case 1:Xt(t.type)&&Hc(t);break;case 4:hm(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Re(qc,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Re(Ie,Ie.current&1),t.flags|=128,null):r&t.child.childLanes?Av(e,t,r):(Re(Ie,Ie.current&1),e=ni(e,t,r),e!==null?e.sibling:null);Re(Ie,Ie.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Tv(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Re(Ie,Ie.current),n)break;return null;case 22:case 23:return t.lanes=0,Lv(e,t,r)}return ni(e,t,r)}var Pv,Ph,Uv,Fv;Pv=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ph=function(){};Uv=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Ss(Rn.current);var s=null;switch(r){case"input":i=th(e,i),n=th(e,n),s=[];break;case"select":i=ze({},i,{value:void 0}),n=ze({},n,{value:void 0}),s=[];break;case"textarea":i=ih(e,i),n=ih(e,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=zc)}oh(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ml.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(a=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ml.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&_e("scroll",e),s||a===l||(s=[])):(s=s||[]).push(u,l))}r&&(s=s||[]).push("style",r);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};Fv=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ha(e,t){if(!Be)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Fb(e,t,r){var n=t.pendingProps;switch(om(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(t),null;case 1:return Xt(t.type)&&$c(),bt(t),null;case 3:return n=t.stateNode,ba(),Pe(Zt),Pe(jt),mm(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(qu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zr!==null&&(zh(Zr),Zr=null))),Ph(e,t),bt(t),null;case 5:pm(t);var i=Ss(Rl.current);if(r=t.type,e!==null&&t.stateNode!=null)Uv(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Q(166));return bt(t),null}if(e=Ss(Rn.current),qu(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[Sn]=t,n[Cl]=s,e=(t.mode&1)!==0,r){case"dialog":_e("cancel",n),_e("close",n);break;case"iframe":case"object":case"embed":_e("load",n);break;case"video":case"audio":for(i=0;i<Xa.length;i++)_e(Xa[i],n);break;case"source":_e("error",n);break;case"img":case"image":case"link":_e("error",n),_e("load",n);break;case"details":_e("toggle",n);break;case"input":k0(n,s),_e("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},_e("invalid",n);break;case"textarea":N0(n,s),_e("invalid",n)}oh(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&Vu(n.textContent,a,e),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Vu(n.textContent,a,e),i=["children",""+a]):ml.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&_e("scroll",n)}switch(r){case"input":Bu(n),C0(n,s,!0);break;case"textarea":Bu(n),R0(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=zc)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=uw(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Sn]=t,e[Cl]=n,Pv(e,t,!1,!1),t.stateNode=e;e:{switch(o=ah(r,n),r){case"dialog":_e("cancel",e),_e("close",e),i=n;break;case"iframe":case"object":case"embed":_e("load",e),i=n;break;case"video":case"audio":for(i=0;i<Xa.length;i++)_e(Xa[i],e);i=n;break;case"source":_e("error",e),i=n;break;case"img":case"image":case"link":_e("error",e),_e("load",e),i=n;break;case"details":_e("toggle",e),i=n;break;case"input":k0(e,n),i=th(e,n),_e("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=ze({},n,{value:void 0}),_e("invalid",e);break;case"textarea":N0(e,n),i=ih(e,n),_e("invalid",e);break;default:i=n}oh(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?fw(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&cw(e,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&gl(e,l):typeof l=="number"&&gl(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ml.hasOwnProperty(s)?l!=null&&s==="onScroll"&&_e("scroll",e):l!=null&&Vp(e,s,l,o))}switch(r){case"input":Bu(e),C0(e,n,!1);break;case"textarea":Bu(e),R0(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Yi(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?Po(e,!!n.multiple,s,!1):n.defaultValue!=null&&Po(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=zc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return bt(t),null;case 6:if(e&&t.stateNode!=null)Fv(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Q(166));if(r=Ss(Rl.current),Ss(Rn.current),qu(t)){if(n=t.stateNode,r=t.memoizedProps,n[Sn]=t,(s=n.nodeValue!==r)&&(e=hr,e!==null))switch(e.tag){case 3:Vu(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Vu(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Sn]=t,t.stateNode=n}return bt(t),null;case 13:if(Pe(Ie),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Be&&fr!==null&&t.mode&1&&!(t.flags&128))Jw(),Ea(),t.flags|=98560,s=!1;else if(s=qu(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(Q(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Q(317));s[Sn]=t}else Ea(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;bt(t),s=!1}else Zr!==null&&(zh(Zr),Zr=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ie.current&1?tt===0&&(tt=3):Rm())),t.updateQueue!==null&&(t.flags|=4),bt(t),null);case 4:return ba(),Ph(e,t),e===null&&bl(t.stateNode.containerInfo),bt(t),null;case 10:return cm(t.type._context),bt(t),null;case 17:return Xt(t.type)&&$c(),bt(t),null;case 19:if(Pe(Ie),s=t.memoizedState,s===null)return bt(t),null;if(n=(t.flags&128)!==0,o=s.rendering,o===null)if(n)Ha(s,!1);else{if(tt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Qc(e),o!==null){for(t.flags|=128,Ha(s,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Re(Ie,Ie.current&1|2),t.child}e=e.sibling}s.tail!==null&&We()>Ca&&(t.flags|=128,n=!0,Ha(s,!1),t.lanes=4194304)}else{if(!n)if(e=Qc(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ha(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Be)return bt(t),null}else 2*We()-s.renderingStartTime>Ca&&r!==1073741824&&(t.flags|=128,n=!0,Ha(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=We(),t.sibling=null,r=Ie.current,Re(Ie,n?r&1|2:r&1),t):(bt(t),null);case 22:case 23:return Nm(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?cr&1073741824&&(bt(t),t.subtreeFlags&6&&(t.flags|=8192)):bt(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function Mb(e,t){switch(om(t),t.tag){case 1:return Xt(t.type)&&$c(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ba(),Pe(Zt),Pe(jt),mm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return pm(t),null;case 13:if(Pe(Ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));Ea()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pe(Ie),null;case 4:return ba(),null;case 10:return cm(t.type._context),null;case 22:case 23:return Nm(),null;case 24:return null;default:return null}}var Qu=!1,Rt=!1,Bb=typeof WeakSet=="function"?WeakSet:Set,X=null;function Ao(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){He(e,t,n)}else r.current=null}function Uh(e,t,r){try{r()}catch(n){He(e,t,n)}}var gg=!1;function Ob(e,t){if(yh=Oc,e=Dw(),im(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var w;f!==r||i!==0&&f.nodeType!==3||(a=o+i),f!==s||n!==0&&f.nodeType!==3||(l=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(w=f.firstChild)!==null;)h=f,f=w;for(;;){if(f===e)break t;if(h===r&&++u===i&&(a=o),h===s&&++d===n&&(l=o),(w=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=w}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(wh={focusedElem:e,selectionRange:r},Oc=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var E=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var S=E.memoizedProps,x=E.memoizedState,p=t.stateNode,g=p.getSnapshotBeforeUpdate(t.elementType===t.type?S:Or(t.type,S),x);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(b){He(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return E=gg,gg=!1,E}function cl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Uh(t,r,s)}i=i.next}while(i!==n)}}function Ud(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Fh(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Mv(e){var t=e.alternate;t!==null&&(e.alternate=null,Mv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Sn],delete t[Cl],delete t[Eh],delete t[xb],delete t[Eb])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Bv(e){return e.tag===5||e.tag===3||e.tag===4}function yg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=zc));else if(n!==4&&(e=e.child,e!==null))for(Mh(e,t,r),e=e.sibling;e!==null;)Mh(e,t,r),e=e.sibling}function Bh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Bh(e,t,r),e=e.sibling;e!==null;)Bh(e,t,r),e=e.sibling}var gt=null,Qr=!1;function hi(e,t,r){for(r=r.child;r!==null;)Ov(e,t,r),r=r.sibling}function Ov(e,t,r){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(Nd,r)}catch{}switch(r.tag){case 5:Rt||Ao(r,t);case 6:var n=gt,i=Qr;gt=null,hi(e,t,r),gt=n,Qr=i,gt!==null&&(Qr?(e=gt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):gt.removeChild(r.stateNode));break;case 18:gt!==null&&(Qr?(e=gt,r=r.stateNode,e.nodeType===8?xf(e.parentNode,r):e.nodeType===1&&xf(e,r),xl(e)):xf(gt,r.stateNode));break;case 4:n=gt,i=Qr,gt=r.stateNode.containerInfo,Qr=!0,hi(e,t,r),gt=n,Qr=i;break;case 0:case 11:case 14:case 15:if(!Rt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Uh(r,t,o),i=i.next}while(i!==n)}hi(e,t,r);break;case 1:if(!Rt&&(Ao(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){He(r,t,a)}hi(e,t,r);break;case 21:hi(e,t,r);break;case 22:r.mode&1?(Rt=(n=Rt)||r.memoizedState!==null,hi(e,t,r),Rt=n):hi(e,t,r);break;default:hi(e,t,r)}}function wg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Bb),t.forEach(function(n){var i=Kb.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Mr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:gt=a.stateNode,Qr=!1;break e;case 3:gt=a.stateNode.containerInfo,Qr=!0;break e;case 4:gt=a.stateNode.containerInfo,Qr=!0;break e}a=a.return}if(gt===null)throw Error(Q(160));Ov(s,o,i),gt=null,Qr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){He(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Iv(t,e),t=t.sibling}function Iv(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mr(t,e),dn(e),n&4){try{cl(3,e,e.return),Ud(3,e)}catch(S){He(e,e.return,S)}try{cl(5,e,e.return)}catch(S){He(e,e.return,S)}}break;case 1:Mr(t,e),dn(e),n&512&&r!==null&&Ao(r,r.return);break;case 5:if(Mr(t,e),dn(e),n&512&&r!==null&&Ao(r,r.return),e.flags&32){var i=e.stateNode;try{gl(i,"")}catch(S){He(e,e.return,S)}}if(n&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&aw(i,s),ah(a,o);var u=ah(a,s);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?fw(i,f):d==="dangerouslySetInnerHTML"?cw(i,f):d==="children"?gl(i,f):Vp(i,d,f,u)}switch(a){case"input":rh(i,s);break;case"textarea":lw(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Po(i,!!s.multiple,w,!1):h!==!!s.multiple&&(s.defaultValue!=null?Po(i,!!s.multiple,s.defaultValue,!0):Po(i,!!s.multiple,s.multiple?[]:"",!1))}i[Cl]=s}catch(S){He(e,e.return,S)}}break;case 6:if(Mr(t,e),dn(e),n&4){if(e.stateNode===null)throw Error(Q(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(S){He(e,e.return,S)}}break;case 3:if(Mr(t,e),dn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{xl(t.containerInfo)}catch(S){He(e,e.return,S)}break;case 4:Mr(t,e),dn(e);break;case 13:Mr(t,e),dn(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(km=We())),n&4&&wg(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Rt=(u=Rt)||d,Mr(t,e),Rt=u):Mr(t,e),dn(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(X=e,d=e.child;d!==null;){for(f=X=d;X!==null;){switch(h=X,w=h.child,h.tag){case 0:case 11:case 14:case 15:cl(4,h,h.return);break;case 1:Ao(h,h.return);var E=h.stateNode;if(typeof E.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,E.props=t.memoizedProps,E.state=t.memoizedState,E.componentWillUnmount()}catch(S){He(n,r,S)}}break;case 5:Ao(h,h.return);break;case 22:if(h.memoizedState!==null){xg(f);continue}}w!==null?(w.return=h,X=w):xg(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=dw("display",o))}catch(S){He(e,e.return,S)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(S){He(e,e.return,S)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Mr(t,e),dn(e),n&4&&wg(e);break;case 21:break;default:Mr(t,e),dn(e)}}function dn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Bv(r)){var n=r;break e}r=r.return}throw Error(Q(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(gl(i,""),n.flags&=-33);var s=yg(e);Bh(e,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=yg(e);Mh(e,a,o);break;default:throw Error(Q(161))}}catch(l){He(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ib(e,t,r){X=e,Dv(e)}function Dv(e,t,r){for(var n=(e.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Qu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Rt;a=Qu;var u=Rt;if(Qu=o,(Rt=l)&&!u)for(X=i;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?Eg(i):l!==null?(l.return=o,X=l):Eg(i);for(;s!==null;)X=s,Dv(s),s=s.sibling;X=i,Qu=a,Rt=u}vg(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):vg(e)}}function vg(e){for(;X!==null;){var t=X;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Rt||Ud(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Rt)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Or(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&ng(t,s,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}ng(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&xl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Rt||t.flags&512&&Fh(t)}catch(h){He(t,t.return,h)}}if(t===e){X=null;break}if(r=t.sibling,r!==null){r.return=t.return,X=r;break}X=t.return}}function xg(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var r=t.sibling;if(r!==null){r.return=t.return,X=r;break}X=t.return}}function Eg(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ud(4,t)}catch(l){He(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){He(t,i,l)}}var s=t.return;try{Fh(t)}catch(l){He(t,s,l)}break;case 5:var o=t.return;try{Fh(t)}catch(l){He(t,o,l)}}}catch(l){He(t,t.return,l)}if(t===e){X=null;break}var a=t.sibling;if(a!==null){a.return=t.return,X=a;break}X=t.return}}var Db=Math.ceil,Xc=ai.ReactCurrentDispatcher,Sm=ai.ReactCurrentOwner,_r=ai.ReactCurrentBatchConfig,ve=0,ft=null,Ge=null,wt=0,cr=0,To=is(0),tt=0,Al=null,Ys=0,Fd=0,bm=0,dl=null,Kt=null,km=0,Ca=1/0,Mn=null,Jc=!1,Oh=null,qi=null,Yu=!1,Di=null,ed=0,fl=0,Ih=null,yc=-1,wc=0;function Bt(){return ve&6?We():yc!==-1?yc:yc=We()}function Ki(e){return e.mode&1?ve&2&&wt!==0?wt&-wt:bb.transition!==null?(wc===0&&(wc=kw()),wc):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:Aw(e.type)),e):1}function en(e,t,r,n){if(50<fl)throw fl=0,Ih=null,Error(Q(185));du(e,r,n),(!(ve&2)||e!==ft)&&(e===ft&&(!(ve&2)&&(Fd|=r),tt===4&&Ri(e,wt)),Jt(e,n),r===1&&ve===0&&!(t.mode&1)&&(Ca=We()+500,Ad&&ss()))}function Jt(e,t){var r=e.callbackNode;bS(e,t);var n=Bc(e,e===ft?wt:0);if(n===0)r!==null&&_0(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&_0(r),t===1)e.tag===0?Sb(Sg.bind(null,e)):Yw(Sg.bind(null,e)),wb(function(){!(ve&6)&&ss()}),r=null;else{switch(Cw(n)){case 1:r=Yp;break;case 4:r=Sw;break;case 16:r=Mc;break;case 536870912:r=bw;break;default:r=Mc}r=Gv(r,zv.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function zv(e,t){if(yc=-1,wc=0,ve&6)throw Error(Q(327));var r=e.callbackNode;if(Oo()&&e.callbackNode!==r)return null;var n=Bc(e,e===ft?wt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=td(e,n);else{t=n;var i=ve;ve|=2;var s=Hv();(ft!==e||wt!==t)&&(Mn=null,Ca=We()+500,$s(e,t));do try{Hb();break}catch(a){$v(e,a)}while(!0);um(),Xc.current=s,ve=i,Ge!==null?t=0:(ft=null,wt=0,t=tt)}if(t!==0){if(t===2&&(i=fh(e),i!==0&&(n=i,t=Dh(e,i))),t===1)throw r=Al,$s(e,0),Ri(e,n),Jt(e,We()),r;if(t===6)Ri(e,n);else{if(i=e.current.alternate,!(n&30)&&!zb(i)&&(t=td(e,n),t===2&&(s=fh(e),s!==0&&(n=s,t=Dh(e,s))),t===1))throw r=Al,$s(e,0),Ri(e,n),Jt(e,We()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(Q(345));case 2:hs(e,Kt,Mn);break;case 3:if(Ri(e,n),(n&130023424)===n&&(t=km+500-We(),10<t)){if(Bc(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Bt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=xh(hs.bind(null,e,Kt,Mn),t);break}hs(e,Kt,Mn);break;case 4:if(Ri(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-Jr(n);s=1<<o,o=t[o],o>i&&(i=o),n&=~s}if(n=i,n=We()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Db(n/1960))-n,10<n){e.timeoutHandle=xh(hs.bind(null,e,Kt,Mn),n);break}hs(e,Kt,Mn);break;case 5:hs(e,Kt,Mn);break;default:throw Error(Q(329))}}}return Jt(e,We()),e.callbackNode===r?zv.bind(null,e):null}function Dh(e,t){var r=dl;return e.current.memoizedState.isDehydrated&&($s(e,t).flags|=256),e=td(e,t),e!==2&&(t=Kt,Kt=r,t!==null&&zh(t)),e}function zh(e){Kt===null?Kt=e:Kt.push.apply(Kt,e)}function zb(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!tn(s(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ri(e,t){for(t&=~bm,t&=~Fd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Jr(t),n=1<<r;e[r]=-1,t&=~n}}function Sg(e){if(ve&6)throw Error(Q(327));Oo();var t=Bc(e,0);if(!(t&1))return Jt(e,We()),null;var r=td(e,t);if(e.tag!==0&&r===2){var n=fh(e);n!==0&&(t=n,r=Dh(e,n))}if(r===1)throw r=Al,$s(e,0),Ri(e,t),Jt(e,We()),r;if(r===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,hs(e,Kt,Mn),Jt(e,We()),null}function Cm(e,t){var r=ve;ve|=1;try{return e(t)}finally{ve=r,ve===0&&(Ca=We()+500,Ad&&ss())}}function Zs(e){Di!==null&&Di.tag===0&&!(ve&6)&&Oo();var t=ve;ve|=1;var r=_r.transition,n=Ce;try{if(_r.transition=null,Ce=1,e)return e()}finally{Ce=n,_r.transition=r,ve=t,!(ve&6)&&ss()}}function Nm(){cr=To.current,Pe(To)}function $s(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,yb(r)),Ge!==null)for(r=Ge.return;r!==null;){var n=r;switch(om(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&$c();break;case 3:ba(),Pe(Zt),Pe(jt),mm();break;case 5:pm(n);break;case 4:ba();break;case 13:Pe(Ie);break;case 19:Pe(Ie);break;case 10:cm(n.type._context);break;case 22:case 23:Nm()}r=r.return}if(ft=e,Ge=e=Gi(e.current,null),wt=cr=t,tt=0,Al=null,bm=Fd=Ys=0,Kt=dl=null,Es!==null){for(t=0;t<Es.length;t++)if(r=Es[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Es=null}return e}function $v(e,t){do{var r=Ge;try{if(um(),pc.current=Zc,Yc){for(var n=De.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Yc=!1}if(Qs=0,ct=Je=De=null,ul=!1,Ll=0,Sm.current=null,r===null||r.return===null){tt=1,Al=t,Ge=null;break}e:{var s=e,o=r.return,a=r,l=t;if(t=wt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=ug(o);if(w!==null){w.flags&=-257,cg(w,o,a,s,t),w.mode&1&&lg(s,u,t),t=w,l=u;var E=t.updateQueue;if(E===null){var S=new Set;S.add(l),t.updateQueue=S}else E.add(l);break e}else{if(!(t&1)){lg(s,u,t),Rm();break e}l=Error(Q(426))}}else if(Be&&a.mode&1){var x=ug(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),cg(x,o,a,s,t),am(ka(l,a));break e}}s=l=ka(l,a),tt!==4&&(tt=2),dl===null?dl=[s]:dl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var p=Cv(s,l,t);rg(s,p);break e;case 1:a=l;var g=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(qi===null||!qi.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=Nv(s,a,t);rg(s,b);break e}}s=s.return}while(s!==null)}Vv(r)}catch(L){t=L,Ge===r&&r!==null&&(Ge=r=r.return);continue}break}while(!0)}function Hv(){var e=Xc.current;return Xc.current=Zc,e===null?Zc:e}function Rm(){(tt===0||tt===3||tt===2)&&(tt=4),ft===null||!(Ys&268435455)&&!(Fd&268435455)||Ri(ft,wt)}function td(e,t){var r=ve;ve|=2;var n=Hv();(ft!==e||wt!==t)&&(Mn=null,$s(e,t));do try{$b();break}catch(i){$v(e,i)}while(!0);if(um(),ve=r,Xc.current=n,Ge!==null)throw Error(Q(261));return ft=null,wt=0,tt}function $b(){for(;Ge!==null;)Wv(Ge)}function Hb(){for(;Ge!==null&&!pS();)Wv(Ge)}function Wv(e){var t=Kv(e.alternate,e,cr);e.memoizedProps=e.pendingProps,t===null?Vv(e):Ge=t,Sm.current=null}function Vv(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Mb(r,t),r!==null){r.flags&=32767,Ge=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{tt=6,Ge=null;return}}else if(r=Fb(r,t,cr),r!==null){Ge=r;return}if(t=t.sibling,t!==null){Ge=t;return}Ge=t=e}while(t!==null);tt===0&&(tt=5)}function hs(e,t,r){var n=Ce,i=_r.transition;try{_r.transition=null,Ce=1,Wb(e,t,r,n)}finally{_r.transition=i,Ce=n}return null}function Wb(e,t,r,n){do Oo();while(Di!==null);if(ve&6)throw Error(Q(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(kS(e,s),e===ft&&(Ge=ft=null,wt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Yu||(Yu=!0,Gv(Mc,function(){return Oo(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=_r.transition,_r.transition=null;var o=Ce;Ce=1;var a=ve;ve|=4,Sm.current=null,Ob(e,r),Iv(r,e),cb(wh),Oc=!!yh,wh=yh=null,e.current=r,Ib(r),mS(),ve=a,Ce=o,_r.transition=s}else e.current=r;if(Yu&&(Yu=!1,Di=e,ed=i),s=e.pendingLanes,s===0&&(qi=null),wS(r.stateNode),Jt(e,We()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Jc)throw Jc=!1,e=Oh,Oh=null,e;return ed&1&&e.tag!==0&&Oo(),s=e.pendingLanes,s&1?e===Ih?fl++:(fl=0,Ih=e):fl=0,ss(),null}function Oo(){if(Di!==null){var e=Cw(ed),t=_r.transition,r=Ce;try{if(_r.transition=null,Ce=16>e?16:e,Di===null)var n=!1;else{if(e=Di,Di=null,ed=0,ve&6)throw Error(Q(331));var i=ve;for(ve|=4,X=e.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(X=u;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:cl(8,d,s)}var f=d.child;if(f!==null)f.return=d,X=f;else for(;X!==null;){d=X;var h=d.sibling,w=d.return;if(Mv(d),d===u){X=null;break}if(h!==null){h.return=w,X=h;break}X=w}}}var E=s.alternate;if(E!==null){var S=E.child;if(S!==null){E.child=null;do{var x=S.sibling;S.sibling=null,S=x}while(S!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:cl(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,X=p;break e}X=s.return}}var g=e.current;for(X=g;X!==null;){o=X;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,X=y;else e:for(o=g;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ud(9,a)}}catch(L){He(a,a.return,L)}if(a===o){X=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,X=b;break e}X=a.return}}if(ve=i,ss(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(Nd,e)}catch{}n=!0}return n}finally{Ce=r,_r.transition=t}}return!1}function bg(e,t,r){t=ka(r,t),t=Cv(e,t,1),e=Vi(e,t,1),t=Bt(),e!==null&&(du(e,1,t),Jt(e,t))}function He(e,t,r){if(e.tag===3)bg(e,e,r);else for(;t!==null;){if(t.tag===3){bg(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(qi===null||!qi.has(n))){e=ka(r,e),e=Nv(t,e,1),t=Vi(t,e,1),e=Bt(),t!==null&&(du(t,1,e),Jt(t,e));break}}t=t.return}}function Vb(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Bt(),e.pingedLanes|=e.suspendedLanes&r,ft===e&&(wt&r)===r&&(tt===4||tt===3&&(wt&130023424)===wt&&500>We()-km?$s(e,0):bm|=r),Jt(e,t)}function qv(e,t){t===0&&(e.mode&1?(t=Du,Du<<=1,!(Du&130023424)&&(Du=4194304)):t=1);var r=Bt();e=ri(e,t),e!==null&&(du(e,t,r),Jt(e,r))}function qb(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),qv(e,r)}function Kb(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Q(314))}n!==null&&n.delete(t),qv(e,r)}var Kv;Kv=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Zt.current)Qt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Qt=!1,Ub(e,t,r);Qt=!!(e.flags&131072)}else Qt=!1,Be&&t.flags&1048576&&Zw(t,Vc,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;gc(e,t),e=t.pendingProps;var i=xa(t,jt.current);Bo(t,r),i=ym(null,t,n,e,i,r);var s=wm();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xt(n)?(s=!0,Hc(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fm(t),i.updater=Pd,t.stateNode=i,i._reactInternals=t,Rh(t,n,e,r),t=_h(null,t,n,!0,s,r)):(t.tag=0,Be&&s&&sm(t),Mt(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(gc(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=Qb(n),e=Or(n,e),i){case 0:t=jh(null,t,n,e,r);break e;case 1:t=hg(null,t,n,e,r);break e;case 11:t=dg(null,t,n,e,r);break e;case 14:t=fg(null,t,n,Or(n.type,e),r);break e}throw Error(Q(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Or(n,i),jh(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Or(n,i),hg(e,t,n,i,r);case 3:e:{if(_v(t),e===null)throw Error(Q(387));n=t.pendingProps,s=t.memoizedState,i=s.element,nv(e,t),Gc(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=ka(Error(Q(423)),t),t=pg(e,t,n,r,i);break e}else if(n!==i){i=ka(Error(Q(424)),t),t=pg(e,t,n,r,i);break e}else for(fr=Wi(t.stateNode.containerInfo.firstChild),hr=t,Be=!0,Zr=null,r=tv(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ea(),n===i){t=ni(e,t,r);break e}Mt(e,t,n,r)}t=t.child}return t;case 5:return iv(t),e===null&&kh(t),n=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,vh(n,i)?o=null:s!==null&&vh(n,s)&&(t.flags|=32),jv(e,t),Mt(e,t,o,r),t.child;case 6:return e===null&&kh(t),null;case 13:return Av(e,t,r);case 4:return hm(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Sa(t,null,n,r):Mt(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Or(n,i),dg(e,t,n,i,r);case 7:return Mt(e,t,t.pendingProps,r),t.child;case 8:return Mt(e,t,t.pendingProps.children,r),t.child;case 12:return Mt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Re(qc,n._currentValue),n._currentValue=o,s!==null)if(tn(s.value,o)){if(s.children===i.children&&!Zt.current){t=ni(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Xn(-1,r&-r),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),Ch(s.return,r,t),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Q(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Ch(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Mt(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Bo(t,r),i=Ar(i),n=n(i),t.flags|=1,Mt(e,t,n,r),t.child;case 14:return n=t.type,i=Or(n,t.pendingProps),i=Or(n.type,i),fg(e,t,n,i,r);case 15:return Rv(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Or(n,i),gc(e,t),t.tag=1,Xt(n)?(e=!0,Hc(t)):e=!1,Bo(t,r),kv(t,n,i),Rh(t,n,i,r),_h(null,t,n,!0,e,r);case 19:return Tv(e,t,r);case 22:return Lv(e,t,r)}throw Error(Q(156,t.tag))};function Gv(e,t){return Ew(e,t)}function Gb(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(e,t,r,n){return new Gb(e,t,r,n)}function Lm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qb(e){if(typeof e=="function")return Lm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Kp)return 11;if(e===Gp)return 14}return 2}function Gi(e,t){var r=e.alternate;return r===null?(r=Rr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function vc(e,t,r,n,i,s){var o=2;if(n=e,typeof e=="function")Lm(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case So:return Hs(r.children,i,s,t);case qp:o=8,i|=8;break;case Zf:return e=Rr(12,r,t,i|2),e.elementType=Zf,e.lanes=s,e;case Xf:return e=Rr(13,r,t,i),e.elementType=Xf,e.lanes=s,e;case Jf:return e=Rr(19,r,t,i),e.elementType=Jf,e.lanes=s,e;case iw:return Md(r,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rw:o=10;break e;case nw:o=9;break e;case Kp:o=11;break e;case Gp:o=14;break e;case bi:o=16,n=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=Rr(o,r,t,i),t.elementType=e,t.type=n,t.lanes=s,t}function Hs(e,t,r,n){return e=Rr(7,e,n,t),e.lanes=r,e}function Md(e,t,r,n){return e=Rr(22,e,n,t),e.elementType=iw,e.lanes=r,e.stateNode={isHidden:!1},e}function Lf(e,t,r){return e=Rr(6,e,null,t),e.lanes=r,e}function jf(e,t,r){return t=Rr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yb(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uf(0),this.expirationTimes=uf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uf(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jm(e,t,r,n,i,s,o,a,l){return e=new Yb(e,t,r,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Rr(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},fm(s),e}function Zb(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eo,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Qv(e){if(!e)return Zi;e=e._reactInternals;e:{if(eo(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var r=e.type;if(Xt(r))return Qw(e,r,t)}return t}function Yv(e,t,r,n,i,s,o,a,l){return e=jm(r,n,!0,e,i,s,o,a,l),e.context=Qv(null),r=e.current,n=Bt(),i=Ki(r),s=Xn(n,i),s.callback=t??null,Vi(r,s,i),e.current.lanes=i,du(e,i,n),Jt(e,n),e}function Bd(e,t,r,n){var i=t.current,s=Bt(),o=Ki(i);return r=Qv(r),t.context===null?t.context=r:t.pendingContext=r,t=Xn(s,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Vi(i,t,o),e!==null&&(en(e,i,o,s),hc(e,i,o)),o}function rd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function kg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function _m(e,t){kg(e,t),(e=e.alternate)&&kg(e,t)}function Xb(){return null}var Zv=typeof reportError=="function"?reportError:function(e){console.error(e)};function Am(e){this._internalRoot=e}Od.prototype.render=Am.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));Bd(e,t,null,null)};Od.prototype.unmount=Am.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zs(function(){Bd(null,e,null,null)}),t[ti]=null}};function Od(e){this._internalRoot=e}Od.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lw();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ni.length&&t!==0&&t<Ni[r].priority;r++);Ni.splice(r,0,e),r===0&&_w(e)}};function Tm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Id(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Cg(){}function Jb(e,t,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=rd(o);s.call(u)}}var o=Yv(t,n,e,0,null,!1,!1,"",Cg);return e._reactRootContainer=o,e[ti]=o.current,bl(e.nodeType===8?e.parentNode:e),Zs(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var u=rd(l);a.call(u)}}var l=jm(e,0,!1,null,null,!1,!1,"",Cg);return e._reactRootContainer=l,e[ti]=l.current,bl(e.nodeType===8?e.parentNode:e),Zs(function(){Bd(t,l,r,n)}),l}function Dd(e,t,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=rd(o);a.call(l)}}Bd(t,o,e,i)}else o=Jb(r,t,e,i,n);return rd(o)}Nw=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Za(t.pendingLanes);r!==0&&(Zp(t,r|1),Jt(t,We()),!(ve&6)&&(Ca=We()+500,ss()))}break;case 13:Zs(function(){var n=ri(e,1);if(n!==null){var i=Bt();en(n,e,1,i)}}),_m(e,1)}};Xp=function(e){if(e.tag===13){var t=ri(e,134217728);if(t!==null){var r=Bt();en(t,e,134217728,r)}_m(e,134217728)}};Rw=function(e){if(e.tag===13){var t=Ki(e),r=ri(e,t);if(r!==null){var n=Bt();en(r,e,t,n)}_m(e,t)}};Lw=function(){return Ce};jw=function(e,t){var r=Ce;try{return Ce=e,t()}finally{Ce=r}};uh=function(e,t,r){switch(t){case"input":if(rh(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=_d(n);if(!i)throw Error(Q(90));ow(n),rh(n,i)}}}break;case"textarea":lw(e,r);break;case"select":t=r.value,t!=null&&Po(e,!!r.multiple,t,!1)}};mw=Cm;gw=Zs;var e2={usingClientEntryPoint:!1,Events:[hu,No,_d,hw,pw,Cm]},Wa={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},t2={bundleType:Wa.bundleType,version:Wa.version,rendererPackageName:Wa.rendererPackageName,rendererConfig:Wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ai.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vw(e),e===null?null:e.stateNode},findFiberByHostInstance:Wa.findFiberByHostInstance||Xb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zu.isDisabled&&Zu.supportsFiber)try{Nd=Zu.inject(t2),Nn=Zu}catch{}}mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e2;mr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tm(t))throw Error(Q(200));return Zb(e,t,null,r)};mr.createRoot=function(e,t){if(!Tm(e))throw Error(Q(299));var r=!1,n="",i=Zv;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=jm(e,1,!1,null,null,r,!1,n,i),e[ti]=t.current,bl(e.nodeType===8?e.parentNode:e),new Am(t)};mr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=vw(t),e=e===null?null:e.stateNode,e};mr.flushSync=function(e){return Zs(e)};mr.hydrate=function(e,t,r){if(!Id(t))throw Error(Q(200));return Dd(null,e,t,!0,r)};mr.hydrateRoot=function(e,t,r){if(!Tm(e))throw Error(Q(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=Zv;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Yv(t,null,e,1,r??null,i,!1,s,o),e[ti]=t.current,bl(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Od(t)};mr.render=function(e,t,r){if(!Id(t))throw Error(Q(200));return Dd(null,e,t,!1,r)};mr.unmountComponentAtNode=function(e){if(!Id(e))throw Error(Q(40));return e._reactRootContainer?(Zs(function(){Dd(null,null,e,!1,function(){e._reactRootContainer=null,e[ti]=null})}),!0):!1};mr.unstable_batchedUpdates=Cm;mr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Id(r))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return Dd(e,t,r,!1,n)};mr.version="18.3.1-next-f1338f8080-20240426";function Xv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xv)}catch(e){console.error(e)}}Xv(),Xy.exports=mr;var Jv=Xy.exports,ex,Ng=Jv;ex=Ng.createRoot,Ng.hydrateRoot;/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var tx=e=>{throw TypeError(e)},r2=(e,t,r)=>t.has(e)||tx("Cannot "+r),_f=(e,t,r)=>(r2(e,t,"read from private field"),r?r.call(e):t.get(e)),n2=(e,t,r)=>t.has(e)?tx("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Rg="popstate";function i2(e={}){function t(n,i){let{pathname:s,search:o,hash:a}=n.location;return Tl("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Xi(i)}return o2(t,r,null,e)}function me(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ve(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function s2(){return Math.random().toString(36).substring(2,10)}function Lg(e,t){return{usr:e.state,key:e.key,idx:t}}function Tl(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?os(t):t,state:r,key:t&&t.key||n||s2()}}function Xi({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function os(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function o2(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a="POP",l=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function f(){a="POP";let x=d(),p=x==null?null:x-u;u=x,l&&l({action:a,location:S.location,delta:p})}function h(x,p){a="PUSH";let g=Tl(S.location,x,p);u=d()+1;let y=Lg(g,u),b=S.createHref(g);try{o.pushState(y,"",b)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(b)}s&&l&&l({action:a,location:S.location,delta:1})}function w(x,p){a="REPLACE";let g=Tl(S.location,x,p);u=d();let y=Lg(g,u),b=S.createHref(g);o.replaceState(y,"",b),s&&l&&l({action:a,location:S.location,delta:0})}function E(x){return rx(x)}let S={get action(){return a},get location(){return e(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Rg,f),l=x,()=>{i.removeEventListener(Rg,f),l=null}},createHref(x){return t(i,x)},createURL:E,encodeLocation(x){let p=E(x);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:w,go(x){return o.go(x)}};return S}function rx(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),me(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Xi(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}var Ja,jg=class{constructor(e){if(n2(this,Ja,new Map),e)for(let[t,r]of e)this.set(t,r)}get(e){if(_f(this,Ja).has(e))return _f(this,Ja).get(e);if(e.defaultValue!==void 0)return e.defaultValue;throw new Error("No value found for context")}set(e,t){_f(this,Ja).set(e,t)}};Ja=new WeakMap;var a2=new Set(["lazy","caseSensitive","path","id","index","children"]);function l2(e){return a2.has(e)}var u2=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function c2(e){return u2.has(e)}function d2(e){return e.index===!0}function Pl(e,t,r=[],n={},i=!1){return e.map((s,o)=>{let a=[...r,String(o)],l=typeof s.id=="string"?s.id:a.join("-");if(me(s.index!==!0||!s.children,"Cannot specify children on an index route"),me(i||!n[l],`Found a route id collision on id "${l}".  Route id's must be globally unique within Data Router usages`),d2(s)){let u={...s,...t(s),id:l};return n[l]=u,u}else{let u={...s,...t(s),id:l,children:void 0};return n[l]=u,s.children&&(u.children=Pl(s.children,t,a,n,i)),u}})}function Li(e,t,r="/"){return xc(e,t,r,!1)}function xc(e,t,r,n){let i=typeof t=="string"?os(t):t,s=Pr(i.pathname||"/",r);if(s==null)return null;let o=nx(e);h2(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=k2(s);a=S2(o[l],u,n)}return a}function f2(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],handle:r.handle}}function nx(e,t=[],r=[],n=""){let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(me(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length));let u=Ln([n,l.relativePath]),d=r.concat(l);s.children&&s.children.length>0&&(me(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),nx(s.children,t,d,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:x2(u,s.index),routesMeta:d})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of ix(s.path))i(s,o,l)}),t}function ix(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=ix(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function h2(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:E2(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var p2=/^:[\w-]+$/,m2=3,g2=2,y2=1,w2=10,v2=-2,_g=e=>e==="*";function x2(e,t){let r=e.split("/"),n=r.length;return r.some(_g)&&(n+=v2),t&&(n+=g2),r.filter(i=>!_g(i)).reduce((i,s)=>i+(p2.test(s)?m2:s===""?y2:w2),n)}function E2(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function S2(e,t,r=!1){let{routesMeta:n}=e,i={},s="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,d=s==="/"?t:t.slice(s.length)||"/",f=nd({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=nd({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Ln([s,f.pathname]),pathnameBase:L2(Ln([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=Ln([s,f.pathnameBase]))}return o}function nd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=b2(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let E=a[h]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const w=a[h];return f&&!w?u[d]=void 0:u[d]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function b2(e,t=!1,r=!0){Ve(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function k2(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ve(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Pr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function C2({basename:e,pathname:t}){return t==="/"?e:Ln([e,t])}function N2(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?os(e):e;return{pathname:r?r.startsWith("/")?r:R2(r,t):t,search:j2(n),hash:_2(i)}}function R2(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Af(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function sx(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function zd(e){let t=sx(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function $d(e,t,r,n=!1){let i;typeof e=="string"?i=os(e):(i={...e},me(!i.pathname||!i.pathname.includes("?"),Af("?","pathname","search",i)),me(!i.pathname||!i.pathname.includes("#"),Af("#","pathname","hash",i)),me(!i.search||!i.search.includes("#"),Af("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}a=f>=0?t[f]:"/"}let l=N2(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}var Ln=e=>e.join("/").replace(/\/\/+/g,"/"),L2=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),j2=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,_2=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,id=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function Ul(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var ox=["POST","PUT","PATCH","DELETE"],A2=new Set(ox),T2=["GET",...ox],P2=new Set(T2),U2=new Set([301,302,303,307,308]),F2=new Set([307,308]),Tf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},M2={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Va={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},B2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pm=e=>B2.test(e),O2=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),ax="remix-router-transitions",lx=Symbol("ResetLoaderData");function I2(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";me(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=e.hydrationRouteProperties||[],i=e.mapRouteProperties||O2,s={},o=Pl(e.routes,i,void 0,s),a,l=e.basename||"/",u=e.dataStrategy||W2,d={unstable_middleware:!1,...e.future},f=null,h=new Set,w=null,E=null,S=null,x=e.hydrationData!=null,p=Li(o,e.history.location,l),g=!1,y=null,b;if(p==null&&!e.patchRoutesOnNavigation){let A=br(404,{pathname:e.history.location.pathname}),{matches:I,route:W}=$g(o);b=!0,p=I,y={[W.id]:A}}else if(p&&!e.hydrationData&&ju(p,o,e.history.location.pathname).active&&(p=null),p)if(p.some(A=>A.route.lazy))b=!1;else if(!p.some(A=>A.route.loader))b=!0;else{let A=e.hydrationData?e.hydrationData.loaderData:null,I=e.hydrationData?e.hydrationData.errors:null;if(I){let W=p.findIndex(G=>I[G.route.id]!==void 0);b=p.slice(0,W+1).every(G=>!Hh(G.route,A,I))}else b=p.every(W=>!Hh(W.route,A,I))}else{b=!1,p=[];let A=ju(null,o,e.history.location.pathname);A.active&&A.matches&&(g=!0,p=A.matches)}let L,v={historyAction:e.history.action,location:e.history.location,matches:p,initialized:b,navigation:Tf,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||y,fetchers:new Map,blockers:new Map},F="POP",O=!1,M,k=!1,C=new Map,U=null,B=!1,$=!1,D=new Set,N=new Map,j=0,_=-1,H=new Map,q=new Set,V=new Map,K=new Map,ee=new Set,oe=new Map,Le,le=null;function be(){if(f=e.history.listen(({action:A,location:I,delta:W})=>{if(Le){Le(),Le=void 0;return}Ve(oe.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let G=h0({currentLocation:v.location,nextLocation:I,historyAction:A});if(G&&W!=null){let Z=new Promise(re=>{Le=re});e.history.go(W*-1),Lu(G,{state:"blocked",location:I,proceed(){Lu(G,{state:"proceeding",proceed:void 0,reset:void 0,location:I}),Z.then(()=>e.history.go(W))},reset(){let re=new Map(v.blockers);re.set(G,Va),Ue({blockers:re})}});return}return un(A,I)}),r){tk(t,C);let A=()=>rk(t,C);t.addEventListener("pagehide",A),U=()=>t.removeEventListener("pagehide",A)}return v.initialized||un("POP",v.location,{initialHydration:!0}),L}function nt(){f&&f(),U&&U(),h.clear(),M&&M.abort(),v.fetchers.forEach((A,I)=>Jd(I)),v.blockers.forEach((A,I)=>f0(I))}function an(A){return h.add(A),()=>h.delete(A)}function Ue(A,I={}){A.matches&&(A.matches=A.matches.map(Z=>{let re=s[Z.route.id],ne=Z.route;return ne.element!==re.element||ne.errorElement!==re.errorElement||ne.hydrateFallbackElement!==re.hydrateFallbackElement?{...Z,route:re}:Z})),v={...v,...A};let W=[],G=[];v.fetchers.forEach((Z,re)=>{Z.state==="idle"&&(ee.has(re)?W.push(re):G.push(re))}),ee.forEach(Z=>{!v.fetchers.has(Z)&&!N.has(Z)&&W.push(Z)}),[...h].forEach(Z=>Z(v,{deletedFetchers:W,viewTransitionOpts:I.viewTransitionOpts,flushSync:I.flushSync===!0})),W.forEach(Z=>Jd(Z)),G.forEach(Z=>v.fetchers.delete(Z))}function yr(A,I,{flushSync:W}={}){var ae,ie;let G=v.actionData!=null&&v.navigation.formMethod!=null&&qt(v.navigation.formMethod)&&v.navigation.state==="loading"&&((ae=A.state)==null?void 0:ae._isRedirect)!==!0,Z;I.actionData?Object.keys(I.actionData).length>0?Z=I.actionData:Z=null:G?Z=v.actionData:Z=null;let re=I.loaderData?Dg(v.loaderData,I.loaderData,I.matches||[],I.errors):v.loaderData,ne=v.blockers;ne.size>0&&(ne=new Map(ne),ne.forEach((de,Fe)=>ne.set(Fe,Va)));let J=B?!1:m0(A,I.matches||v.matches),se=O===!0||v.navigation.formMethod!=null&&qt(v.navigation.formMethod)&&((ie=A.state)==null?void 0:ie._isRedirect)!==!0;a&&(o=a,a=void 0),B||F==="POP"||(F==="PUSH"?e.history.push(A,A.state):F==="REPLACE"&&e.history.replace(A,A.state));let ue;if(F==="POP"){let de=C.get(v.location.pathname);de&&de.has(A.pathname)?ue={currentLocation:v.location,nextLocation:A}:C.has(A.pathname)&&(ue={currentLocation:A,nextLocation:v.location})}else if(k){let de=C.get(v.location.pathname);de?de.add(A.pathname):(de=new Set([A.pathname]),C.set(v.location.pathname,de)),ue={currentLocation:v.location,nextLocation:A}}Ue({...I,actionData:Z,loaderData:re,historyAction:F,location:A,initialized:!0,navigation:Tf,revalidation:"idle",restoreScrollPosition:J,preventScrollReset:se,blockers:ne},{viewTransitionOpts:ue,flushSync:W===!0}),F="POP",O=!1,k=!1,B=!1,$=!1,le==null||le.resolve(),le=null}async function ln(A,I){if(typeof A=="number"){e.history.go(A);return}let W=$h(v.location,v.matches,l,A,I==null?void 0:I.fromRouteId,I==null?void 0:I.relative),{path:G,submission:Z,error:re}=Ag(!1,W,I),ne=v.location,J=Tl(v.location,G,I&&I.state);J={...J,...e.history.encodeLocation(J)};let se=I&&I.replace!=null?I.replace:void 0,ue="PUSH";se===!0?ue="REPLACE":se===!1||Z!=null&&qt(Z.formMethod)&&Z.formAction===v.location.pathname+v.location.search&&(ue="REPLACE");let ae=I&&"preventScrollReset"in I?I.preventScrollReset===!0:void 0,ie=(I&&I.flushSync)===!0,de=h0({currentLocation:ne,nextLocation:J,historyAction:ue});if(de){Lu(de,{state:"blocked",location:J,proceed(){Lu(de,{state:"proceeding",proceed:void 0,reset:void 0,location:J}),ln(A,I)},reset(){let Fe=new Map(v.blockers);Fe.set(de,Va),Ue({blockers:Fe})}});return}await un(ue,J,{submission:Z,pendingError:re,preventScrollReset:ae,replace:I&&I.replace,enableViewTransition:I&&I.viewTransition,flushSync:ie})}function as(){le||(le=nk()),Xd(),Ue({revalidation:"loading"});let A=le.promise;return v.navigation.state==="submitting"?A:v.navigation.state==="idle"?(un(v.historyAction,v.location,{startUninterruptedRevalidation:!0}),A):(un(F||v.historyAction,v.navigation.location,{overrideNavigation:v.navigation,enableViewTransition:k===!0}),A)}async function un(A,I,W){M&&M.abort(),M=null,F=A,B=(W&&W.startUninterruptedRevalidation)===!0,CE(v.location,v.matches),O=(W&&W.preventScrollReset)===!0,k=(W&&W.enableViewTransition)===!0;let G=a||o,Z=W&&W.overrideNavigation,re=W!=null&&W.initialHydration&&v.matches&&v.matches.length>0&&!g?v.matches:Li(G,I,l),ne=(W&&W.flushSync)===!0;if(re&&v.initialized&&!$&&Y2(v.location,I)&&!(W&&W.submission&&qt(W.submission.formMethod))){yr(I,{matches:re},{flushSync:ne});return}let J=ju(re,G,I.pathname);if(J.active&&J.matches&&(re=J.matches),!re){let{error:_t,notFoundMatches:$e,route:je}=ef(I.pathname);yr(I,{matches:$e,loaderData:{},errors:{[je.id]:_t}},{flushSync:ne});return}M=new AbortController;let se=ho(e.history,I,M.signal,W&&W.submission),ue=new jg(e.unstable_getContext?await e.unstable_getContext():void 0),ae;if(W&&W.pendingError)ae=[gs(re).route.id,{type:"error",error:W.pendingError}];else if(W&&W.submission&&qt(W.submission.formMethod)){let _t=await Ru(se,I,W.submission,re,ue,J.active,W&&W.initialHydration===!0,{replace:W.replace,flushSync:ne});if(_t.shortCircuited)return;if(_t.pendingActionResult){let[$e,je]=_t.pendingActionResult;if(dr(je)&&Ul(je.error)&&je.error.status===404){M=null,yr(I,{matches:_t.matches,loaderData:{},errors:{[$e]:je.error}});return}}re=_t.matches||re,ae=_t.pendingActionResult,Z=Pf(I,W.submission),ne=!1,J.active=!1,se=ho(e.history,se.url,se.signal)}let{shortCircuited:ie,matches:de,loaderData:Fe,errors:xt}=await yE(se,I,re,ue,J.active,Z,W&&W.submission,W&&W.fetcherSubmission,W&&W.replace,W&&W.initialHydration===!0,ne,ae);ie||(M=null,yr(I,{matches:de||re,...zg(ae),loaderData:Fe,errors:xt}))}async function Ru(A,I,W,G,Z,re,ne,J={}){Xd();let se=J2(I,W);if(Ue({navigation:se},{flushSync:J.flushSync===!0}),re){let ie=await _u(G,I.pathname,A.signal);if(ie.type==="aborted")return{shortCircuited:!0};if(ie.type==="error"){let de=gs(ie.partialMatches).route.id;return{matches:ie.partialMatches,pendingActionResult:[de,{type:"error",error:ie.error}]}}else if(ie.matches)G=ie.matches;else{let{notFoundMatches:de,error:Fe,route:xt}=ef(I.pathname);return{matches:de,pendingActionResult:[xt.id,{type:"error",error:Fe}]}}}let ue,ae=Ec(G,I);if(!ae.route.action&&!ae.route.lazy)ue={type:"error",error:br(405,{method:A.method,pathname:I.pathname,routeId:ae.route.id})};else{let ie=Io(i,s,A,G,ae,ne?[]:n,Z),de=await Pa(A,ie,Z,null);if(ue=de[ae.route.id],!ue){for(let Fe of G)if(de[Fe.route.id]){ue=de[Fe.route.id];break}}if(A.signal.aborted)return{shortCircuited:!0}}if(bs(ue)){let ie;return J&&J.replace!=null?ie=J.replace:ie=Bg(ue.response.headers.get("Location"),new URL(A.url),l)===v.location.pathname+v.location.search,await ls(A,ue,!0,{submission:W,replace:ie}),{shortCircuited:!0}}if(dr(ue)){let ie=gs(G,ae.route.id);return(J&&J.replace)!==!0&&(F="PUSH"),{matches:G,pendingActionResult:[ie.route.id,ue,ae.route.id]}}return{matches:G,pendingActionResult:[ae.route.id,ue]}}async function yE(A,I,W,G,Z,re,ne,J,se,ue,ae,ie){let de=re||Pf(I,ne),Fe=ne||J||Wg(de),xt=!B&&!ue;if(Z){if(xt){let Et=o0(ie);Ue({navigation:de,...Et!==void 0?{actionData:Et}:{}},{flushSync:ae})}let Ne=await _u(W,I.pathname,A.signal);if(Ne.type==="aborted")return{shortCircuited:!0};if(Ne.type==="error"){let Et=gs(Ne.partialMatches).route.id;return{matches:Ne.partialMatches,loaderData:{},errors:{[Et]:Ne.error}}}else if(Ne.matches)W=Ne.matches;else{let{error:Et,notFoundMatches:Pu,route:Ma}=ef(I.pathname);return{matches:Pu,loaderData:{},errors:{[Ma.id]:Et}}}}let _t=a||o,{dsMatches:$e,revalidatingFetchers:je}=Tg(A,G,i,s,e.history,v,W,Fe,I,ue?[]:n,ue===!0,$,D,ee,V,q,_t,l,e.patchRoutesOnNavigation!=null,ie);if(_=++j,!e.dataStrategy&&!$e.some(Ne=>Ne.shouldLoad)&&je.length===0){let Ne=c0();return yr(I,{matches:W,loaderData:{},errors:ie&&dr(ie[1])?{[ie[0]]:ie[1].error}:null,...zg(ie),...Ne?{fetchers:new Map(v.fetchers)}:{}},{flushSync:ae}),{shortCircuited:!0}}if(xt){let Ne={};if(!Z){Ne.navigation=de;let Et=o0(ie);Et!==void 0&&(Ne.actionData=Et)}je.length>0&&(Ne.fetchers=wE(je)),Ue(Ne,{flushSync:ae})}je.forEach(Ne=>{ci(Ne.key),Ne.controller&&N.set(Ne.key,Ne.controller)});let us=()=>je.forEach(Ne=>ci(Ne.key));M&&M.signal.addEventListener("abort",us);let{loaderResults:Ua,fetcherResults:di}=await a0($e,je,A,G);if(A.signal.aborted)return{shortCircuited:!0};M&&M.signal.removeEventListener("abort",us),je.forEach(Ne=>N.delete(Ne.key));let cn=Xu(Ua);if(cn)return await ls(A,cn.result,!0,{replace:se}),{shortCircuited:!0};if(cn=Xu(di),cn)return q.add(cn.key),await ls(A,cn.result,!0,{replace:se}),{shortCircuited:!0};let{loaderData:tf,errors:Fa}=Ig(v,W,Ua,ie,je,di);ue&&v.errors&&(Fa={...v.errors,...Fa});let cs=c0(),Au=d0(_),Tu=cs||Au||je.length>0;return{matches:W,loaderData:tf,errors:Fa,...Tu?{fetchers:new Map(v.fetchers)}:{}}}function o0(A){if(A&&!dr(A[1]))return{[A[0]]:A[1].data};if(v.actionData)return Object.keys(v.actionData).length===0?null:v.actionData}function wE(A){return A.forEach(I=>{let W=v.fetchers.get(I.key),G=qa(void 0,W?W.data:void 0);v.fetchers.set(I.key,G)}),new Map(v.fetchers)}async function vE(A,I,W,G){ci(A);let Z=(G&&G.flushSync)===!0,re=a||o,ne=$h(v.location,v.matches,l,W,I,G==null?void 0:G.relative),J=Li(re,ne,l),se=ju(J,re,ne);if(se.active&&se.matches&&(J=se.matches),!J){Tn(A,I,br(404,{pathname:ne}),{flushSync:Z});return}let{path:ue,submission:ae,error:ie}=Ag(!0,ne,G);if(ie){Tn(A,I,ie,{flushSync:Z});return}let de=new jg(e.unstable_getContext?await e.unstable_getContext():void 0),Fe=(G&&G.preventScrollReset)===!0;if(ae&&qt(ae.formMethod)){await xE(A,I,ue,J,de,se.active,Z,Fe,ae);return}V.set(A,{routeId:I,path:ue}),await EE(A,I,ue,J,de,se.active,Z,Fe,ae)}async function xE(A,I,W,G,Z,re,ne,J,se){Xd(),V.delete(A);let ue=v.fetchers.get(A);ui(A,ek(se,ue),{flushSync:ne});let ae=new AbortController,ie=ho(e.history,W,ae.signal,se);if(re){let Ze=await _u(G,new URL(ie.url).pathname,ie.signal,A);if(Ze.type==="aborted")return;if(Ze.type==="error"){Tn(A,I,Ze.error,{flushSync:ne});return}else if(Ze.matches)G=Ze.matches;else{Tn(A,I,br(404,{pathname:W}),{flushSync:ne});return}}let de=Ec(G,W);if(!de.route.action&&!de.route.lazy){let Ze=br(405,{method:se.formMethod,pathname:W,routeId:I});Tn(A,I,Ze,{flushSync:ne});return}N.set(A,ae);let Fe=j,xt=Io(i,s,ie,G,de,n,Z),$e=(await Pa(ie,xt,Z,A))[de.route.id];if(ie.signal.aborted){N.get(A)===ae&&N.delete(A);return}if(ee.has(A)){if(bs($e)||dr($e)){ui(A,yi(void 0));return}}else{if(bs($e))if(N.delete(A),_>Fe){ui(A,yi(void 0));return}else return q.add(A),ui(A,qa(se)),ls(ie,$e,!1,{fetcherSubmission:se,preventScrollReset:J});if(dr($e)){Tn(A,I,$e.error);return}}let je=v.navigation.location||v.location,us=ho(e.history,je,ae.signal),Ua=a||o,di=v.navigation.state!=="idle"?Li(Ua,v.navigation.location,l):v.matches;me(di,"Didn't find any matches after fetcher action");let cn=++j;H.set(A,cn);let tf=qa(se,$e.data);v.fetchers.set(A,tf);let{dsMatches:Fa,revalidatingFetchers:cs}=Tg(us,Z,i,s,e.history,v,di,se,je,n,!1,$,D,ee,V,q,Ua,l,e.patchRoutesOnNavigation!=null,[de.route.id,$e]);cs.filter(Ze=>Ze.key!==A).forEach(Ze=>{let Uu=Ze.key,g0=v.fetchers.get(Uu),LE=qa(void 0,g0?g0.data:void 0);v.fetchers.set(Uu,LE),ci(Uu),Ze.controller&&N.set(Uu,Ze.controller)}),Ue({fetchers:new Map(v.fetchers)});let Au=()=>cs.forEach(Ze=>ci(Ze.key));ae.signal.addEventListener("abort",Au);let{loaderResults:Tu,fetcherResults:Ne}=await a0(Fa,cs,us,Z);if(ae.signal.aborted)return;if(ae.signal.removeEventListener("abort",Au),H.delete(A),N.delete(A),cs.forEach(Ze=>N.delete(Ze.key)),v.fetchers.has(A)){let Ze=yi($e.data);v.fetchers.set(A,Ze)}let Et=Xu(Tu);if(Et)return ls(us,Et.result,!1,{preventScrollReset:J});if(Et=Xu(Ne),Et)return q.add(Et.key),ls(us,Et.result,!1,{preventScrollReset:J});let{loaderData:Pu,errors:Ma}=Ig(v,di,Tu,void 0,cs,Ne);d0(cn),v.navigation.state==="loading"&&cn>_?(me(F,"Expected pending action"),M&&M.abort(),yr(v.navigation.location,{matches:di,loaderData:Pu,errors:Ma,fetchers:new Map(v.fetchers)})):(Ue({errors:Ma,loaderData:Dg(v.loaderData,Pu,di,Ma),fetchers:new Map(v.fetchers)}),$=!1)}async function EE(A,I,W,G,Z,re,ne,J,se){let ue=v.fetchers.get(A);ui(A,qa(se,ue?ue.data:void 0),{flushSync:ne});let ae=new AbortController,ie=ho(e.history,W,ae.signal);if(re){let je=await _u(G,new URL(ie.url).pathname,ie.signal,A);if(je.type==="aborted")return;if(je.type==="error"){Tn(A,I,je.error,{flushSync:ne});return}else if(je.matches)G=je.matches;else{Tn(A,I,br(404,{pathname:W}),{flushSync:ne});return}}let de=Ec(G,W);N.set(A,ae);let Fe=j,xt=Io(i,s,ie,G,de,n,Z),$e=(await Pa(ie,xt,Z,A))[de.route.id];if(N.get(A)===ae&&N.delete(A),!ie.signal.aborted){if(ee.has(A)){ui(A,yi(void 0));return}if(bs($e))if(_>Fe){ui(A,yi(void 0));return}else{q.add(A),await ls(ie,$e,!1,{preventScrollReset:J});return}if(dr($e)){Tn(A,I,$e.error);return}ui(A,yi($e.data))}}async function ls(A,I,W,{submission:G,fetcherSubmission:Z,preventScrollReset:re,replace:ne}={}){I.response.headers.has("X-Remix-Revalidate")&&($=!0);let J=I.response.headers.get("Location");me(J,"Expected a Location header on the redirect Response"),J=Bg(J,new URL(A.url),l);let se=Tl(v.location,J,{_isRedirect:!0});if(r){let xt=!1;if(I.response.headers.has("X-Remix-Reload-Document"))xt=!0;else if(Pm(J)){const _t=rx(J,!0);xt=_t.origin!==t.location.origin||Pr(_t.pathname,l)==null}if(xt){ne?t.location.replace(J):t.location.assign(J);return}}M=null;let ue=ne===!0||I.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:ae,formAction:ie,formEncType:de}=v.navigation;!G&&!Z&&ae&&ie&&de&&(G=Wg(v.navigation));let Fe=G||Z;if(F2.has(I.response.status)&&Fe&&qt(Fe.formMethod))await un(ue,se,{submission:{...Fe,formAction:J},preventScrollReset:re||O,enableViewTransition:W?k:void 0});else{let xt=Pf(se,G);await un(ue,se,{overrideNavigation:xt,fetcherSubmission:Z,preventScrollReset:re||O,enableViewTransition:W?k:void 0})}}async function Pa(A,I,W,G){let Z,re={};try{Z=await V2(u,A,I,G,W,!1)}catch(ne){return I.filter(J=>J.shouldLoad).forEach(J=>{re[J.route.id]={type:"error",error:ne}}),re}if(A.signal.aborted)return re;for(let[ne,J]of Object.entries(Z))if(Z2(J)){let se=J.result;re[ne]={type:"redirect",response:G2(se,A,ne,I,l)}}else re[ne]=await K2(J);return re}async function a0(A,I,W,G){let Z=Pa(W,A,G,null),re=Promise.all(I.map(async se=>{if(se.matches&&se.match&&se.request&&se.controller){let ae=(await Pa(se.request,se.matches,G,se.key))[se.match.route.id];return{[se.key]:ae}}else return Promise.resolve({[se.key]:{type:"error",error:br(404,{pathname:se.path})}})})),ne=await Z,J=(await re).reduce((se,ue)=>Object.assign(se,ue),{});return{loaderResults:ne,fetcherResults:J}}function Xd(){$=!0,V.forEach((A,I)=>{N.has(I)&&D.add(I),ci(I)})}function ui(A,I,W={}){v.fetchers.set(A,I),Ue({fetchers:new Map(v.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function Tn(A,I,W,G={}){let Z=gs(v.matches,I);Jd(A),Ue({errors:{[Z.route.id]:W},fetchers:new Map(v.fetchers)},{flushSync:(G&&G.flushSync)===!0})}function l0(A){return K.set(A,(K.get(A)||0)+1),ee.has(A)&&ee.delete(A),v.fetchers.get(A)||M2}function Jd(A){let I=v.fetchers.get(A);N.has(A)&&!(I&&I.state==="loading"&&H.has(A))&&ci(A),V.delete(A),H.delete(A),q.delete(A),ee.delete(A),D.delete(A),v.fetchers.delete(A)}function SE(A){let I=(K.get(A)||0)-1;I<=0?(K.delete(A),ee.add(A)):K.set(A,I),Ue({fetchers:new Map(v.fetchers)})}function ci(A){let I=N.get(A);I&&(I.abort(),N.delete(A))}function u0(A){for(let I of A){let W=l0(I),G=yi(W.data);v.fetchers.set(I,G)}}function c0(){let A=[],I=!1;for(let W of q){let G=v.fetchers.get(W);me(G,`Expected fetcher: ${W}`),G.state==="loading"&&(q.delete(W),A.push(W),I=!0)}return u0(A),I}function d0(A){let I=[];for(let[W,G]of H)if(G<A){let Z=v.fetchers.get(W);me(Z,`Expected fetcher: ${W}`),Z.state==="loading"&&(ci(W),H.delete(W),I.push(W))}return u0(I),I.length>0}function bE(A,I){let W=v.blockers.get(A)||Va;return oe.get(A)!==I&&oe.set(A,I),W}function f0(A){v.blockers.delete(A),oe.delete(A)}function Lu(A,I){let W=v.blockers.get(A)||Va;me(W.state==="unblocked"&&I.state==="blocked"||W.state==="blocked"&&I.state==="blocked"||W.state==="blocked"&&I.state==="proceeding"||W.state==="blocked"&&I.state==="unblocked"||W.state==="proceeding"&&I.state==="unblocked",`Invalid blocker state transition: ${W.state} -> ${I.state}`);let G=new Map(v.blockers);G.set(A,I),Ue({blockers:G})}function h0({currentLocation:A,nextLocation:I,historyAction:W}){if(oe.size===0)return;oe.size>1&&Ve(!1,"A router only supports one blocker at a time");let G=Array.from(oe.entries()),[Z,re]=G[G.length-1],ne=v.blockers.get(Z);if(!(ne&&ne.state==="proceeding")&&re({currentLocation:A,nextLocation:I,historyAction:W}))return Z}function ef(A){let I=br(404,{pathname:A}),W=a||o,{matches:G,route:Z}=$g(W);return{notFoundMatches:G,route:Z,error:I}}function kE(A,I,W){if(w=A,S=I,E=W||null,!x&&v.navigation===Tf){x=!0;let G=m0(v.location,v.matches);G!=null&&Ue({restoreScrollPosition:G})}return()=>{w=null,S=null,E=null}}function p0(A,I){return E&&E(A,I.map(G=>f2(G,v.loaderData)))||A.key}function CE(A,I){if(w&&S){let W=p0(A,I);w[W]=S()}}function m0(A,I){if(w){let W=p0(A,I),G=w[W];if(typeof G=="number")return G}return null}function ju(A,I,W){if(e.patchRoutesOnNavigation)if(A){if(Object.keys(A[0].params).length>0)return{active:!0,matches:xc(I,W,l,!0)}}else return{active:!0,matches:xc(I,W,l,!0)||[]};return{active:!1,matches:null}}async function _u(A,I,W,G){if(!e.patchRoutesOnNavigation)return{type:"success",matches:A};let Z=A;for(;;){let re=a==null,ne=a||o,J=s;try{await e.patchRoutesOnNavigation({signal:W,path:I,matches:Z,fetcherKey:G,patch:(ae,ie)=>{W.aborted||Pg(ae,ie,ne,J,i,!1)}})}catch(ae){return{type:"error",error:ae,partialMatches:Z}}finally{re&&!W.aborted&&(o=[...o])}if(W.aborted)return{type:"aborted"};let se=Li(ne,I,l);if(se)return{type:"success",matches:se};let ue=xc(ne,I,l,!0);if(!ue||Z.length===ue.length&&Z.every((ae,ie)=>ae.route.id===ue[ie].route.id))return{type:"success",matches:null};Z=ue}}function NE(A){s={},a=Pl(A,i,void 0,s)}function RE(A,I,W=!1){let G=a==null;Pg(A,I,a||o,s,i,W),G&&(o=[...o],Ue({}))}return L={get basename(){return l},get future(){return d},get state(){return v},get routes(){return o},get window(){return t},initialize:be,subscribe:an,enableScrollRestoration:kE,navigate:ln,fetch:vE,revalidate:as,createHref:A=>e.history.createHref(A),encodeLocation:A=>e.history.encodeLocation(A),getFetcher:l0,deleteFetcher:SE,dispose:nt,getBlocker:bE,deleteBlocker:f0,patchRoutes:RE,_internalFetchControllers:N,_internalSetRoutes:NE,_internalSetStateDoNotUseOrYouWillBreakYourApp(A){Ue(A)}},L}function D2(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function $h(e,t,r,n,i,s){let o,a;if(i){o=[];for(let u of t)if(o.push(u),u.route.id===i){a=u;break}}else o=t,a=t[t.length-1];let l=$d(n||".",zd(o),Pr(e.pathname,r)||e.pathname,s==="path");if(n==null&&(l.search=e.search,l.hash=e.hash),(n==null||n===""||n===".")&&a){let u=Um(l.search);if(a.route.index&&!u)l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index";else if(!a.route.index&&u){let d=new URLSearchParams(l.search),f=d.getAll("index");d.delete("index"),f.filter(w=>w).forEach(w=>d.append("index",w));let h=d.toString();l.search=h?`?${h}`:""}}return r!=="/"&&(l.pathname=C2({basename:r,pathname:l.pathname})),Xi(l)}function Ag(e,t,r){if(!r||!D2(r))return{path:t};if(r.formMethod&&!X2(r.formMethod))return{path:t,error:br(405,{method:r.formMethod})};let n=()=>({path:t,error:br(400,{type:"invalid-body"})}),s=(r.formMethod||"get").toUpperCase(),o=px(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!qt(s))return n();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((h,[w,E])=>`${h}${w}=${E}
`,""):String(r.body);return{path:t,submission:{formMethod:s,formAction:o,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!qt(s))return n();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:s,formAction:o,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return n()}}}me(typeof FormData=="function","FormData is not available in this environment");let a,l;if(r.formData)a=Vh(r.formData),l=r.formData;else if(r.body instanceof FormData)a=Vh(r.body),l=r.body;else if(r.body instanceof URLSearchParams)a=r.body,l=Og(a);else if(r.body==null)a=new URLSearchParams,l=new FormData;else try{a=new URLSearchParams(r.body),l=Og(a)}catch{return n()}let u={formMethod:s,formAction:o,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(qt(u.formMethod))return{path:t,submission:u};let d=os(t);return e&&d.search&&Um(d.search)&&a.append("index",""),d.search=`?${a}`,{path:Xi(d),submission:u}}function Tg(e,t,r,n,i,s,o,a,l,u,d,f,h,w,E,S,x,p,g,y){var B;let b=y?dr(y[1])?y[1].error:y[1].data:void 0,L=i.createURL(s.location),v=i.createURL(l),F;if(d&&s.errors){let $=Object.keys(s.errors)[0];F=o.findIndex(D=>D.route.id===$)}else if(y&&dr(y[1])){let $=y[0];F=o.findIndex(D=>D.route.id===$)-1}let O=y?y[1].statusCode:void 0,M=O&&O>=400,k={currentUrl:L,currentParams:((B=s.matches[0])==null?void 0:B.params)||{},nextUrl:v,nextParams:o[0].params,...a,actionResult:b,actionStatus:O},C=o.map(($,D)=>{let{route:N}=$,j=null;if(F!=null&&D>F?j=!1:N.lazy?j=!0:N.loader==null?j=!1:d?j=Hh(N,s.loaderData,s.errors):z2(s.loaderData,s.matches[D],$)&&(j=!0),j!==null)return Wh(r,n,e,$,u,t,j);let _=M?!1:f||L.pathname+L.search===v.pathname+v.search||L.search!==v.search||$2(s.matches[D],$),H={...k,defaultShouldRevalidate:_},q=sd($,H);return Wh(r,n,e,$,u,t,q,H)}),U=[];return E.forEach(($,D)=>{if(d||!o.some(ee=>ee.route.id===$.routeId)||w.has(D))return;let N=s.fetchers.get(D),j=N&&N.state!=="idle"&&N.data===void 0,_=Li(x,$.path,p);if(!_){if(g&&j)return;U.push({key:D,routeId:$.routeId,path:$.path,matches:null,match:null,request:null,controller:null});return}if(S.has(D))return;let H=Ec(_,$.path),q=new AbortController,V=ho(i,$.path,q.signal),K=null;if(h.has(D))h.delete(D),K=Io(r,n,V,_,H,u,t);else if(j)f&&(K=Io(r,n,V,_,H,u,t));else{let ee={...k,defaultShouldRevalidate:M?!1:f};sd(H,ee)&&(K=Io(r,n,V,_,H,u,t,ee))}K&&U.push({key:D,routeId:$.routeId,path:$.path,matches:K,match:H,request:V,controller:q})}),{dsMatches:C,revalidatingFetchers:U}}function Hh(e,t,r){if(e.lazy)return!0;if(!e.loader)return!1;let n=t!=null&&e.id in t,i=r!=null&&r[e.id]!==void 0;return!n&&i?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!n&&!i}function z2(e,t,r){let n=!t||r.route.id!==t.route.id,i=!e.hasOwnProperty(r.route.id);return n||i}function $2(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function sd(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}function Pg(e,t,r,n,i,s){let o;if(e){let u=n[e];me(u,`No route found to patch children into: routeId = ${e}`),u.children||(u.children=[]),o=u.children}else o=r;let a=[],l=[];if(t.forEach(u=>{let d=o.find(f=>ux(u,f));d?l.push({existingRoute:d,newRoute:u}):a.push(u)}),a.length>0){let u=Pl(a,i,[e||"_","patch",String((o==null?void 0:o.length)||"0")],n);o.push(...u)}if(s&&l.length>0)for(let u=0;u<l.length;u++){let{existingRoute:d,newRoute:f}=l[u],h=d,[w]=Pl([f],i,[],{},!0);Object.assign(h,{element:w.element?w.element:h.element,errorElement:w.errorElement?w.errorElement:h.errorElement,hydrateFallbackElement:w.hydrateFallbackElement?w.hydrateFallbackElement:h.hydrateFallbackElement})}}function ux(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((r,n)=>{var i;return(i=t.children)==null?void 0:i.some(s=>ux(r,s))}):!1}var Ug=new WeakMap,cx=({key:e,route:t,manifest:r,mapRouteProperties:n})=>{let i=r[t.id];if(me(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let s=i.lazy[e];if(!s)return;let o=Ug.get(i);o||(o={},Ug.set(i,o));let a=o[e];if(a)return a;let l=(async()=>{let u=l2(e),f=i[e]!==void 0&&e!=="hasErrorBoundary";if(u)Ve(!u,"Route property "+e+" is not a supported lazy route property. This property will be ignored."),o[e]=Promise.resolve();else if(f)Ve(!1,`Route "${i.id}" has a static property "${e}" defined. The lazy property will be ignored.`);else{let h=await s();h!=null&&(Object.assign(i,{[e]:h}),Object.assign(i,n(i)))}typeof i.lazy=="object"&&(i.lazy[e]=void 0,Object.values(i.lazy).every(h=>h===void 0)&&(i.lazy=void 0))})();return o[e]=l,l},Fg=new WeakMap;function H2(e,t,r,n,i){let s=r[e.id];if(me(s,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof e.lazy=="function"){let d=Fg.get(s);if(d)return{lazyRoutePromise:d,lazyHandlerPromise:d};let f=(async()=>{me(typeof e.lazy=="function","No lazy route function found");let h=await e.lazy(),w={};for(let E in h){let S=h[E];if(S===void 0)continue;let x=c2(E),g=s[E]!==void 0&&E!=="hasErrorBoundary";x?Ve(!x,"Route property "+E+" is not a supported property to be returned from a lazy route function. This property will be ignored."):g?Ve(!g,`Route "${s.id}" has a static property "${E}" defined but its lazy function is also returning a value for this property. The lazy route property "${E}" will be ignored.`):w[E]=S}Object.assign(s,w),Object.assign(s,{...n(s),lazy:void 0})})();return Fg.set(s,f),f.catch(()=>{}),{lazyRoutePromise:f,lazyHandlerPromise:f}}let o=Object.keys(e.lazy),a=[],l;for(let d of o){if(i&&i.includes(d))continue;let f=cx({key:d,route:e,manifest:r,mapRouteProperties:n});f&&(a.push(f),d===t&&(l=f))}let u=a.length>0?Promise.all(a).then(()=>{}):void 0;return u==null||u.catch(()=>{}),l==null||l.catch(()=>{}),{lazyRoutePromise:u,lazyHandlerPromise:l}}async function Mg(e){let t=e.matches.filter(i=>i.shouldLoad),r={};return(await Promise.all(t.map(i=>i.resolve()))).forEach((i,s)=>{r[t[s].route.id]=i}),r}async function W2(e){return e.matches.some(t=>t.route.unstable_middleware)?dx(e,!1,()=>Mg(e),(t,r)=>({[r]:{type:"error",result:t}})):Mg(e)}async function dx(e,t,r,n){let{matches:i,request:s,params:o,context:a}=e,l={handlerResult:void 0};try{let u=i.flatMap(f=>f.route.unstable_middleware?f.route.unstable_middleware.map(h=>[f.route.id,h]):[]),d=await fx({request:s,params:o,context:a},u,t,l,r);return t?d:l.handlerResult}catch(u){if(!l.middlewareError)throw u;let d=await n(l.middlewareError.error,l.middlewareError.routeId);return l.handlerResult?Object.assign(l.handlerResult,d):d}}async function fx(e,t,r,n,i,s=0){let{request:o}=e;if(o.signal.aborted)throw o.signal.reason?o.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${o.method} ${o.url}`);let a=t[s];if(!a)return n.handlerResult=await i(),n.handlerResult;let[l,u]=a,d=!1,f,h=async()=>{if(d)throw new Error("You may only call `next()` once per middleware");d=!0,await fx(e,t,r,n,i,s+1)};try{let w=await u({request:e.request,params:e.params,context:e.context},h);return d?w===void 0?f:w:h()}catch(w){throw n.middlewareError?n.middlewareError.error!==w&&(n.middlewareError={routeId:l,error:w}):n.middlewareError={routeId:l,error:w},w}}function hx(e,t,r,n,i){let s=cx({key:"unstable_middleware",route:n.route,manifest:t,mapRouteProperties:e}),o=H2(n.route,qt(r.method)?"action":"loader",t,e,i);return{middleware:s,route:o.lazyRoutePromise,handler:o.lazyHandlerPromise}}function Wh(e,t,r,n,i,s,o,a=null){let l=!1,u=hx(e,t,r,n,i);return{...n,_lazyPromises:u,shouldLoad:o,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler(d){return l=!0,a?typeof d=="boolean"?sd(n,{...a,defaultShouldRevalidate:d}):sd(n,a):o},resolve(d){return l||o||d&&!qt(r.method)&&(n.route.lazy||n.route.loader)?q2({request:r,match:n,lazyHandlerPromise:u==null?void 0:u.handler,lazyRoutePromise:u==null?void 0:u.route,handlerOverride:d,scopedContext:s}):Promise.resolve({type:"data",result:void 0})}}}function Io(e,t,r,n,i,s,o,a=null){return n.map(l=>l.route.id!==i.route.id?{...l,shouldLoad:!1,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler:()=>!1,_lazyPromises:hx(e,t,r,l,s),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Wh(e,t,r,l,s,o,!0,a))}async function V2(e,t,r,n,i,s){r.some(u=>{var d;return(d=u._lazyPromises)==null?void 0:d.middleware})&&await Promise.all(r.map(u=>{var d;return(d=u._lazyPromises)==null?void 0:d.middleware}));let o={request:t,params:r[0].params,context:i,matches:r},l=await e({...o,fetcherKey:n,unstable_runClientMiddleware:u=>{let d=o;return dx(d,!1,()=>u({...d,fetcherKey:n,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(f,h)=>({[h]:{type:"error",result:f}}))}});try{await Promise.all(r.flatMap(u=>{var d,f;return[(d=u._lazyPromises)==null?void 0:d.handler,(f=u._lazyPromises)==null?void 0:f.route]}))}catch{}return l}async function q2({request:e,match:t,lazyHandlerPromise:r,lazyRoutePromise:n,handlerOverride:i,scopedContext:s}){let o,a,l=qt(e.method),u=l?"action":"loader",d=f=>{let h,w=new Promise((x,p)=>h=p);a=()=>h(),e.signal.addEventListener("abort",a);let E=x=>typeof f!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${u}" [routeId: ${t.route.id}]`)):f({request:e,params:t.params,context:s},...x!==void 0?[x]:[]),S=(async()=>{try{return{type:"data",result:await(i?i(p=>E(p)):E())}}catch(x){return{type:"error",result:x}}})();return Promise.race([S,w])};try{let f=l?t.route.action:t.route.loader;if(r||n)if(f){let h,[w]=await Promise.all([d(f).catch(E=>{h=E}),r,n]);if(h!==void 0)throw h;o=w}else{await r;let h=l?t.route.action:t.route.loader;if(h)[o]=await Promise.all([d(h),n]);else if(u==="action"){let w=new URL(e.url),E=w.pathname+w.search;throw br(405,{method:e.method,pathname:E,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(f)o=await d(f);else{let h=new URL(e.url),w=h.pathname+h.search;throw br(404,{pathname:w})}}catch(f){return{type:"error",result:f}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function K2(e){var n,i,s,o,a,l;let{result:t,type:r}=e;if(mx(t)){let u;try{let d=t.headers.get("Content-Type");d&&/\bapplication\/json\b/.test(d)?t.body==null?u=null:u=await t.json():u=await t.text()}catch(d){return{type:"error",error:d}}return r==="error"?{type:"error",error:new id(t.status,t.statusText,u),statusCode:t.status,headers:t.headers}:{type:"data",data:u,statusCode:t.status,headers:t.headers}}return r==="error"?Hg(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:(n=t.init)==null?void 0:n.status,headers:(i=t.init)!=null&&i.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new id(((s=t.init)==null?void 0:s.status)||500,void 0,t.data),statusCode:Ul(t)?t.status:void 0,headers:(o=t.init)!=null&&o.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:Ul(t)?t.status:void 0}:Hg(t)?{type:"data",data:t.data,statusCode:(a=t.init)==null?void 0:a.status,headers:(l=t.init)!=null&&l.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function G2(e,t,r,n,i){let s=e.headers.get("Location");if(me(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!Pm(s)){let o=n.slice(0,n.findIndex(a=>a.route.id===r)+1);s=$h(new URL(t.url),o,i,s),e.headers.set("Location",s)}return e}function Bg(e,t,r){if(Pm(e)){let n=e,i=n.startsWith("//")?new URL(t.protocol+n):new URL(n),s=Pr(i.pathname,r)!=null;if(i.origin===t.origin&&s)return i.pathname+i.search+i.hash}return e}function ho(e,t,r,n){let i=e.createURL(px(t)).toString(),s={signal:r};if(n&&qt(n.formMethod)){let{formMethod:o,formEncType:a}=n;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(n.json)):a==="text/plain"?s.body=n.text:a==="application/x-www-form-urlencoded"&&n.formData?s.body=Vh(n.formData):s.body=n.formData}return new Request(i,s)}function Vh(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function Og(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function Q2(e,t,r,n=!1,i=!1){let s={},o=null,a,l=!1,u={},d=r&&dr(r[1])?r[1].error:void 0;return e.forEach(f=>{if(!(f.route.id in t))return;let h=f.route.id,w=t[h];if(me(!bs(w),"Cannot handle redirect results in processLoaderData"),dr(w)){let E=w.error;if(d!==void 0&&(E=d,d=void 0),o=o||{},i)o[h]=E;else{let S=gs(e,h);o[S.route.id]==null&&(o[S.route.id]=E)}n||(s[h]=lx),l||(l=!0,a=Ul(w.error)?w.error.status:500),w.headers&&(u[h]=w.headers)}else s[h]=w.data,w.statusCode&&w.statusCode!==200&&!l&&(a=w.statusCode),w.headers&&(u[h]=w.headers)}),d!==void 0&&r&&(o={[r[0]]:d},r[2]&&(s[r[2]]=void 0)),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:u}}function Ig(e,t,r,n,i,s){let{loaderData:o,errors:a}=Q2(t,r,n);return i.filter(l=>!l.matches||l.matches.some(u=>u.shouldLoad)).forEach(l=>{let{key:u,match:d,controller:f}=l,h=s[u];if(me(h,"Did not find corresponding fetcher result"),!(f&&f.signal.aborted))if(dr(h)){let w=gs(e.matches,d==null?void 0:d.route.id);a&&a[w.route.id]||(a={...a,[w.route.id]:h.error}),e.fetchers.delete(u)}else if(bs(h))me(!1,"Unhandled fetcher revalidation redirect");else{let w=yi(h.data);e.fetchers.set(u,w)}}),{loaderData:o,errors:a}}function Dg(e,t,r,n){let i=Object.entries(t).filter(([,s])=>s!==lx).reduce((s,[o,a])=>(s[o]=a,s),{});for(let s of r){let o=s.route.id;if(!t.hasOwnProperty(o)&&e.hasOwnProperty(o)&&s.route.loader&&(i[o]=e[o]),n&&n.hasOwnProperty(o))break}return i}function zg(e){return e?dr(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function gs(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function $g(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function br(e,{pathname:t,routeId:r,method:n,type:i,message:s}={}){let o="Unknown Server Error",a="Unknown @remix-run/router error";return e===400?(o="Bad Request",n&&t&&r?a=`You made a ${n} request to "${t}" but did not provide a \`loader\` for route "${r}", so there is no way to handle the request.`:i==="invalid-body"&&(a="Unable to encode submission body")):e===403?(o="Forbidden",a=`Route "${r}" does not match URL "${t}"`):e===404?(o="Not Found",a=`No route matches URL "${t}"`):e===405&&(o="Method Not Allowed",n&&t&&r?a=`You made a ${n.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${r}", so there is no way to handle the request.`:n&&(a=`Invalid request method "${n.toUpperCase()}"`)),new id(e||500,o,new Error(a),!0)}function Xu(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[n,i]=t[r];if(bs(i))return{key:n,result:i}}}function px(e){let t=typeof e=="string"?os(e):e;return Xi({...t,hash:""})}function Y2(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Z2(e){return mx(e.result)&&U2.has(e.result.status)}function dr(e){return e.type==="error"}function bs(e){return(e&&e.type)==="redirect"}function Hg(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function mx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function X2(e){return P2.has(e.toUpperCase())}function qt(e){return A2.has(e.toUpperCase())}function Um(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Ec(e,t){let r=typeof t=="string"?os(t).search:t.search;if(e[e.length-1].route.index&&Um(r||""))return e[e.length-1];let n=sx(e);return n[n.length-1]}function Wg(e){let{formMethod:t,formAction:r,formEncType:n,text:i,formData:s,json:o}=e;if(!(!t||!r||!n)){if(i!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:t,formAction:r,formEncType:n,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:o,text:void 0}}}function Pf(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function J2(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function qa(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function ek(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function yi(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function tk(e,t){try{let r=e.sessionStorage.getItem(ax);if(r){let n=JSON.parse(r);for(let[i,s]of Object.entries(n||{}))s&&Array.isArray(s)&&t.set(i,new Set(s||[]))}}catch{}}function rk(e,t){if(t.size>0){let r={};for(let[n,i]of t)r[n]=[...i];try{e.sessionStorage.setItem(ax,JSON.stringify(r))}catch(n){Ve(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function nk(){let e,t,r=new Promise((n,i)=>{e=async s=>{n(s);try{await r}catch{}},t=async s=>{i(s);try{await r}catch{}}});return{promise:r,resolve:e,reject:t}}var to=P.createContext(null);to.displayName="DataRouter";var mu=P.createContext(null);mu.displayName="DataRouterState";P.createContext(!1);var Fm=P.createContext({isTransitioning:!1});Fm.displayName="ViewTransition";var gx=P.createContext(new Map);gx.displayName="Fetchers";var ik=P.createContext(null);ik.displayName="Await";var sn=P.createContext(null);sn.displayName="Navigation";var Hd=P.createContext(null);Hd.displayName="Location";var Ur=P.createContext({outlet:null,matches:[],isDataRoute:!1});Ur.displayName="Route";var Mm=P.createContext(null);Mm.displayName="RouteError";function sk(e,{relative:t}={}){me(_a(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=P.useContext(sn),{hash:i,pathname:s,search:o}=gu(e,{relative:t}),a=s;return r!=="/"&&(a=s==="/"?r:Ln([r,s])),n.createHref({pathname:a,search:o,hash:i})}function _a(){return P.useContext(Hd)!=null}function li(){return me(_a(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Hd).location}var yx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wx(e){P.useContext(sn).static||P.useLayoutEffect(e)}function vx(){let{isDataRoute:e}=P.useContext(Ur);return e?Ek():ok()}function ok(){me(_a(),"useNavigate() may be used only in the context of a <Router> component.");let e=P.useContext(to),{basename:t,navigator:r}=P.useContext(sn),{matches:n}=P.useContext(Ur),{pathname:i}=li(),s=JSON.stringify(zd(n)),o=P.useRef(!1);return wx(()=>{o.current=!0}),P.useCallback((l,u={})=>{if(Ve(o.current,yx),!o.current)return;if(typeof l=="number"){r.go(l);return}let d=$d(l,JSON.parse(s),i,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Ln([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,s,i,e])}var ak=P.createContext(null);function lk(e){let t=P.useContext(Ur).outlet;return t&&P.createElement(ak.Provider,{value:e},t)}function uk(){let{matches:e}=P.useContext(Ur),t=e[e.length-1];return t?t.params:{}}function gu(e,{relative:t}={}){let{matches:r}=P.useContext(Ur),{pathname:n}=li(),i=JSON.stringify(zd(r));return P.useMemo(()=>$d(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function ck(e,t,r,n){me(_a(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=P.useContext(sn),{matches:s}=P.useContext(Ur),o=s[s.length-1],a=o?o.params:{},l=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let p=d&&d.path||"";xx(l,!d||p.endsWith("*")||p.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${p}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${p}"> to <Route path="${p==="/"?"*":`${p}/*`}">.`)}let f=li(),h;h=f;let w=h.pathname||"/",E=w;if(u!=="/"){let p=u.replace(/^\//,"").split("/");E="/"+w.replace(/^\//,"").split("/").slice(p.length).join("/")}let S=Li(e,{pathname:E});return Ve(d||S!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Ve(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),mk(S&&S.map(p=>Object.assign({},p,{params:Object.assign({},a,p.params),pathname:Ln([u,i.encodeLocation?i.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?u:Ln([u,i.encodeLocation?i.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),s,r,n)}function dk(){let e=xk(),t=Ul(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:s},"ErrorBoundary")," or"," ",P.createElement("code",{style:s},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),r?P.createElement("pre",{style:i},r):null,o)}var fk=P.createElement(dk,null),hk=class extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?P.createElement(Ur.Provider,{value:this.props.routeContext},P.createElement(Mm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function pk({routeContext:e,match:t,children:r}){let n=P.useContext(to);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(Ur.Provider,{value:e},r)}function mk(e,t=[],r=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,s=r==null?void 0:r.errors;if(s!=null){let l=i.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);me(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,a=-1;if(r)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:d,errors:f}=r,h=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,d)=>{let f,h=!1,w=null,E=null;r&&(f=s&&u.route.id?s[u.route.id]:void 0,w=u.route.errorElement||fk,o&&(a<0&&d===0?(xx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,E=null):a===d&&(h=!0,E=u.route.hydrateFallbackElement||null)));let S=t.concat(i.slice(0,d+1)),x=()=>{let p;return f?p=w:h?p=E:u.route.Component?p=P.createElement(u.route.Component,null):u.route.element?p=u.route.element:p=l,P.createElement(pk,{match:u,routeContext:{outlet:l,matches:S,isDataRoute:r!=null},children:p})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?P.createElement(hk,{location:r.location,revalidation:r.revalidation,component:w,error:f,children:x(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):x()},null)}function Bm(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gk(e){let t=P.useContext(to);return me(t,Bm(e)),t}function yk(e){let t=P.useContext(mu);return me(t,Bm(e)),t}function wk(e){let t=P.useContext(Ur);return me(t,Bm(e)),t}function Om(e){let t=wk(e),r=t.matches[t.matches.length-1];return me(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function vk(){return Om("useRouteId")}function xk(){var n;let e=P.useContext(Mm),t=yk("useRouteError"),r=Om("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Ek(){let{router:e}=gk("useNavigate"),t=Om("useNavigate"),r=P.useRef(!1);return wx(()=>{r.current=!0}),P.useCallback(async(i,s={})=>{Ve(r.current,yx),r.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var Vg={};function xx(e,t,r){!t&&!Vg[e]&&(Vg[e]=!0,Ve(!1,r))}var qg={};function Kg(e,t){!e&&!qg[t]&&(qg[t]=!0,console.warn(t))}function Sk(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&Ve(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:P.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&Ve(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:P.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&Ve(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:P.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var bk=["HydrateFallback","hydrateFallbackElement"],kk=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function Ck({router:e,flushSync:t}){let[r,n]=P.useState(e.state),[i,s]=P.useState(),[o,a]=P.useState({isTransitioning:!1}),[l,u]=P.useState(),[d,f]=P.useState(),[h,w]=P.useState(),E=P.useRef(new Map),S=P.useCallback((y,{deletedFetchers:b,flushSync:L,viewTransitionOpts:v})=>{y.fetchers.forEach((O,M)=>{O.data!==void 0&&E.current.set(M,O.data)}),b.forEach(O=>E.current.delete(O)),Kg(L===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let F=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(Kg(v==null||F,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!v||!F){t&&L?t(()=>n(y)):P.startTransition(()=>n(y));return}if(t&&L){t(()=>{d&&(l&&l.resolve(),d.skipTransition()),a({isTransitioning:!0,flushSync:!0,currentLocation:v.currentLocation,nextLocation:v.nextLocation})});let O=e.window.document.startViewTransition(()=>{t(()=>n(y))});O.finished.finally(()=>{t(()=>{u(void 0),f(void 0),s(void 0),a({isTransitioning:!1})})}),t(()=>f(O));return}d?(l&&l.resolve(),d.skipTransition(),w({state:y,currentLocation:v.currentLocation,nextLocation:v.nextLocation})):(s(y),a({isTransitioning:!0,flushSync:!1,currentLocation:v.currentLocation,nextLocation:v.nextLocation}))},[e.window,t,d,l]);P.useLayoutEffect(()=>e.subscribe(S),[e,S]),P.useEffect(()=>{o.isTransitioning&&!o.flushSync&&u(new kk)},[o]),P.useEffect(()=>{if(l&&i&&e.window){let y=i,b=l.promise,L=e.window.document.startViewTransition(async()=>{P.startTransition(()=>n(y)),await b});L.finished.finally(()=>{u(void 0),f(void 0),s(void 0),a({isTransitioning:!1})}),f(L)}},[i,l,e.window]),P.useEffect(()=>{l&&i&&r.location.key===i.location.key&&l.resolve()},[l,d,r.location,i]),P.useEffect(()=>{!o.isTransitioning&&h&&(s(h.state),a({isTransitioning:!0,flushSync:!1,currentLocation:h.currentLocation,nextLocation:h.nextLocation}),w(void 0))},[o.isTransitioning,h]);let x=P.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:y=>e.navigate(y),push:(y,b,L)=>e.navigate(y,{state:b,preventScrollReset:L==null?void 0:L.preventScrollReset}),replace:(y,b,L)=>e.navigate(y,{replace:!0,state:b,preventScrollReset:L==null?void 0:L.preventScrollReset})}),[e]),p=e.basename||"/",g=P.useMemo(()=>({router:e,navigator:x,static:!1,basename:p}),[e,x,p]);return P.createElement(P.Fragment,null,P.createElement(to.Provider,{value:g},P.createElement(mu.Provider,{value:r},P.createElement(gx.Provider,{value:E.current},P.createElement(Fm.Provider,{value:o},P.createElement(jk,{basename:p,location:r.location,navigationType:r.historyAction,navigator:x},P.createElement(Nk,{routes:e.routes,future:e.future,state:r})))))),null)}var Nk=P.memo(Rk);function Rk({routes:e,future:t,state:r}){return ck(e,void 0,r,t)}function qh({to:e,replace:t,state:r,relative:n}){me(_a(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=P.useContext(sn);Ve(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=P.useContext(Ur),{pathname:o}=li(),a=vx(),l=$d(e,zd(s),o,n==="path"),u=JSON.stringify(l);return P.useEffect(()=>{a(JSON.parse(u),{replace:t,state:r,relative:n})},[a,u,n,t,r]),null}function Lk(e){return lk(e.context)}function jk({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:s=!1}){me(!_a(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=P.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof r=="string"&&(r=os(r));let{pathname:l="/",search:u="",hash:d="",state:f=null,key:h="default"}=r,w=P.useMemo(()=>{let E=Pr(l,o);return E==null?null:{location:{pathname:E,search:u,hash:d,state:f,key:h},navigationType:n}},[o,l,u,d,f,h,n]);return Ve(w!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:P.createElement(sn.Provider,{value:a},P.createElement(Hd.Provider,{children:t,value:w}))}var Sc="get",bc="application/x-www-form-urlencoded";function Wd(e){return e!=null&&typeof e.tagName=="string"}function _k(e){return Wd(e)&&e.tagName.toLowerCase()==="button"}function Ak(e){return Wd(e)&&e.tagName.toLowerCase()==="form"}function Tk(e){return Wd(e)&&e.tagName.toLowerCase()==="input"}function Pk(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Uk(e,t){return e.button===0&&(!t||t==="_self")&&!Pk(e)}var Ju=null;function Fk(){if(Ju===null)try{new FormData(document.createElement("form"),0),Ju=!1}catch{Ju=!0}return Ju}var Mk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Uf(e){return e!=null&&!Mk.has(e)?(Ve(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bc}"`),null):e}function Bk(e,t){let r,n,i,s,o;if(Ak(e)){let a=e.getAttribute("action");n=a?Pr(a,t):null,r=e.getAttribute("method")||Sc,i=Uf(e.getAttribute("enctype"))||bc,s=new FormData(e)}else if(_k(e)||Tk(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(n=l?Pr(l,t):null,r=e.getAttribute("formmethod")||a.getAttribute("method")||Sc,i=Uf(e.getAttribute("formenctype"))||Uf(a.getAttribute("enctype"))||bc,s=new FormData(a,e),!Fk()){let{name:u,type:d,value:f}=e;if(d==="image"){let h=u?`${u}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else u&&s.append(u,f)}}else{if(Wd(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Sc,n=null,i=bc,o=e}return s&&i==="text/plain"&&(o=s,s=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Im(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ok(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Pr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function Ik(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Dk(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function zk(e,t,r){let n=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let o=await Ik(s,r);return o.links?o.links():[]}return[]}));return Vk(n.flat(1).filter(Dk).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Gg(e,t,r,n,i,s){let o=(l,u)=>r[u]?l.route.id!==r[u].route.id:!0,a=(l,u)=>{var d;return r[u].pathname!==l.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==l.params["*"]};return s==="assets"?t.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?t.filter((l,u)=>{var f;let d=n.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function $k(e,t,{includeHydrateFallback:r}={}){return Hk(e.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Hk(e){return[...new Set(e)]}function Wk(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function Vk(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let s=JSON.stringify(Wk(i));return r.has(s)||(r.add(s),n.push({key:s,link:i})),n},[])}function Ex(){let e=P.useContext(to);return Im(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function qk(){let e=P.useContext(mu);return Im(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Dm=P.createContext(void 0);Dm.displayName="FrameworkContext";function Sx(){let e=P.useContext(Dm);return Im(e,"You must render this element inside a <HydratedRouter> element"),e}function Kk(e,t){let r=P.useContext(Dm),[n,i]=P.useState(!1),[s,o]=P.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,h=P.useRef(null);P.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let S=p=>{p.forEach(g=>{o(g.isIntersecting)})},x=new IntersectionObserver(S,{threshold:.5});return h.current&&x.observe(h.current),()=>{x.disconnect()}}},[e]),P.useEffect(()=>{if(n){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[n]);let w=()=>{i(!0)},E=()=>{i(!1),o(!1)};return r?e!=="intent"?[s,h,{}]:[s,h,{onFocus:Ka(a,w),onBlur:Ka(l,E),onMouseEnter:Ka(u,w),onMouseLeave:Ka(d,E),onTouchStart:Ka(f,w)}]:[!1,h,{}]}function Ka(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Gk({page:e,...t}){let{router:r}=Ex(),n=P.useMemo(()=>Li(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?P.createElement(Yk,{page:e,matches:n,...t}):null}function Qk(e){let{manifest:t,routeModules:r}=Sx(),[n,i]=P.useState([]);return P.useEffect(()=>{let s=!1;return zk(e,t,r).then(o=>{s||i(o)}),()=>{s=!0}},[e,t,r]),n}function Yk({page:e,matches:t,...r}){let n=li(),{manifest:i,routeModules:s}=Sx(),{basename:o}=Ex(),{loaderData:a,matches:l}=qk(),u=P.useMemo(()=>Gg(e,t,l,i,n,"data"),[e,t,l,i,n]),d=P.useMemo(()=>Gg(e,t,l,i,n,"assets"),[e,t,l,i,n]),f=P.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let E=new Set,S=!1;if(t.forEach(p=>{var y;let g=i.routes[p.route.id];!g||!g.hasLoader||(!u.some(b=>b.route.id===p.route.id)&&p.route.id in a&&((y=s[p.route.id])!=null&&y.shouldRevalidate)||g.hasClientLoader?S=!0:E.add(p.route.id))}),E.size===0)return[];let x=Ok(e,o,"data");return S&&E.size>0&&x.searchParams.set("_routes",t.filter(p=>E.has(p.route.id)).map(p=>p.route.id).join(",")),[x.pathname+x.search]},[o,a,n,i,u,t,e,s]),h=P.useMemo(()=>$k(d,i),[d,i]),w=Qk(d);return P.createElement(P.Fragment,null,f.map(E=>P.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...r})),h.map(E=>P.createElement("link",{key:E,rel:"modulepreload",href:E,...r})),w.map(({key:E,link:S})=>P.createElement("link",{key:E,...S})))}function Zk(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var bx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bx&&(window.__reactRouterVersion="7.7.0")}catch{}function Xk(e,t){return I2({basename:t==null?void 0:t.basename,unstable_getContext:t==null?void 0:t.unstable_getContext,future:t==null?void 0:t.future,history:i2({window:t==null?void 0:t.window}),hydrationData:Jk(),routes:e,mapRouteProperties:Sk,hydrationRouteProperties:bk,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function Jk(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:eC(e.errors)}),e}function eC(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&i.__type==="RouteErrorResponse")r[n]=new id(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",r[n]=o}catch{}}if(r[n]==null){let s=new Error(i.message);s.stack="",r[n]=s}}else r[n]=i;return r}var kx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ws=P.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:f,...h},w){let{basename:E}=P.useContext(sn),S=typeof u=="string"&&kx.test(u),x,p=!1;if(typeof u=="string"&&S&&(x=u,bx))try{let M=new URL(window.location.href),k=u.startsWith("//")?new URL(M.protocol+u):new URL(u),C=Pr(k.pathname,E);k.origin===M.origin&&C!=null?u=C+k.search+k.hash:p=!0}catch{Ve(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let g=sk(u,{relative:i}),[y,b,L]=Kk(n,h),v=iC(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:f});function F(M){t&&t(M),M.defaultPrevented||v(M)}let O=P.createElement("a",{...h,...L,href:x||g,onClick:p||s?t:F,ref:Zk(w,b),target:l,"data-discover":!S&&r==="render"?"true":void 0});return y&&!S?P.createElement(P.Fragment,null,O,P.createElement(Gk,{page:g})):O});Ws.displayName="Link";var tC=P.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},d){let f=gu(o,{relative:u.relative}),h=li(),w=P.useContext(mu),{navigator:E,basename:S}=P.useContext(sn),x=w!=null&&uC(f)&&a===!0,p=E.encodeLocation?E.encodeLocation(f).pathname:f.pathname,g=h.pathname,y=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;r||(g=g.toLowerCase(),y=y?y.toLowerCase():null,p=p.toLowerCase()),y&&S&&(y=Pr(y,S)||y);const b=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let L=g===p||!i&&g.startsWith(p)&&g.charAt(b)==="/",v=y!=null&&(y===p||!i&&y.startsWith(p)&&y.charAt(p.length)==="/"),F={isActive:L,isPending:v,isTransitioning:x},O=L?t:void 0,M;typeof n=="function"?M=n(F):M=[n,L?"active":null,v?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let k=typeof s=="function"?s(F):s;return P.createElement(Ws,{...u,"aria-current":O,className:M,ref:d,style:k,to:o,viewTransition:a},typeof l=="function"?l(F):l)});tC.displayName="NavLink";var rC=P.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:s,method:o=Sc,action:a,onSubmit:l,relative:u,preventScrollReset:d,viewTransition:f,...h},w)=>{let E=aC(),S=lC(a,{relative:u}),x=o.toLowerCase()==="get"?"get":"post",p=typeof a=="string"&&kx.test(a),g=y=>{if(l&&l(y),y.defaultPrevented)return;y.preventDefault();let b=y.nativeEvent.submitter,L=(b==null?void 0:b.getAttribute("formmethod"))||o;E(b||y.currentTarget,{fetcherKey:t,method:L,navigate:r,replace:i,state:s,relative:u,preventScrollReset:d,viewTransition:f})};return P.createElement("form",{ref:w,method:x,action:S,onSubmit:n?l:g,...h,"data-discover":!p&&e==="render"?"true":void 0})});rC.displayName="Form";function nC(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Cx(e){let t=P.useContext(to);return me(t,nC(e)),t}function iC(e,{target:t,replace:r,state:n,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=vx(),l=li(),u=gu(e,{relative:s});return P.useCallback(d=>{if(Uk(d,t)){d.preventDefault();let f=r!==void 0?r:Xi(l)===Xi(u);a(e,{replace:f,state:n,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,u,r,n,t,e,i,s,o])}var sC=0,oC=()=>`__${String(++sC)}__`;function aC(){let{router:e}=Cx("useSubmit"),{basename:t}=P.useContext(sn),r=vk();return P.useCallback(async(n,i={})=>{let{action:s,method:o,encType:a,formData:l,body:u}=Bk(n,t);if(i.navigate===!1){let d=i.fetcherKey||oC();await e.fetch(d,r,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,r])}function lC(e,{relative:t}={}){let{basename:r}=P.useContext(sn),n=P.useContext(Ur);me(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...gu(e||".",{relative:t})},o=li();if(e==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let d=a.toString();s.search=d?`?${d}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:Ln([r,s.pathname])),Xi(s)}function uC(e,t={}){let r=P.useContext(Fm);me(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Cx("useViewTransitionState"),i=gu(e,{relative:t.relative});if(!r.isTransitioning)return!1;let s=Pr(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Pr(r.nextLocation.pathname,n)||r.nextLocation.pathname;return nd(i.pathname,o)!=null||nd(i.pathname,s)!=null}function cC(e){return P.createElement(Ck,{flushSync:Jv.flushSync,...e})}var Kh={exports:{}},Ff,Qg;function dC(){if(Qg)return Ff;Qg=1;var e=1e3,t=e*60,r=t*60,n=r*24,i=n*7,s=n*365.25;Ff=function(d,f){f=f||{};var h=typeof d;if(h==="string"&&d.length>0)return o(d);if(h==="number"&&isFinite(d))return f.long?l(d):a(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function o(d){if(d=String(d),!(d.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(f){var h=parseFloat(f[1]),w=(f[2]||"ms").toLowerCase();switch(w){case"years":case"year":case"yrs":case"yr":case"y":return h*s;case"weeks":case"week":case"w":return h*i;case"days":case"day":case"d":return h*n;case"hours":case"hour":case"hrs":case"hr":case"h":return h*r;case"minutes":case"minute":case"mins":case"min":case"m":return h*t;case"seconds":case"second":case"secs":case"sec":case"s":return h*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function a(d){var f=Math.abs(d);return f>=n?Math.round(d/n)+"d":f>=r?Math.round(d/r)+"h":f>=t?Math.round(d/t)+"m":f>=e?Math.round(d/e)+"s":d+"ms"}function l(d){var f=Math.abs(d);return f>=n?u(d,f,n,"day"):f>=r?u(d,f,r,"hour"):f>=t?u(d,f,t,"minute"):f>=e?u(d,f,e,"second"):d+" ms"}function u(d,f,h,w){var E=f>=h*1.5;return Math.round(d/h)+" "+w+(E?"s":"")}return Ff}function fC(e){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=a,r.humanize=dC(),r.destroy=u,Object.keys(e).forEach(d=>{r[d]=e[d]}),r.names=[],r.skips=[],r.formatters={};function t(d){let f=0;for(let h=0;h<d.length;h++)f=(f<<5)-f+d.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(d){let f,h=null,w,E;function S(...x){if(!S.enabled)return;const p=S,g=Number(new Date),y=g-(f||g);p.diff=y,p.prev=f,p.curr=g,f=g,x[0]=r.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let b=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(v,F)=>{if(v==="%%")return"%";b++;const O=r.formatters[F];if(typeof O=="function"){const M=x[b];v=O.call(p,M),x.splice(b,1),b--}return v}),r.formatArgs.call(p,x),(p.log||r.log).apply(p,x)}return S.namespace=d,S.useColors=r.useColors(),S.color=r.selectColor(d),S.extend=n,S.destroy=r.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(w!==r.namespaces&&(w=r.namespaces,E=r.enabled(d)),E),set:x=>{h=x}}),typeof r.init=="function"&&r.init(S),S}function n(d,f){const h=r(this.namespace+(typeof f>"u"?":":f)+d);return h.log=this.log,h}function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];const f=(typeof d=="string"?d:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const h of f)h[0]==="-"?r.skips.push(h.slice(1)):r.names.push(h)}function s(d,f){let h=0,w=0,E=-1,S=0;for(;h<d.length;)if(w<f.length&&(f[w]===d[h]||f[w]==="*"))f[w]==="*"?(E=w,S=h,w++):(h++,w++);else if(E!==-1)w=E+1,S++,h=S;else return!1;for(;w<f.length&&f[w]==="*";)w++;return w===f.length}function o(){const d=[...r.names,...r.skips.map(f=>"-"+f)].join(",");return r.enable(""),d}function a(d){for(const f of r.skips)if(s(d,f))return!1;for(const f of r.names)if(s(d,f))return!0;return!1}function l(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var hC=fC;(function(e,t){var r={};t.formatArgs=i,t.save=s,t.load=o,t.useColors=n,t.storage=a(),t.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;u.splice(1,0,d,"color: inherit");let f=0,h=0;u[0].replace(/%[a-zA-Z%]/g,w=>{w!=="%%"&&(f++,w==="%c"&&(h=f))}),u.splice(h,0,d)}t.log=console.debug||console.log||(()=>{});function s(u){try{u?t.storage.setItem("debug",u):t.storage.removeItem("debug")}catch{}}function o(){let u;try{u=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=r.DEBUG),u}function a(){try{return localStorage}catch{}}e.exports=hC(t);const{formatters:l}=e.exports;l.j=function(u){try{return JSON.stringify(u)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}})(Kh,Kh.exports);var pC=Kh.exports;const on=Op(pC);var Nx={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function s(l,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var w=new i(d,f||l,h),E=r?r+u:u;return l._events[E]?l._events[E].fn?l._events[E]=[l._events[E],w]:l._events[E].push(w):(l._events[E]=w,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},a.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,w=f.length,E=new Array(w);h<w;h++)E[h]=f[h].fn;return E},a.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,d,f,h,w,E){var S=r?r+u:u;if(!this._events[S])return!1;var x=this._events[S],p=arguments.length,g,y;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),p){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,h),!0;case 5:return x.fn.call(x.context,d,f,h,w),!0;case 6:return x.fn.call(x.context,d,f,h,w,E),!0}for(y=1,g=new Array(p-1);y<p;y++)g[y-1]=arguments[y];x.fn.apply(x.context,g)}else{var b=x.length,L;for(y=0;y<b;y++)switch(x[y].once&&this.removeListener(u,x[y].fn,void 0,!0),p){case 1:x[y].fn.call(x[y].context);break;case 2:x[y].fn.call(x[y].context,d);break;case 3:x[y].fn.call(x[y].context,d,f);break;case 4:x[y].fn.call(x[y].context,d,f,h);break;default:if(!g)for(L=1,g=new Array(p-1);L<p;L++)g[L-1]=arguments[L];x[y].fn.apply(x[y].context,g)}}return!0},a.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},a.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},a.prototype.removeListener=function(u,d,f,h){var w=r?r+u:u;if(!this._events[w])return this;if(!d)return o(this,w),this;var E=this._events[w];if(E.fn)E.fn===d&&(!h||E.once)&&(!f||E.context===f)&&o(this,w);else{for(var S=0,x=[],p=E.length;S<p;S++)(E[S].fn!==d||h&&!E[S].once||f&&E[S].context!==f)&&x.push(E[S]);x.length?this._events[w]=x.length===1?x[0]:x:o(this,w)}return this},a.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(Nx);var mC=Nx.exports;const Fr=Op(mC);var $l,$o;class gC extends Fr{constructor(){super(...arguments);z(this,$l,{});z(this,$o,!0)}hook(r){return this.on("change",r),()=>this.off("change",r)}snapshot(r){return c(this,$o)&&(T(this,$l,this.takeSnapshot(r)),T(this,$o,!1)),c(this,$l)}notifyChange(r){T(this,$o,!0),this.emit("change")}}$l=new WeakMap,$o=new WeakMap;const yC=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,wC=/(n(?:pub|profile|event|ote|addr|req|relay|chat)1[acdefghjklmnpqrstuvwxyz023456789]+)/,lo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function od(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function ad(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function rn(e,...t){if(!od(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Vd(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ad(e.outputLen),ad(e.blockLen)}function ld(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function vC(e,t){rn(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Fl(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Mf(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function fn(e,t){return e<<32-t|e>>>t}const Rx=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",xC=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Qe(e){if(rn(e),Rx)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=xC[e[r]];return t}const Pn={_0:48,_9:57,A:65,F:70,a:97,f:102};function Yg(e){if(e>=Pn._0&&e<=Pn._9)return e-Pn._0;if(e>=Pn.A&&e<=Pn.F)return e-(Pn.A-10);if(e>=Pn.a&&e<=Pn.f)return e-(Pn.a-10)}function ii(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Rx)return Uint8Array.fromHex(e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=Yg(e.charCodeAt(s)),a=Yg(e.charCodeAt(s+1));if(o===void 0||a===void 0){const l=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}n[i]=o*16+a}return n}function Lx(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Ml(e){return typeof e=="string"&&(e=Lx(e)),rn(e),e}function Lr(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];rn(i),t+=i.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const s=e[n];r.set(s,i),i+=s.length}return r}class jx{}function EC(e){const t=n=>e().update(Ml(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function yu(e=32){if(lo&&typeof lo.getRandomValues=="function")return lo.getRandomValues(new Uint8Array(e));if(lo&&typeof lo.randomBytes=="function")return Uint8Array.from(lo.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zm=BigInt(0),Gh=BigInt(1);function ud(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function ec(e){const t=e.toString(16);return t.length&1?"0"+t:t}function _x(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?zm:BigInt("0x"+e)}function Aa(e){return _x(Qe(e))}function Ax(e){return rn(e),_x(Qe(Uint8Array.from(e).reverse()))}function wu(e,t){return ii(e.toString(16).padStart(t*2,"0"))}function Tx(e,t){return wu(e,t).reverse()}function lt(e,t,r){let n;if(typeof t=="string")try{n=ii(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(od(t))n=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}const Bf=e=>typeof e=="bigint"&&zm<=e;function Qh(e,t,r){return Bf(e)&&Bf(t)&&Bf(r)&&t<=e&&e<r}function Px(e,t,r,n){if(!Qh(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function Ux(e){let t;for(t=0;e>zm;e>>=Gh,t+=1);return t}const vu=e=>(Gh<<BigInt(e))-Gh;function SC(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=w=>new Uint8Array(w),i=w=>Uint8Array.of(w);let s=n(e),o=n(e),a=0;const l=()=>{s.fill(1),o.fill(0),a=0},u=(...w)=>r(o,s,...w),d=(w=n(0))=>{o=u(i(0),w),s=u(),w.length!==0&&(o=u(i(1),w),s=u())},f=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let w=0;const E=[];for(;w<t;){s=u();const S=s.slice();E.push(S),w+=s.length}return Lr(...E)};return(w,E)=>{l(),d(w);let S;for(;!(S=E(f()));)d();return l(),S}}function $m(e,t,r={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function n(i,s,o){const a=e[i];if(o&&a===void 0)return;const l=typeof a;if(l!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${l}`)}Object.entries(t).forEach(([i,s])=>n(i,s,!1)),Object.entries(r).forEach(([i,s])=>n(i,s,!0))}function Zg(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(i!==void 0)return i;const s=e(r,...n);return t.set(r,s),s}}function bC(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),l=n?4:0,u=n?0:4;e.setUint32(t+l,o,n),e.setUint32(t+u,a,n)}function kC(e,t,r){return e&t^~e&r}function CC(e,t,r){return e&t^e&r^t&r}class NC extends jx{constructor(t,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(t),this.view=Mf(this.buffer)}update(t){ld(this),t=Ml(t),rn(t);const{view:r,buffer:n,blockLen:i}=this,s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=Mf(t);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ld(this),vC(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,Fl(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let f=o;f<i;f++)r[f]=0;bC(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=Mf(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,d[f],s)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return t.destroyed=o,t.finished=s,t.length=i,t.pos=a,i%r&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const pi=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),RC=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),mi=new Uint32Array(64);class LC extends NC{constructor(t=32){super(64,t,8,!1),this.A=pi[0]|0,this.B=pi[1]|0,this.C=pi[2]|0,this.D=pi[3]|0,this.E=pi[4]|0,this.F=pi[5]|0,this.G=pi[6]|0,this.H=pi[7]|0}get(){const{A:t,B:r,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[t,r,n,i,s,o,a,l]}set(t,r,n,i,s,o,a,l){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(t,r){for(let f=0;f<16;f++,r+=4)mi[f]=t.getUint32(r,!1);for(let f=16;f<64;f++){const h=mi[f-15],w=mi[f-2],E=fn(h,7)^fn(h,18)^h>>>3,S=fn(w,17)^fn(w,19)^w>>>10;mi[f]=S+mi[f-7]+E+mi[f-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:u,H:d}=this;for(let f=0;f<64;f++){const h=fn(a,6)^fn(a,11)^fn(a,25),w=d+h+kC(a,l,u)+RC[f]+mi[f]|0,S=(fn(n,2)^fn(n,13)^fn(n,22))+CC(n,i,s)|0;d=u,u=l,l=a,a=o+w|0,o=s,s=i,i=n,n=w+S|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(n,i,s,o,a,l,u,d)}roundClean(){Fl(mi)}destroy(){this.set(0,0,0,0,0,0,0,0),Fl(this.buffer)}}const cd=EC(()=>new LC);class Fx extends jx{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,Vd(t);const n=Ml(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?t.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Fl(s)}update(t){return ld(this),this.iHash.update(t),this}digestInto(t){ld(this),rn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const xu=(e,t,r)=>new Fx(e,t).update(r).digest();xu.create=(e,t)=>new Fx(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yt=BigInt(0),Ot=BigInt(1),ks=BigInt(2),Mx=BigInt(3),Bx=BigInt(4),Ox=BigInt(5),jC=BigInt(7),Ix=BigInt(8),_C=BigInt(9),Dx=BigInt(16);function Vt(e,t){const r=e%t;return r>=Yt?r:t+r}function wr(e,t,r){let n=e;for(;t-- >Yt;)n*=n,n%=r;return n}function Xg(e,t){if(e===Yt)throw new Error("invert: expected non-zero number");if(t<=Yt)throw new Error("invert: expected positive modulus, got "+t);let r=Vt(e,t),n=t,i=Yt,s=Ot;for(;r!==Yt;){const a=n/r,l=n%r,u=i-s*a;n=r,r=l,i=s,s=u}if(n!==Ot)throw new Error("invert: does not exist");return Vt(i,t)}function Hm(e,t,r){if(!e.eql(e.sqr(t),r))throw new Error("Cannot find square root")}function zx(e,t){const r=(e.ORDER+Ot)/Bx,n=e.pow(t,r);return Hm(e,n,t),n}function AC(e,t){const r=(e.ORDER-Ox)/Ix,n=e.mul(t,ks),i=e.pow(n,r),s=e.mul(t,i),o=e.mul(e.mul(s,ks),i),a=e.mul(s,e.sub(o,e.ONE));return Hm(e,a,t),a}function TC(e){const t=Eu(e),r=$x(e),n=r(t,t.neg(t.ONE)),i=r(t,n),s=r(t,t.neg(n)),o=(e+jC)/Dx;return(a,l)=>{let u=a.pow(l,o),d=a.mul(u,n);const f=a.mul(u,i),h=a.mul(u,s),w=a.eql(a.sqr(d),l),E=a.eql(a.sqr(f),l);u=a.cmov(u,d,w),d=a.cmov(h,f,E);const S=a.eql(a.sqr(d),l),x=a.cmov(u,d,S);return Hm(a,x,l),x}}function $x(e){if(e<Mx)throw new Error("sqrt is not defined for small field");let t=e-Ot,r=0;for(;t%ks===Yt;)t/=ks,r++;let n=ks;const i=Eu(e);for(;Jg(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return zx;let s=i.pow(n,t);const o=(t+Ot)/ks;return function(l,u){if(l.is0(u))return u;if(Jg(l,u)!==1)throw new Error("Cannot find square root");let d=r,f=l.mul(l.ONE,s),h=l.pow(u,t),w=l.pow(u,o);for(;!l.eql(h,l.ONE);){if(l.is0(h))return l.ZERO;let E=1,S=l.sqr(h);for(;!l.eql(S,l.ONE);)if(E++,S=l.sqr(S),E===d)throw new Error("Cannot find square root");const x=Ot<<BigInt(d-E-1),p=l.pow(f,x);d=E,f=l.sqr(p),h=l.mul(h,f),w=l.mul(w,p)}return w}}function PC(e){return e%Bx===Mx?zx:e%Ix===Ox?AC:e%Dx===_C?TC(e):$x(e)}const UC=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function FC(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=UC.reduce((n,i)=>(n[i]="function",n),t);return $m(e,r),e}function MC(e,t,r){if(r<Yt)throw new Error("invalid exponent, negatives unsupported");if(r===Yt)return e.ONE;if(r===Ot)return t;let n=e.ONE,i=t;for(;r>Yt;)r&Ot&&(n=e.mul(n,i)),i=e.sqr(i),r>>=Ot;return n}function Hx(e,t,r=!1){const n=new Array(t.length).fill(r?e.ZERO:void 0),i=t.reduce((o,a,l)=>e.is0(a)?o:(n[l]=o,e.mul(o,a)),e.ONE),s=e.inv(i);return t.reduceRight((o,a,l)=>e.is0(a)?o:(n[l]=e.mul(o,n[l]),e.mul(o,a)),s),n}function Jg(e,t){const r=(e.ORDER-Ot)/ks,n=e.pow(t,r),i=e.eql(n,e.ONE),s=e.eql(n,e.ZERO),o=e.eql(n,e.neg(e.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function BC(e,t){t!==void 0&&ad(t);const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Eu(e,t,r=!1,n={}){if(e<=Yt)throw new Error("invalid field: expected ORDER > 0, got "+e);let i,s,o=!1,a;if(typeof t=="object"&&t!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const h=t;h.BITS&&(i=h.BITS),h.sqrt&&(s=h.sqrt),typeof h.isLE=="boolean"&&(r=h.isLE),typeof h.modOnDecode=="boolean"&&(o=h.modOnDecode),a=h.allowedLengths}else typeof t=="number"&&(i=t),n.sqrt&&(s=n.sqrt);const{nBitLength:l,nByteLength:u}=BC(e,i);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d;const f=Object.freeze({ORDER:e,isLE:r,BITS:l,BYTES:u,MASK:vu(l),ZERO:Yt,ONE:Ot,allowedLengths:a,create:h=>Vt(h,e),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return Yt<=h&&h<e},is0:h=>h===Yt,isValidNot0:h=>!f.is0(h)&&f.isValid(h),isOdd:h=>(h&Ot)===Ot,neg:h=>Vt(-h,e),eql:(h,w)=>h===w,sqr:h=>Vt(h*h,e),add:(h,w)=>Vt(h+w,e),sub:(h,w)=>Vt(h-w,e),mul:(h,w)=>Vt(h*w,e),pow:(h,w)=>MC(f,h,w),div:(h,w)=>Vt(h*Xg(w,e),e),sqrN:h=>h*h,addN:(h,w)=>h+w,subN:(h,w)=>h-w,mulN:(h,w)=>h*w,inv:h=>Xg(h,e),sqrt:s||(h=>(d||(d=PC(e)),d(f,h))),toBytes:h=>r?Tx(h,u):wu(h,u),fromBytes:(h,w=!0)=>{if(a){if(!a.includes(h.length)||h.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+h.length);const S=new Uint8Array(u);S.set(h,r?0:S.length-h.length),h=S}if(h.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+h.length);let E=r?Ax(h):Aa(h);if(o&&(E=Vt(E,e)),!w&&!f.isValid(E))throw new Error("invalid field element: outside of range 0..ORDER");return E},invertBatch:h=>Hx(f,h),cmov:(h,w,E)=>E?w:h});return Object.freeze(f)}function Wx(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Vx(e){const t=Wx(e);return t+Math.ceil(t/2)}function qx(e,t,r=!1){const n=e.length,i=Wx(t),s=Vx(t);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?Ax(e):Aa(e),a=Vt(o,t-Ot)+Ot;return r?Tx(a,i):wu(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Na=BigInt(0),Cs=BigInt(1);function dd(e,t){const r=t.negate();return e?r:t}function Of(e,t){const r=Hx(e.Fp,t.map(n=>n.Z));return t.map((n,i)=>e.fromAffine(n.toAffine(r[i])))}function Kx(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function If(e,t){Kx(e,t);const r=Math.ceil(t/e)+1,n=2**(e-1),i=2**e,s=vu(e),o=BigInt(e);return{windows:r,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function ey(e,t,r){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=r;let a=Number(e&i),l=e>>o;a>n&&(a-=s,l+=Cs);const u=t*n,d=u+Math.abs(a)-1,f=a===0,h=a<0,w=t%2!==0;return{nextN:l,offset:d,isZero:f,isNeg:h,isNegF:w,offsetF:u}}function OC(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((r,n)=>{if(!(r instanceof t))throw new Error("invalid point at index "+n)})}function IC(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((r,n)=>{if(!t.isValid(r))throw new Error("invalid scalar at index "+n)})}const Df=new WeakMap,Gx=new WeakMap;function zf(e){return Gx.get(e)||1}function ty(e){if(e!==Na)throw new Error("invalid wNAF")}class DC{constructor(t,r){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=r}_unsafeLadder(t,r,n=this.ZERO){let i=t;for(;r>Na;)r&Cs&&(n=n.add(i)),i=i.double(),r>>=Cs;return n}precomputeWindow(t,r){const{windows:n,windowSize:i}=If(r,this.bits),s=[];let o=t,a=o;for(let l=0;l<n;l++){a=o,s.push(a);for(let u=1;u<i;u++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(t,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=If(t,this.bits);for(let a=0;a<o.windows;a++){const{nextN:l,offset:u,isZero:d,isNeg:f,isNegF:h,offsetF:w}=ey(n,a,o);n=l,d?s=s.add(dd(h,r[w])):i=i.add(dd(f,r[u]))}return ty(n),{p:i,f:s}}wNAFUnsafe(t,r,n,i=this.ZERO){const s=If(t,this.bits);for(let o=0;o<s.windows&&n!==Na;o++){const{nextN:a,offset:l,isZero:u,isNeg:d}=ey(n,o,s);if(n=a,!u){const f=r[l];i=i.add(d?f.negate():f)}}return ty(n),i}getPrecomputes(t,r,n){let i=Df.get(r);return i||(i=this.precomputeWindow(r,t),t!==1&&(typeof n=="function"&&(i=n(i)),Df.set(r,i))),i}cached(t,r,n){const i=zf(t);return this.wNAF(i,this.getPrecomputes(i,t,n),r)}unsafe(t,r,n,i){const s=zf(t);return s===1?this._unsafeLadder(t,r,i):this.wNAFUnsafe(s,this.getPrecomputes(s,t,n),r,i)}createCache(t,r){Kx(r,this.bits),Gx.set(t,r),Df.delete(t)}hasCache(t){return zf(t)!==1}}function zC(e,t,r,n){let i=t,s=e.ZERO,o=e.ZERO;for(;r>Na||n>Na;)r&Cs&&(s=s.add(i)),n&Cs&&(o=o.add(i)),i=i.double(),r>>=Cs,n>>=Cs;return{p1:s,p2:o}}function $C(e,t,r,n){OC(r,e),IC(n,t);const i=r.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,a=Ux(BigInt(i));let l=1;a>12?l=a-3:a>4?l=a-2:a>0&&(l=2);const u=vu(l),d=new Array(Number(u)+1).fill(o),f=Math.floor((t.BITS-1)/l)*l;let h=o;for(let w=f;w>=0;w-=l){d.fill(o);for(let S=0;S<s;S++){const x=n[S],p=Number(x>>BigInt(w)&u);d[p]=d[p].add(r[S])}let E=o;for(let S=d.length-1,x=o;S>0;S--)x=x.add(d[S]),E=E.add(x);if(h=h.add(E),w!==0)for(let S=0;S<l;S++)h=h.double()}return h}function ry(e,t){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return FC(t),t}else return Eu(e)}function HC(e,t,r={}){if(!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const a of["p","n","h"]){const l=t[a];if(!(typeof l=="bigint"&&l>Na))throw new Error(`CURVE.${a} must be positive bigint`)}const n=ry(t.p,r.Fp),i=ry(t.n,r.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!n.isValid(t[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ny=(e,t)=>(e+(e>=0?t:-t)/Qx)/t;function WC(e,t,r){const[[n,i],[s,o]]=t,a=ny(o*e,r),l=ny(-i*e,r);let u=e-a*n-l*s,d=-a*i-l*o;const f=u<Zn,h=d<Zn;f&&(u=-u),h&&(d=-d);const w=vu(Math.ceil(Ux(r)/2))+Do;if(u<Zn||u>=w||d<Zn||d>=w)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:f,k1:u,k2neg:h,k2:d}}function iy(e){e.lowS!==void 0&&ud("lowS",e.lowS),e.prehash!==void 0&&ud("prehash",e.prehash)}class VC extends Error{constructor(t=""){super(t)}}const On={Err:VC,_tlv:{encode:(e,t)=>{const{Err:r}=On;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length&1)throw new r("tlv.encode: unpadded data");const n=t.length/2,i=ec(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?ec(i.length/2|128):"";return ec(e)+s+i+t},decode(e,t){const{Err:r}=On;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const l=i&127;if(!l)throw new r("tlv.decode(long): indefinite length not supported");if(l>4)throw new r("tlv.decode(long): byte length is too big");const u=t.subarray(n,n+l);if(u.length!==l)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const d of u)o=o<<8|d;if(n+=l,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=t.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+o)}}},_int:{encode(e){const{Err:t}=On;if(e<Zn)throw new t("integer: negative integers are not allowed");let r=ec(e);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=On;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Aa(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=On,i=lt("signature",e),{v:s,l:o}=n.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l}=n.decode(2,s),{v:u,l:d}=n.decode(2,l);if(d.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(e){const{_tlv:t,_int:r}=On,n=t.encode(2,r.encode(e.r)),i=t.encode(2,r.encode(e.s)),s=n+i;return t.encode(48,s)}},Zn=BigInt(0),Do=BigInt(1),Qx=BigInt(2),tc=BigInt(3),qC=BigInt(4);function KC(e,t,r){function n(i){const s=e.sqr(i),o=e.mul(s,i);return e.add(e.add(o,e.mul(i,t)),r)}return n}function ys(e,t){const{BYTES:r}=e;let n;if(typeof t=="bigint")n=t;else{let i=lt("private key",t);try{n=e.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof t}`)}}if(!e.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function GC(e,t={}){const{Fp:r,Fn:n}=HC("weierstrass",e,t),{h:i,n:s}=e;$m(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=t;if(o&&(!r.is0(e.a)||typeof o.beta!="bigint"||!Array.isArray(o.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');function a(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function l(M,k,C){const{x:U,y:B}=k.toAffine(),$=r.toBytes(U);if(ud("isCompressed",C),C){a();const D=!r.isOdd(B);return Lr(Yx(D),$)}else return Lr(Uint8Array.of(4),$,r.toBytes(B))}function u(M){rn(M);const k=r.BYTES,C=k+1,U=2*k+1,B=M.length,$=M[0],D=M.subarray(1);if(B===C&&($===2||$===3)){const N=r.fromBytes(D);if(!r.isValid(N))throw new Error("bad point: is not on curve, wrong x");const j=h(N);let _;try{_=r.sqrt(j)}catch(V){const K=V instanceof Error?": "+V.message:"";throw new Error("bad point: is not on curve, sqrt error"+K)}a();const H=r.isOdd(_);return($&1)===1!==H&&(_=r.neg(_)),{x:N,y:_}}else if(B===U&&$===4){const N=r.fromBytes(D.subarray(k*0,k*1)),j=r.fromBytes(D.subarray(k*1,k*2));if(!w(N,j))throw new Error("bad point: is not on curve");return{x:N,y:j}}else throw new Error(`bad point: got length ${B}, expected compressed=${C} or uncompressed=${U}`)}const d=t.toBytes||l,f=t.fromBytes||u,h=KC(r,e.a,e.b);function w(M,k){const C=r.sqr(k),U=h(M);return r.eql(C,U)}if(!w(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const E=r.mul(r.pow(e.a,tc),qC),S=r.mul(r.sqr(e.b),BigInt(27));if(r.is0(r.add(E,S)))throw new Error("bad curve params: a or b");function x(M,k,C=!1){if(!r.isValid(k)||C&&r.is0(k))throw new Error(`bad point coordinate ${M}`);return k}function p(M){if(!(M instanceof v))throw new Error("ProjectivePoint expected")}function g(M){if(!o||!o.basises)throw new Error("no endo");return WC(M,o.basises,n.ORDER)}const y=Zg((M,k)=>{const{X:C,Y:U,Z:B}=M;if(r.eql(B,r.ONE))return{x:C,y:U};const $=M.is0();k==null&&(k=$?r.ONE:r.inv(B));const D=r.mul(C,k),N=r.mul(U,k),j=r.mul(B,k);if($)return{x:r.ZERO,y:r.ZERO};if(!r.eql(j,r.ONE))throw new Error("invZ was invalid");return{x:D,y:N}}),b=Zg(M=>{if(M.is0()){if(t.allowInfinityPoint&&!r.is0(M.Y))return;throw new Error("bad point: ZERO")}const{x:k,y:C}=M.toAffine();if(!r.isValid(k)||!r.isValid(C))throw new Error("bad point: x or y not field elements");if(!w(k,C))throw new Error("bad point: equation left != right");if(!M.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function L(M,k,C,U,B){return C=new v(r.mul(C.X,M),C.Y,C.Z),k=dd(U,k),C=dd(B,C),k.add(C)}class v{constructor(k,C,U){this.X=x("x",k),this.Y=x("y",C,!0),this.Z=x("z",U),Object.freeze(this)}static fromAffine(k){const{x:C,y:U}=k||{};if(!k||!r.isValid(C)||!r.isValid(U))throw new Error("invalid affine point");if(k instanceof v)throw new Error("projective point not allowed");return r.is0(C)&&r.is0(U)?v.ZERO:new v(C,U,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}static normalizeZ(k){return Of(v,k)}static fromBytes(k){return rn(k),v.fromHex(k)}static fromHex(k){const C=v.fromAffine(f(lt("pointHex",k)));return C.assertValidity(),C}static fromPrivateKey(k){return v.BASE.multiply(ys(n,k))}static msm(k,C){return $C(v,n,k,C)}_setWindowSize(k){this.precompute(k)}precompute(k=8,C=!0){return O.createCache(this,k),C||this.multiply(tc),this}assertValidity(){b(this)}hasEvenY(){const{y:k}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(k)}equals(k){p(k);const{X:C,Y:U,Z:B}=this,{X:$,Y:D,Z:N}=k,j=r.eql(r.mul(C,N),r.mul($,B)),_=r.eql(r.mul(U,N),r.mul(D,B));return j&&_}negate(){return new v(this.X,r.neg(this.Y),this.Z)}double(){const{a:k,b:C}=e,U=r.mul(C,tc),{X:B,Y:$,Z:D}=this;let N=r.ZERO,j=r.ZERO,_=r.ZERO,H=r.mul(B,B),q=r.mul($,$),V=r.mul(D,D),K=r.mul(B,$);return K=r.add(K,K),_=r.mul(B,D),_=r.add(_,_),N=r.mul(k,_),j=r.mul(U,V),j=r.add(N,j),N=r.sub(q,j),j=r.add(q,j),j=r.mul(N,j),N=r.mul(K,N),_=r.mul(U,_),V=r.mul(k,V),K=r.sub(H,V),K=r.mul(k,K),K=r.add(K,_),_=r.add(H,H),H=r.add(_,H),H=r.add(H,V),H=r.mul(H,K),j=r.add(j,H),V=r.mul($,D),V=r.add(V,V),H=r.mul(V,K),N=r.sub(N,H),_=r.mul(V,q),_=r.add(_,_),_=r.add(_,_),new v(N,j,_)}add(k){p(k);const{X:C,Y:U,Z:B}=this,{X:$,Y:D,Z:N}=k;let j=r.ZERO,_=r.ZERO,H=r.ZERO;const q=e.a,V=r.mul(e.b,tc);let K=r.mul(C,$),ee=r.mul(U,D),oe=r.mul(B,N),Le=r.add(C,U),le=r.add($,D);Le=r.mul(Le,le),le=r.add(K,ee),Le=r.sub(Le,le),le=r.add(C,B);let be=r.add($,N);return le=r.mul(le,be),be=r.add(K,oe),le=r.sub(le,be),be=r.add(U,B),j=r.add(D,N),be=r.mul(be,j),j=r.add(ee,oe),be=r.sub(be,j),H=r.mul(q,le),j=r.mul(V,oe),H=r.add(j,H),j=r.sub(ee,H),H=r.add(ee,H),_=r.mul(j,H),ee=r.add(K,K),ee=r.add(ee,K),oe=r.mul(q,oe),le=r.mul(V,le),ee=r.add(ee,oe),oe=r.sub(K,oe),oe=r.mul(q,oe),le=r.add(le,oe),K=r.mul(ee,le),_=r.add(_,K),K=r.mul(be,le),j=r.mul(Le,j),j=r.sub(j,K),K=r.mul(Le,ee),H=r.mul(be,H),H=r.add(H,K),new v(j,_,H)}subtract(k){return this.add(k.negate())}is0(){return this.equals(v.ZERO)}multiply(k){const{endo:C}=t;if(!n.isValidNot0(k))throw new Error("invalid scalar: out of range");let U,B;const $=D=>O.cached(this,D,N=>Of(v,N));if(C){const{k1neg:D,k1:N,k2neg:j,k2:_}=g(k),{p:H,f:q}=$(N),{p:V,f:K}=$(_);B=q.add(K),U=L(C.beta,H,V,D,j)}else{const{p:D,f:N}=$(k);U=D,B=N}return Of(v,[U,B])[0]}multiplyUnsafe(k){const{endo:C}=t,U=this;if(!n.isValid(k))throw new Error("invalid scalar: out of range");if(k===Zn||U.is0())return v.ZERO;if(k===Do)return U;if(O.hasCache(this))return this.multiply(k);if(C){const{k1neg:B,k1:$,k2neg:D,k2:N}=g(k),{p1:j,p2:_}=zC(v,U,$,N);return L(C.beta,j,_,B,D)}else return O.unsafe(U,k)}multiplyAndAddUnsafe(k,C,U){const B=this.multiplyUnsafe(C).add(k.multiplyUnsafe(U));return B.is0()?void 0:B}toAffine(k){return y(this,k)}isTorsionFree(){const{isTorsionFree:k}=t;return i===Do?!0:k?k(v,this):O.unsafe(this,s).is0()}clearCofactor(){const{clearCofactor:k}=t;return i===Do?this:k?k(v,this):this.multiplyUnsafe(i)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}toBytes(k=!0){return ud("isCompressed",k),this.assertValidity(),d(v,this,k)}toRawBytes(k=!0){return this.toBytes(k)}toHex(k=!0){return Qe(this.toBytes(k))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}v.BASE=new v(e.Gx,e.Gy,r.ONE),v.ZERO=new v(r.ZERO,r.ONE,r.ZERO),v.Fp=r,v.Fn=n;const F=n.BITS,O=new DC(v,t.endo?Math.ceil(F/2):F);return v}function Yx(e){return Uint8Array.of(e?2:3)}function QC(e,t,r={}){Vd(t),$m(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=r.randomBytes||yu,i=r.hmac||((N,...j)=>xu(t,N,Lr(...j))),{Fp:s,Fn:o}=e,{ORDER:a,BITS:l}=o,u=Vx(a),d={secret:o.BYTES,public:1+s.BYTES,publicUncompressed:1+2*s.BYTES,signature:2*o.BYTES,seed:u};function f(N){const j=a>>Do;return N>j}function h(N){return f(N)?o.neg(N):N}function w(N,j){if(!o.isValidNot0(j))throw new Error(`invalid signature ${N}: out of range 1..CURVE.n`)}class E{constructor(j,_,H){w("r",j),w("s",_),this.r=j,this.s=_,H!=null&&(this.recovery=H),Object.freeze(this)}static fromBytes(j,_="compact"){if(_==="compact"){const H=o.BYTES;rn(j,H*2);const q=j.subarray(0,H),V=j.subarray(H,H*2);return new E(o.fromBytes(q),o.fromBytes(V))}if(_==="der"){rn(j);const{r:H,s:q}=On.toSig(j);return new E(H,q)}throw new Error("invalid format")}static fromHex(j,_){return this.fromBytes(ii(j),_)}addRecoveryBit(j){return new E(this.r,this.s,j)}recoverPublicKey(j){const _=s.ORDER,{r:H,s:q,recovery:V}=this;if(V==null||![0,1,2,3].includes(V))throw new Error("recovery id invalid");if(a*Qx<_&&V>1)throw new Error("recovery id is ambiguous for h>1 curve");const ee=V===2||V===3?H+a:H;if(!s.isValid(ee))throw new Error("recovery id 2 or 3 invalid");const oe=s.toBytes(ee),Le=e.fromHex(Lr(Yx((V&1)===0),oe)),le=o.inv(ee),be=F(lt("msgHash",j)),nt=o.create(-be*le),an=o.create(q*le),Ue=e.BASE.multiplyUnsafe(nt).add(Le.multiplyUnsafe(an));if(Ue.is0())throw new Error("point at infinify");return Ue.assertValidity(),Ue}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,o.neg(this.s),this.recovery):this}toBytes(j="compact"){if(j==="compact")return Lr(o.toBytes(this.r),o.toBytes(this.s));if(j==="der")return ii(On.hexFromSig(this));throw new Error("invalid format")}toHex(j){return Qe(this.toBytes(j))}assertValidity(){}static fromCompact(j){return E.fromBytes(lt("sig",j),"compact")}static fromDER(j){return E.fromBytes(lt("sig",j),"der")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Qe(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Qe(this.toBytes("compact"))}}function S(N){try{return!!ys(o,N)}catch{return!1}}function x(N,j){try{const _=N.length;return j===!0&&_!==d.public||j===!1&&_!==d.publicUncompressed?!1:!!e.fromBytes(N)}catch{return!1}}function p(N=n(u)){return qx(N,a)}const g={isValidSecretKey:S,isValidPublicKey:x,randomSecretKey:p,isValidPrivateKey:S,randomPrivateKey:p,normPrivateKeyToScalar:N=>ys(o,N),precompute(N=8,j=e.BASE){return j.precompute(N,!1)}};function y(N,j=!0){return e.BASE.multiply(ys(o,N)).toBytes(j)}function b(N){if(typeof N=="bigint")return!1;if(N instanceof e)return!0;if(o.allowedLengths||d.secret===d.public)return;const j=lt("key",N).length;return j===d.public||j===d.publicUncompressed}function L(N,j,_=!0){if(b(N)===!0)throw new Error("first arg must be private key");if(b(j)===!1)throw new Error("second arg must be public key");const H=ys(o,N);return e.fromHex(j).multiply(H).toBytes(_)}const v=r.bits2int||function(N){if(N.length>8192)throw new Error("input is too large");const j=Aa(N),_=N.length*8-l;return _>0?j>>BigInt(_):j},F=r.bits2int_modN||function(N){return o.create(v(N))},O=vu(l);function M(N){return Px("num < 2^"+l,N,Zn,O),o.toBytes(N)}function k(N,j,_=C){if(["recovered","canonical"].some(nt=>nt in _))throw new Error("sign() legacy options not supported");let{lowS:H,prehash:q,extraEntropy:V}=_;H==null&&(H=!0),N=lt("msgHash",N),iy(_),q&&(N=lt("prehashed msgHash",t(N)));const K=F(N),ee=ys(o,j),oe=[M(ee),M(K)];if(V!=null&&V!==!1){const nt=V===!0?n(d.secret):V;oe.push(lt("extraEntropy",nt))}const Le=Lr(...oe),le=K;function be(nt){const an=v(nt);if(!o.isValidNot0(an))return;const Ue=o.inv(an),yr=e.BASE.multiply(an).toAffine(),ln=o.create(yr.x);if(ln===Zn)return;const as=o.create(Ue*o.create(le+ln*ee));if(as===Zn)return;let un=(yr.x===ln?0:2)|Number(yr.y&Do),Ru=as;return H&&f(as)&&(Ru=h(as),un^=1),new E(ln,Ru,un)}return{seed:Le,k2sig:be}}const C={lowS:r.lowS,prehash:!1},U={lowS:r.lowS,prehash:!1};function B(N,j,_=C){const{seed:H,k2sig:q}=k(N,j,_);return SC(t.outputLen,o.BYTES,i)(H,q)}e.BASE.precompute(8);function $(N,j,_,H=U){const q=N;j=lt("msgHash",j),_=lt("publicKey",_),iy(H);const{lowS:V,prehash:K,format:ee}=H;if("strict"in H)throw new Error("options.strict was renamed to lowS");let oe,Le;if(ee===void 0){const le=typeof q=="string"||od(q),be=!le&&q!==null&&typeof q=="object"&&typeof q.r=="bigint"&&typeof q.s=="bigint";if(!le&&!be)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(be)oe=new E(q.r,q.s);else if(le){try{oe=E.fromDER(q)}catch(nt){if(!(nt instanceof On.Err))throw nt}if(!oe)try{oe=E.fromCompact(q)}catch{return!1}}}else if(ee==="compact"||ee==="der"){if(typeof q!="string"&&!od(q))throw new Error('"der" / "compact" format expects Uint8Array signature');oe=E.fromBytes(lt("sig",q),ee)}else if(ee==="js"){if(!(q instanceof E))throw new Error('"js" format expects Signature instance');oe=q}else throw new Error('format must be "compact", "der" or "js"');if(!oe)return!1;try{if(Le=e.fromHex(_),V&&oe.hasHighS())return!1;K&&(j=t(j));const{r:le,s:be}=oe,nt=F(j),an=o.inv(be),Ue=o.create(nt*an),yr=o.create(le*an),ln=e.BASE.multiplyUnsafe(Ue).add(Le.multiplyUnsafe(yr));return ln.is0()?!1:o.create(ln.x)===le}catch{return!1}}function D(N){const j=g.randomSecretKey(N);return{secretKey:j,publicKey:y(j)}}return Object.freeze({keygen:D,getPublicKey:y,sign:B,verify:$,getSharedSecret:L,utils:g,Point:e,Signature:E,info:{type:"weierstrass",lengths:d,publicKeyHasPrefix:!0}})}function YC(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r=e.Fp;let n=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=Eu(t.n,{BITS:e.nBitLength,allowedLengths:n,modOnDecode:e.wrapPrivateKey}),s={Fp:r,Fn:i,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:s}}function ZC(e){const{CURVE:t,curveOpts:r}=YC(e),n={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:r,hash:e.hash,ecdsaOpts:n}}function XC(e,t){return Object.assign({},t,{ProjectivePoint:t.Point,CURVE:e})}function JC(e){const{CURVE:t,curveOpts:r,hash:n,ecdsaOpts:i}=ZC(e),s=GC(t,r),o=QC(s,n,i);return XC(e,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function e3(e,t){const r=n=>JC({...e,hash:n});return{...r(t),create:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const si={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},t3={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Zx=BigInt(0),Yh=BigInt(1),Zh=BigInt(2);function Xx(e){const t=si.p,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%t,d=u*u*e%t,f=wr(d,r,t)*d%t,h=wr(f,r,t)*d%t,w=wr(h,Zh,t)*u%t,E=wr(w,i,t)*w%t,S=wr(E,s,t)*E%t,x=wr(S,a,t)*S%t,p=wr(x,l,t)*x%t,g=wr(p,a,t)*S%t,y=wr(g,r,t)*d%t,b=wr(y,o,t)*E%t,L=wr(b,n,t)*u%t,v=wr(L,Zh,t);if(!Xh.eql(Xh.sqr(v),e))throw new Error("Cannot find square root");return v}const Xh=Eu(si.p,void 0,void 0,{sqrt:Xx}),ro=e3({...si,Fp:Xh,lowS:!0,endo:t3},cd),sy={};function fd(e,...t){let r=sy[e];if(r===void 0){const n=cd(Uint8Array.from(e,i=>i.charCodeAt(0)));r=Lr(n,n),sy[e]=r}return cd(Lr(r,...t))}const Wm=e=>e.toBytes(!0).slice(1),Jh=e=>wu(e,32),$f=e=>Vt(e,si.p),Bl=e=>Vt(e,si.n),Ol=ro.Point,Vm=e=>e%Zh===Zx;function ep(e){let t=ys(Ol.Fn,e),r=Ol.BASE.multiply(t);return{scalar:Vm(r.y)?t:Bl(-t),bytes:Wm(r)}}function Jx(e){Px("x",e,Yh,si.p);const t=$f(e*e),r=$f(t*e+BigInt(7));let n=Xx(r);Vm(n)||(n=$f(-n));const i=Ol.fromAffine({x:e,y:n});return i.assertValidity(),i}const zo=Aa;function e1(...e){return Bl(zo(fd("BIP0340/challenge",...e)))}function oy(e){return ep(e).bytes}function r3(e,t,r=yu(32)){const n=lt("message",e),{bytes:i,scalar:s}=ep(t),o=lt("auxRand",r,32),a=Jh(s^zo(fd("BIP0340/aux",o))),l=fd("BIP0340/nonce",a,i,n),u=Bl(zo(l));if(u===Zx)throw new Error("sign failed: k is zero");const{bytes:d,scalar:f}=ep(u),h=e1(d,i,n),w=new Uint8Array(64);if(w.set(d,0),w.set(Jh(Bl(f+h*s)),32),!t1(w,n,i))throw new Error("sign: Invalid signature produced");return w}function t1(e,t,r){const n=lt("signature",e,64),i=lt("message",t),s=lt("publicKey",r,32);try{const o=Jx(zo(s)),a=zo(n.subarray(0,32));if(!Qh(a,Yh,si.p))return!1;const l=zo(n.subarray(32,64));if(!Qh(l,Yh,si.n))return!1;const u=e1(Jh(a),Wm(o),i),d=Ol.BASE.multiplyUnsafe(l).add(o.multiplyUnsafe(Bl(-u))),{x:f,y:h}=d.toAffine();return!(d.is0()||!Vm(h)||f!==a)}catch{return!1}}const hd=(()=>{const r=(i=yu(48))=>qx(i,si.n);ro.utils.randomSecretKey;function n(i){const s=r(i);return{secretKey:s,publicKey:oy(s)}}return{keygen:n,getPublicKey:oy,sign:r3,verify:t1,Point:Ol,utils:{randomSecretKey:r,randomPrivateKey:r,taggedHash:fd,lift_x:Jx,pointToBytes:Wm,numberToBytesBE:wu,bytesToNumberBE:Aa,mod:Vt},info:{type:"weierstrass",publicKeyHasPrefix:!1,lengths:{secret:32,public:32,signature:32*2,seed:48}}}})(),Vs=cd;/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Su(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function qm(e,...t){if(!Su(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function r1(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(r=>typeof r=="string"):t.every(r=>Number.isSafeInteger(r)):!1}function n1(e){if(typeof e!="function")throw new Error("function expected");return!0}function Ji(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function bu(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function pd(e){if(!Array.isArray(e))throw new Error("array expected")}function md(e,t){if(!r1(!0,t))throw new Error(`${e}: array of strings expected`)}function Km(e,t){if(!r1(!1,t))throw new Error(`${e}: array of numbers expected`)}function no(...e){const t=s=>s,r=(s,o)=>a=>s(o(a)),n=e.map(s=>s.encode).reduceRight(r,t),i=e.map(s=>s.decode).reduce(r,t);return{encode:n,decode:i}}function io(e){const t=typeof e=="string"?e.split(""):e,r=t.length;md("alphabet",t);const n=new Map(t.map((i,s)=>[i,s]));return{encode:i=>(pd(i),i.map(s=>{if(!Number.isSafeInteger(s)||s<0||s>=r)throw new Error(`alphabet.encode: digit index outside alphabet "${s}". Allowed: ${e}`);return t[s]})),decode:i=>(pd(i),i.map(s=>{Ji("alphabet.decode",s);const o=n.get(s);if(o===void 0)throw new Error(`Unknown letter: "${s}". Allowed: ${e}`);return o}))}}function so(e=""){return Ji("join",e),{encode:t=>(md("join.decode",t),t.join(e)),decode:t=>(Ji("join.decode",t),t.split(e))}}function Gm(e,t="="){return bu(e),Ji("padding",t),{encode(r){for(md("padding.encode",r);r.length*e%8;)r.push(t);return r},decode(r){md("padding.decode",r);let n=r.length;if(n*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if((n-1)*e%8===0)throw new Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function n3(e){return n1(e),{encode:t=>t,decode:t=>e(t)}}function ay(e,t,r){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(pd(e),!e.length)return[];let n=0;const i=[],s=Array.from(e,a=>{if(bu(a),a<0||a>=t)throw new Error(`invalid integer: ${a}`);return a}),o=s.length;for(;;){let a=0,l=!0;for(let u=n;u<o;u++){const d=s[u],f=t*a,h=f+d;if(!Number.isSafeInteger(h)||f/t!==a||h-d!==f)throw new Error("convertRadix: carry overflow");const w=h/r;a=h%r;const E=Math.floor(w);if(s[u]=E,!Number.isSafeInteger(E)||E*r+a!==h)throw new Error("convertRadix: carry overflow");if(l)E?l=!1:n=u;else continue}if(i.push(a),l)break}for(let a=0;a<e.length-1&&e[a]===0;a++)i.push(0);return i.reverse()}const i1=(e,t)=>t===0?e:i1(t,e%t),gd=(e,t)=>e+(t-i1(e,t)),kc=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function tp(e,t,r,n){if(pd(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(gd(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${gd(t,r)}`);let i=0,s=0;const o=kc[t],a=kc[r]-1,l=[];for(const u of e){if(bu(u),u>=o)throw new Error(`convertRadix2: invalid data word=${u} from=${t}`);if(i=i<<t|u,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=r;s-=r)l.push((i>>s-r&a)>>>0);const d=kc[s];if(d===void 0)throw new Error("invalid carry");i&=d-1}if(i=i<<r-s&a,!n&&s>=t)throw new Error("Excess padding");if(!n&&i>0)throw new Error(`Non-zero padding: ${i}`);return n&&s>0&&l.push(i>>>0),l}function i3(e){bu(e);const t=2**8;return{encode:r=>{if(!Su(r))throw new Error("radix.encode input should be Uint8Array");return ay(Array.from(r),t,e)},decode:r=>(Km("radix.decode",r),Uint8Array.from(ay(r,e,t)))}}function Ta(e,t=!1){if(bu(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(gd(8,e)>32||gd(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!Su(r))throw new Error("radix2.encode input should be Uint8Array");return tp(Array.from(r),8,e,!t)},decode:r=>(Km("radix2.decode",r),Uint8Array.from(tp(r,e,8,t)))}}function ly(e){return n1(e),function(...t){try{return e.apply(null,t)}catch{}}}const s3=no(Ta(4),io("0123456789ABCDEF"),so("")),o3=no(Ta(5),io("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Gm(5),so("")),s1=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",o1=(e,t)=>{Ji("base64",e);const r=t?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,n=t?"base64url":"base64";if(e.length>0&&!r.test(e))throw new Error("invalid base64");return Uint8Array.fromBase64(e,{alphabet:n,lastChunkHandling:"strict"})},kn=s1?{encode(e){return qm(e),e.toBase64()},decode(e){return o1(e,!1)}}:no(Ta(6),io("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Gm(6),so("")),a3=s1?{encode(e){return qm(e),e.toBase64({alphabet:"base64url"})},decode(e){return o1(e,!0)}}:no(Ta(6),io("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Gm(6),so("")),l3=e=>no(i3(58),io(e),so("")),rp=l3("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),uy=[0,2,3,5,6,7,9,10,11],u3={encode(e){let t="";for(let r=0;r<e.length;r+=8){const n=e.subarray(r,r+8);t+=rp.encode(n).padStart(uy[n.length],"1")}return t},decode(e){let t=[];for(let r=0;r<e.length;r+=11){const n=e.slice(r,r+11),i=uy.indexOf(n.length),s=rp.decode(n);for(let o=0;o<s.length-i;o++)if(s[o]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(t)}},np=no(io("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),so("")),cy=[996825010,642813549,513874426,1027748829,705979059];function Ga(e){const t=e>>25;let r=(e&33554431)<<5;for(let n=0;n<cy.length;n++)(t>>n&1)===1&&(r^=cy[n]);return r}function dy(e,t,r=1){const n=e.length;let i=1;for(let s=0;s<n;s++){const o=e.charCodeAt(s);if(o<33||o>126)throw new Error(`Invalid prefix (${e})`);i=Ga(i)^o>>5}i=Ga(i);for(let s=0;s<n;s++)i=Ga(i)^e.charCodeAt(s)&31;for(let s of t)i=Ga(i)^s;for(let s=0;s<6;s++)i=Ga(i);return i^=r,np.encode(tp([i%kc[30]],30,5,!1))}function c3(e){const t=e==="bech32"?1:734539939,r=Ta(5),n=r.decode,i=r.encode,s=ly(n);function o(f,h,w=90){Ji("bech32.encode prefix",f),Su(h)&&(h=Array.from(h)),Km("bech32.encode",h);const E=f.length;if(E===0)throw new TypeError(`Invalid prefix length ${E}`);const S=E+7+h.length;if(w!==!1&&S>w)throw new TypeError(`Length ${S} exceeds limit ${w}`);const x=f.toLowerCase(),p=dy(x,h,t);return`${x}1${np.encode(h)}${p}`}function a(f,h=90){Ji("bech32.decode input",f);const w=f.length;if(w<8||h!==!1&&w>h)throw new TypeError(`invalid string length: ${w} (${f}). Expected (8..${h})`);const E=f.toLowerCase();if(f!==E&&f!==f.toUpperCase())throw new Error("String must be lowercase or uppercase");const S=E.lastIndexOf("1");if(S===0||S===-1)throw new Error('Letter "1" must be present between prefix and data only');const x=E.slice(0,S),p=E.slice(S+1);if(p.length<6)throw new Error("Data must be at least 6 characters long");const g=np.decode(p).slice(0,-6),y=dy(x,g,t);if(!p.endsWith(y))throw new Error(`Invalid checksum in ${f}: expected "${y}"`);return{prefix:x,words:g}}const l=ly(a);function u(f){const{prefix:h,words:w}=a(f,!1);return{prefix:h,words:w,bytes:n(w)}}function d(f,h){return o(f,i(h))}return{encode:o,decode:a,encodeFromBytes:d,decodeToBytes:u,decodeUnsafe:l,fromWords:n,fromWordsUnsafe:s,toWords:i}}const _n=c3("bech32"),d3={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},f3=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",h3={encode(e){return qm(e),e.toHex()},decode(e){return Ji("hex",e),Uint8Array.fromHex(e)}},p3=f3?h3:no(Ta(4),io("0123456789abcdef"),so(""),n3(e=>{if(typeof e!="string"||e.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),fy={utf8:d3,hex:p3,base16:s3,base32:o3,base64:kn,base64url:a3,base58:rp,base58xmr:u3},m3="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",hy=(e,t)=>{if(typeof e!="string"||!fy.hasOwnProperty(e))throw new TypeError(m3);if(!Su(t))throw new TypeError("bytesToString() expects Uint8Array");return fy[e].encode(t)};function we(e){if(e==null)throw new Error("missing value");return e}function qd(e,t){if(typeof t!="string"||t.length===0||t.length%2!==0)return"";try{const r=ii(t);return _n.encode(e,_n.toWords(r))}catch(r){return console.warn("Invalid hex",t,r),""}}function bn(e){try{return new URL(e).toString()}catch{}}function Kd(){return Math.floor(ke()/1e3)}function ke(){return new Date().getTime()}function g3(e){return e*2*Math.random()-e}function y3(e,t){const r=Object.keys(e),n=Object.keys(t),i=r.length>n.length?r:n;let s=0;for(const o of i)if(o in e&&o in t)if(Array.isArray(e[o])&&Array.isArray(t[o])){const a=e[o],l=t[o];a.length===l.length?a.some(u=>!l.includes(u))&&s++:s++}else e[o]!==t[o]&&s++;else s+=10;return s}function Yr(e){return[...new Set(e)]}function ji(e,t){return Yr([...e??[],...t??[]])}const a1=e=>Qe(Vs(e));function Qm(e){return Qe(hd.getPublicKey(e))}function ip(e){const t=_n.decode(e,1e3),r=_n.fromWords(t.words);return Qe(Uint8Array.from(r))}function w3(e){const t=_n.decode(e,1e3),r=_n.fromWords(t.words);return new TextDecoder().decode(Uint8Array.from(r))}async function v3(e,t,r=2e3){if(!(!e||!t))try{const i=await(await fetch(`https://${t}/.well-known/nostr.json?name=${encodeURIComponent(e)}`,{signal:AbortSignal.timeout(r)})).json(),s=Object.keys(i.names).find(o=>o.toLowerCase()===e.toLowerCase());return s?i.names[s]:void 0}catch{}}function rt(e){return e.filter(t=>t!==void 0).map(t=>we(t))}class x3 extends Error{}function Il(){if(E3())throw new x3("Offline")}function E3(){return!("navigator"in globalThis&&globalThis.navigator.onLine)}function Hf(e){return[...e].map(t=>t.charCodeAt(0)).every(t=>t>=48&&t<=57||t>=65&&t<=90||t>=97||t<=122)}const S3="payRequest";class uo extends Error{constructor(t,r){super(r),this.code=t}}var zt,$t,Ed,l1;class b3{constructor(t){z(this,Ed);z(this,zt);z(this,$t);if(t=t.toLowerCase().trim(),t.startsWith("lnurl")){const r=w3(t);if(!r.startsWith("http"))throw new uo(2,"Not a url");T(this,zt,new URL(r))}else if(t.match(yC)){const[r,n]=t.split("@");T(this,zt,new URL(`https://${n}/.well-known/lnurlp/${r}`))}else if(t.startsWith("https:"))T(this,zt,new URL(t));else if(t.startsWith("lnurlp:")){const r=new URL(t);r.protocol="https:",T(this,zt,r)}else throw new uo(2,"Could not determine service url")}get url(){return c(this,zt)}get lnurl(){return this.isLNAddress?this.getLNAddress():c(this,zt).toString()}get name(){return this.isLNAddress?this.getLNAddress():c(this,zt).hostname}get isLNAddress(){return c(this,zt).pathname.startsWith("/.well-known/lnurlp/")}getLNAddress(){const t=c(this,zt).pathname.split("/");return`${t[t.length-1]}@${c(this,zt).hostname}`}async load(){Il();const t=await fetch(c(this,zt));t.ok&&(T(this,$t,await t.json()),R(this,Ed,l1).call(this))}async getInvoice(t,r,n){var l,u,d;Il();const i=new URL(we((l=c(this,$t))==null?void 0:l.callback)),s=new Map;i.search.length>0&&i.search.slice(1).split("&").forEach(f=>{const h=f.split("=");s.set(h[0],h[1])}),s.set("amount",Math.floor(t*1e3).toString()),r&&((u=c(this,$t))!=null&&u.commentAllowed)&&s.set("comment",r),(d=c(this,$t))!=null&&d.nostrPubkey&&n&&s.set("nostr",JSON.stringify(n));const o=`${i.protocol}//${i.host}${i.pathname}`,a=[...s.entries()].map(f=>`${f[0]}=${encodeURIComponent(f[1])}`).join("&");try{const f=await fetch(`${o}?${a}`);if(f.ok){const h=await f.json();if(h.status==="ERROR")throw new Error(h.reason);return h}else throw new uo(1,`Failed to fetch invoice (${f.statusText})`)}catch{throw new uo(1,"Failed to load callback")}}get canZap(){var t;return!!((t=c(this,$t))!=null&&t.nostrPubkey)}get zapperPubkey(){var t;return(t=c(this,$t))==null?void 0:t.nostrPubkey}get maxCommentLength(){var t;return((t=c(this,$t))==null?void 0:t.commentAllowed)??0}get min(){var t;return((t=c(this,$t))==null?void 0:t.minSendable)??1e3}get max(){var t;return((t=c(this,$t))==null?void 0:t.maxSendable)??1e11}}zt=new WeakMap,$t=new WeakMap,Ed=new WeakSet,l1=function(){var t,r;if(((t=c(this,$t))==null?void 0:t.tag)!==S3)throw new uo(2,"Only LNURLp is supported");if(!((r=c(this,$t))!=null&&r.callback))throw new uo(2,"No callback url")};async function u1(e,t=200){for(;e&&e.length>0;){const r=e.shift();if(r)try{const n=await r.next();r.resolve(n)}catch(n){r.reject(n)}}setTimeout(()=>u1(e,t),t)}const co=async(e,t)=>new Promise((r,n)=>{e.push({next:t,resolve:r,reject:n})});var Ho,Rs,Wo;class ku extends Fr{constructor(r,n){super();z(this,Ho);z(this,Rs);z(this,Wo);T(this,Ho,[]),T(this,Rs,0),T(this,Wo,0),this.onTable=new Set,this.cache=new Map,this.name=r,this.table=n,this.log=on(r),setInterval(()=>{this.log("%d loaded, %d on-disk, %d hooks, %d% hit",this.cache.size,this.onTable.size,this.listenerCount("change"),(c(this,Rs)/(c(this,Rs)+c(this,Wo))*100).toFixed(1))},3e4),this.on("change",()=>{T(this,Ho,this.takeSnapshot())})}async preload(){var r;if(this.onTable.size===0){const n=await((r=this.table)==null?void 0:r.toCollection().primaryKeys())??[];this.onTable=new Set(n.map(i=>i))}}hook(r,n){const i=s=>{(!n||s.includes(n))&&r()};return this.on("change",i),()=>this.off("change",i)}keysOnTable(){return[...this.onTable]}getFromCache(r){if(r){const n=this.cache.get(r);return n?fi(this,Rs)._++:fi(this,Wo)._++,n}}async get(r){if(r&&!this.cache.has(r)&&this.table){const n=await this.table.get(r);if(n)return this.cache.set(this.key(n),n),this.emit("change",[r]),n}return r?this.cache.get(r):void 0}async bulkGet(r){const n=r.filter(i=>!this.cache.has(i));return n.length>0&&this.table&&(await this.table.bulkGet(n)).forEach(s=>{s&&this.cache.set(this.key(s),s)}),rt(r.map(i=>this.cache.get(i)))}async set(r){const n=this.key(r);if(this.cache.set(n,r),this.table)try{await this.table.put(r),this.onTable.add(n)}catch(i){console.error(i)}this.emit("change",[n])}async bulkSet(r){if(this.table)try{await this.table.bulkPut(r),r.forEach(n=>this.onTable.add(this.key(n)))}catch(n){console.error(n)}r.forEach(n=>this.cache.set(this.key(n),n)),this.emit("change",r.map(n=>this.key(n)))}async update(r){const n=this.key(r),i=this.getFromCache(n),s=i?i.created<r.created?"updated":i&&i.loaded<r.loaded?"refresh":"no_change":"new";if(this.log("Updating %s %s %o",n,s,r),s!=="no_change"){const o={...i,...r};await this.set(o)}return s}async buffer(r){const n=r.filter(i=>!this.cache.has(i));if(this.table&&n.length>0){const i=n.map(a=>({has:this.onTable.has(a),key:a})),s=ke(),o=rt(await this.table.bulkGet(i.filter(a=>a.has).map(a=>a.key)));return o.forEach(a=>{this.cache.set(this.key(a),a)}),this.emit("change",o.map(a=>this.key(a))),this.log("Loaded %d/%d in %d ms",o.length,r.length,(ke()-s).toLocaleString()),i.filter(a=>!a.has).map(a=>a.key)}return n}async clear(){var r;await((r=this.table)==null?void 0:r.clear()),this.cache.clear(),this.onTable.clear()}snapshot(){return c(this,Ho)}}Ho=new WeakMap,Rs=new WeakMap,Wo=new WeakMap;var c1={};(function(e){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64url=e.base64=e.base32crockford=e.base32hex=e.base32=e.base16=e.utils=e.assertNumber=void 0;function t(C){if(!Number.isSafeInteger(C))throw new Error(`Wrong integer: ${C}`)}e.assertNumber=t;function r(...C){const U=(D,N)=>j=>D(N(j)),B=Array.from(C).reverse().reduce((D,N)=>D?U(D,N.encode):N.encode,void 0),$=C.reduce((D,N)=>D?U(D,N.decode):N.decode,void 0);return{encode:B,decode:$}}function n(C){return{encode:U=>{if(!Array.isArray(U)||U.length&&typeof U[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return U.map(B=>{if(t(B),B<0||B>=C.length)throw new Error(`Digit index outside alphabet: ${B} (alphabet: ${C.length})`);return C[B]})},decode:U=>{if(!Array.isArray(U)||U.length&&typeof U[0]!="string")throw new Error("alphabet.decode input should be array of strings");return U.map(B=>{if(typeof B!="string")throw new Error(`alphabet.decode: not string element=${B}`);const $=C.indexOf(B);if($===-1)throw new Error(`Unknown letter: "${B}". Allowed: ${C}`);return $})}}}function i(C=""){if(typeof C!="string")throw new Error("join separator should be string");return{encode:U=>{if(!Array.isArray(U)||U.length&&typeof U[0]!="string")throw new Error("join.encode input should be array of strings");for(let B of U)if(typeof B!="string")throw new Error(`join.encode: non-string input=${B}`);return U.join(C)},decode:U=>{if(typeof U!="string")throw new Error("join.decode input should be string");return U.split(C)}}}function s(C,U="="){if(t(C),typeof U!="string")throw new Error("padding chr should be string");return{encode(B){if(!Array.isArray(B)||B.length&&typeof B[0]!="string")throw new Error("padding.encode input should be array of strings");for(let $ of B)if(typeof $!="string")throw new Error(`padding.encode: non-string input=${$}`);for(;B.length*C%8;)B.push(U);return B},decode(B){if(!Array.isArray(B)||B.length&&typeof B[0]!="string")throw new Error("padding.encode input should be array of strings");for(let D of B)if(typeof D!="string")throw new Error(`padding.decode: non-string input=${D}`);let $=B.length;if($*C%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;$>0&&B[$-1]===U;$--)if(!(($-1)*C%8))throw new Error("Invalid padding: string has too much padding");return B.slice(0,$)}}}function o(C){if(typeof C!="function")throw new Error("normalize fn should be function");return{encode:U=>U,decode:U=>C(U)}}function a(C,U,B){if(U<2)throw new Error(`convertRadix: wrong from=${U}, base cannot be less than 2`);if(B<2)throw new Error(`convertRadix: wrong to=${B}, base cannot be less than 2`);if(!Array.isArray(C))throw new Error("convertRadix: data should be array");if(!C.length)return[];let $=0;const D=[],N=Array.from(C);for(N.forEach(j=>{if(t(j),j<0||j>=U)throw new Error(`Wrong integer: ${j}`)});;){let j=0,_=!0;for(let H=$;H<N.length;H++){const q=N[H],V=U*j+q;if(!Number.isSafeInteger(V)||U*j/U!==j||V-q!==U*j)throw new Error("convertRadix: carry overflow");if(j=V%B,N[H]=Math.floor(V/B),!Number.isSafeInteger(N[H])||N[H]*B+j!==V)throw new Error("convertRadix: carry overflow");if(_)N[H]?_=!1:$=H;else continue}if(D.push(j),_)break}for(let j=0;j<C.length-1&&C[j]===0;j++)D.push(0);return D.reverse()}const l=(C,U)=>U?l(U,C%U):C,u=(C,U)=>C+(U-l(C,U));function d(C,U,B,$){if(!Array.isArray(C))throw new Error("convertRadix2: data should be array");if(U<=0||U>32)throw new Error(`convertRadix2: wrong from=${U}`);if(B<=0||B>32)throw new Error(`convertRadix2: wrong to=${B}`);if(u(U,B)>32)throw new Error(`convertRadix2: carry overflow from=${U} to=${B} carryBits=${u(U,B)}`);let D=0,N=0;const j=2**B-1,_=[];for(const H of C){if(t(H),H>=2**U)throw new Error(`convertRadix2: invalid data word=${H} from=${U}`);if(D=D<<U|H,N+U>32)throw new Error(`convertRadix2: carry overflow pos=${N} from=${U}`);for(N+=U;N>=B;N-=B)_.push((D>>N-B&j)>>>0);D&=2**N-1}if(D=D<<B-N&j,!$&&N>=U)throw new Error("Excess padding");if(!$&&D)throw new Error(`Non-zero padding: ${D}`);return $&&N>0&&_.push(D>>>0),_}function f(C){return t(C),{encode:U=>{if(!(U instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return a(Array.from(U),2**8,C)},decode:U=>{if(!Array.isArray(U)||U.length&&typeof U[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(a(U,C,2**8))}}}function h(C,U=!1){if(t(C),C<=0||C>32)throw new Error("radix2: bits should be in (0..32]");if(u(8,C)>32||u(C,8)>32)throw new Error("radix2: carry overflow");return{encode:B=>{if(!(B instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return d(Array.from(B),8,C,!U)},decode:B=>{if(!Array.isArray(B)||B.length&&typeof B[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(d(B,C,8,U))}}}function w(C){if(typeof C!="function")throw new Error("unsafeWrapper fn should be function");return function(...U){try{return C.apply(null,U)}catch{}}}function E(C,U){if(t(C),typeof U!="function")throw new Error("checksum fn should be function");return{encode(B){if(!(B instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const $=U(B).slice(0,C),D=new Uint8Array(B.length+C);return D.set(B),D.set($,B.length),D},decode(B){if(!(B instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const $=B.slice(0,-C),D=U($).slice(0,C),N=B.slice(-C);for(let j=0;j<C;j++)if(D[j]!==N[j])throw new Error("Invalid checksum");return $}}}e.utils={alphabet:n,chain:r,checksum:E,radix:f,radix2:h,join:i,padding:s},e.base16=r(h(4),n("0123456789ABCDEF"),i("")),e.base32=r(h(5),n("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),s(5),i("")),e.base32hex=r(h(5),n("0123456789ABCDEFGHIJKLMNOPQRSTUV"),s(5),i("")),e.base32crockford=r(h(5),n("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),i(""),o(C=>C.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),e.base64=r(h(6),n("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),s(6),i("")),e.base64url=r(h(6),n("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s(6),i(""));const S=C=>r(f(58),n(C),i(""));e.base58=S("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=S("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=S("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const x=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(C){let U="";for(let B=0;B<C.length;B+=8){const $=C.subarray(B,B+8);U+=e.base58.encode($).padStart(x[$.length],"1")}return U},decode(C){let U=[];for(let B=0;B<C.length;B+=11){const $=C.slice(B,B+11),D=x.indexOf($.length),N=e.base58.decode($);for(let j=0;j<N.length-D;j++)if(N[j]!==0)throw new Error("base58xmr: wrong padding");U=U.concat(Array.from(N.slice(N.length-D)))}return Uint8Array.from(U)}};const p=C=>r(E(4,U=>C(C(U))),e.base58);e.base58check=p;const g=r(n("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),i("")),y=[996825010,642813549,513874426,1027748829,705979059];function b(C){const U=C>>25;let B=(C&33554431)<<5;for(let $=0;$<y.length;$++)(U>>$&1)===1&&(B^=y[$]);return B}function L(C,U,B=1){const $=C.length;let D=1;for(let N=0;N<$;N++){const j=C.charCodeAt(N);if(j<33||j>126)throw new Error(`Invalid prefix (${C})`);D=b(D)^j>>5}D=b(D);for(let N=0;N<$;N++)D=b(D)^C.charCodeAt(N)&31;for(let N of U)D=b(D)^N;for(let N=0;N<6;N++)D=b(D);return D^=B,g.encode(d([D%2**30],30,5,!1))}function v(C){const U=C==="bech32"?1:734539939,B=h(5),$=B.decode,D=B.encode,N=w($);function j(V,K,ee=90){if(typeof V!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof V}`);if(!Array.isArray(K)||K.length&&typeof K[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof K}`);const oe=V.length+7+K.length;if(ee!==!1&&oe>ee)throw new TypeError(`Length ${oe} exceeds limit ${ee}`);return V=V.toLowerCase(),`${V}1${g.encode(K)}${L(V,K,U)}`}function _(V,K=90){if(typeof V!="string")throw new Error(`bech32.decode input should be string, not ${typeof V}`);if(V.length<8||K!==!1&&V.length>K)throw new TypeError(`Wrong string length: ${V.length} (${V}). Expected (8..${K})`);const ee=V.toLowerCase();if(V!==ee&&V!==V.toUpperCase())throw new Error("String must be lowercase or uppercase");V=ee;const oe=V.lastIndexOf("1");if(oe===0||oe===-1)throw new Error('Letter "1" must be present between prefix and data only');const Le=V.slice(0,oe),le=V.slice(oe+1);if(le.length<6)throw new Error("Data must be at least 6 characters long");const be=g.decode(le).slice(0,-6),nt=L(Le,be,U);if(!le.endsWith(nt))throw new Error(`Invalid checksum in ${V}: expected "${nt}"`);return{prefix:Le,words:be}}const H=w(_);function q(V){const{prefix:K,words:ee}=_(V,!1);return{prefix:K,words:ee,bytes:$(ee)}}return{encode:j,decode:_,decodeToBytes:q,decodeUnsafe:H,fromWords:$,fromWordsUnsafe:N,toWords:D}}e.bech32=v("bech32"),e.bech32m=v("bech32m"),e.utf8={encode:C=>new TextDecoder().decode(C),decode:C=>new TextEncoder().encode(C)},e.hex=r(h(4),n("0123456789abcdef"),i(""),o(C=>{if(typeof C!="string"||C.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof C} with length ${C.length}`);return C.toLowerCase()}));const F={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},O=`Invalid encoding type. Available types: ${Object.keys(F).join(", ")}`,M=(C,U)=>{if(typeof C!="string"||!F.hasOwnProperty(C))throw new TypeError(O);if(!(U instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return F[C].encode(U)};e.bytesToString=M,e.str=e.bytesToString;const k=(C,U)=>{if(!F.hasOwnProperty(C))throw new TypeError(O);if(typeof U!="string")throw new TypeError("stringToBytes() expects string");return F[C].decode(U)};e.stringToBytes=k,e.bytes=e.stringToBytes})(c1);const{bech32:Z4,hex:X4,utf8:J4}=c1;BigInt(1e3),BigInt(1e6),BigInt(1e9),BigInt(1e12);BigInt("2100000000000000000");BigInt(1e11);const py={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27};for(let e=0,t=Object.keys(py);e<t.length;e++)t[e],py[t[e]].toString();class k3{constructor(t,r){this.map=new Map(t||[]),r?typeof r=="string"?this.compare=(n,i)=>n[1][r]>i[1][r]?1:n[1][r]<i[1][r]?-1:0:this.compare=r:this.compare=(n,i)=>n[0]>i[0]?1:n[0]<i[0]?-1:0,this.sortedKeys=t?[...this.map.entries()].sort(this.compare).map(([n])=>n):[]}binarySearch(t,r){let n=0,i=this.sortedKeys.length;for(;n<i;){const s=n+i>>1,o=this.sortedKeys[s],a=this.map.get(o);this.compare([t,r],[o,a])<0?i=s:n=s+1}return n}set(t,r){const n=this.map.has(t);if(this.map.set(t,r),n){const s=this.sortedKeys.indexOf(t);s!==-1&&this.sortedKeys.splice(s,1)}const i=this.binarySearch(t,r);this.sortedKeys.splice(i,0,t)}get(t){return this.map.get(t)}last(){if(this.sortedKeys.length===0)return;const t=this.sortedKeys[this.sortedKeys.length-1];return[t,this.map.get(t)]}first(){if(this.sortedKeys.length===0)return;const t=this.sortedKeys[0];return[t,this.map.get(t)]}*[Symbol.iterator](){for(const t of this.sortedKeys)yield[t,this.map.get(t)]}*reverse(){for(let t=this.sortedKeys.length-1;t>=0;t--){const r=this.sortedKeys[t];yield[r,this.map.get(r)]}}*keys(){for(const t of this.sortedKeys)yield t}*values(){for(const t of this.sortedKeys)yield this.map.get(t)}*entries(){for(const t of this.sortedKeys)yield[t,this.map.get(t)]}*range(t={}){const{gte:r,lte:n,direction:i="asc"}=t,s=r?this.binarySearch(r,this.map.get(r)):0,o=n?this.binarySearch(n,this.map.get(n)):this.sortedKeys.length;if(i==="asc")for(let a=s;a<o;a++){const l=this.sortedKeys[a];yield[l,this.map.get(l)]}else for(let a=o-1;a>=s;a--){const l=this.sortedKeys[a];yield[l,this.map.get(l)]}}has(t){return this.map.has(t)}delete(t){if(this.map.delete(t)){const r=this.sortedKeys.indexOf(t);return r!==-1&&this.sortedKeys.splice(r,1),!0}return!1}clear(){this.map.clear(),this.sortedKeys=[]}get size(){return this.map.size}}var vr,Sd,d1;class C3{constructor(t){z(this,Sd);z(this,vr);T(this,vr,t),setInterval(()=>{R(this,Sd,d1).call(this)},1e4)}async onEvent(t){const r=await c(this,vr).get(t);r&&(r.events++,r.lastSeen=ke())}async onConnect(t){const r=await c(this,vr).get(t);r?(r.connects++,r.lastSeen=ke()):await c(this,vr).set({addr:t,connects:1,disconnects:0,events:0,lastSeen:ke(),latency:[]})}async onDisconnect(t,r){const n=await c(this,vr).get(t);n?n.disconnects++:await c(this,vr).set({addr:t,connects:0,disconnects:1,events:0,lastSeen:ke(),latency:[]})}onTraceReport(t){const r=c(this,vr).getFromCache(t.conn.address);r&&(r.latency.push(t.responseTime),r.latency=r.latency.slice(-50))}}vr=new WeakMap,Sd=new WeakSet,d1=async function(){const t=c(this,vr).snapshot();await c(this,vr).bulkSet(t)};const N3=2e3,R3=/(#[^\s!@#$%^&*()=+.\/,\[{\]};:'"?><]+)/g,L3=1e3*60*60*6,f1=1e3*60*60*12,j3=/@n(pub|profile|event|ote|addr|)1[acdefghjklmnpqrstuvwxyz023456789]+/g;class _3{forAllRequest(t){return[...t.map(n=>this.forRequest(n)).reduce((n,i)=>{var s;for(const o of i)for(const a of(((s=o.relays)==null?void 0:s.length)??0)>0?we(o.relays):[""]){const l=n.get(a);l?l.push(o):n.set(a,[o])}return n},new Map).values()].flat()}}var In,_i,Hl;const n0=class n0 extends _3{constructor(r,n){super();z(this,In,on("OutboxModel"));z(this,_i);z(this,Hl);T(this,_i,r),T(this,Hl,n)}static fromSystem(r){return new n0(r.relayCache,r)}pickTopRelays(r,n,i){const s=r.map(d=>{var f,h;return{key:d,relays:(h=(f=c(this,_i).getFromCache(d))==null?void 0:f.relays)==null?void 0:h.filter(w=>i==="write"?w.settings.write:w.settings.read).sort(()=>Math.random()<.5?1:-1)}}),o=s.filter(d=>d.relays===void 0||d.relays.length===0),a=s.filter(d=>d.relays!==void 0&&d.relays.length>0),u=[...a.reduce((d,f)=>{for(const h of we(f.relays))d.has(h.url)?we(d.get(h.url)).add(f.key):d.set(h.url,new Set([f.key]));return d},new Map).entries()].sort(([,d],[,f])=>f.size-d.size);return o.length>0&&c(this,In).call(this,"No relay metadata found, outbox model will not work for %O",o),a.map(d=>{const f=u.filter(([,h])=>h.has(d.key)).slice(0,n).map(([h])=>h);return{key:d.key,relays:f}}).concat(o.map(d=>({key:d.key,relays:[]})))}forRequest(r,n){const i=r["#p"]!==void 0?"inbox":"outbox",s=r["#p"]!==void 0?"#p":"authors",o=r[s];if(((o==null?void 0:o.length)??0)===0)return[r];const a=this.pickTopRelays(we(o),n??rc,i==="inbox"?"read":"write"),u=Yr(a.flatMap(f=>f.relays)).map(f=>{const h=Yr(a.filter(w=>w.relays.includes(f)).map(w=>w.key));return{...r,[s]:h,relays:ji(r.relays,[f])}}),d=Yr(a.filter(f=>f.relays.length===0).map(f=>f.key));return d.length>0&&u.push({...r,[s]:d}),c(this,In).call(this,"Picked: pattern=%s, input=%O, output=%O",i,r,u),u}forFlatRequest(r,n){const i=rt(r.flatMap(u=>u.authors));if(i.length===0)return r;const s=this.pickTopRelays(i,n??rc,"write"),a=Yr(s.flatMap(u=>u.relays)).flatMap(u=>{const d=new Set(s.filter(f=>f.relays.includes(u)).map(f=>f.key));return r.filter(f=>f.authors&&d.has(f.authors)).flatMap(f=>f.relay?[f,{...f,relay:u}]:(f.relay=u,[f]))}),l=new Set(s.filter(u=>u.relays.length===0).map(u=>u.key));return l.size>0&&a.push(...r.filter(u=>!u.authors||l.has(u.authors))),c(this,In).call(this,"Picked: pattern=%s, input=%O, output=%O","outbox",r,a),a}async forReply(r,n){const i=Yr([r.pubkey,...r.tags.filter(a=>a[0]==="p").map(a=>a[1])]);await this.updateRelayLists(i);const s=this.pickTopRelays(i,n??rc,"read"),o=rt(Yr(s.map(a=>a.relays).flat()));return c(this,In).call(this,"Picked: pattern=%s, input=%O, output=%O","inbox",r,o),o}async forReplyTo(r,n){const i=[r];await this.updateRelayLists(i);const s=this.pickTopRelays(i,n??rc,"read"),o=rt(Yr(s.map(a=>a.relays).flat()));return c(this,In).call(this,"Picked: pattern=%s, input=%s, output=%O","inbox",r,o),o}async updateRelayLists(r){await c(this,_i).buffer(r);const n=ke()-f1,i=r.filter(s=>{var o;return(((o=c(this,_i).getFromCache(s))==null?void 0:o.loaded)??0)<n});if(i.length>0){c(this,In).call(this,"Updating relays for authors: %O",i);const s=new Cu("system-update-relays-for-outbox");s.withFilter().authors(i).kinds([he.Relays,he.ContactList]);const o=await c(this,Hl).Fetch(s);await c(this,_i).bulkSet(rt(o.map(a=>{const l=m1(a);if(l)return{relays:l,pubkey:a.pubkey,created:a.created_at,loaded:ke()}})))}}};In=new WeakMap,_i=new WeakMap,Hl=new WeakMap;let sp=n0;var Wl,Ls,Vl,Vo,Xs,op,p1;class h1{constructor(t,r){z(this,Xs);z(this,Wl);z(this,Ls,on(this.name()));z(this,Vl,new Set);z(this,Vo,new Set);T(this,Wl,t),this.cache=r,R(this,Xs,op).call(this)}TrackKeys(t){for(const r of Array.isArray(t)?t:[t])c(this,Vo).add(r)}UntrackKeys(t){for(const r of Array.isArray(t)?t:[t])c(this,Vo).delete(r)}async fetch(t){const r=this.cache.get(t);return r||await new Promise((n,i)=>{this.TrackKeys(t);const s=o=>{if(o.includes(t)){const a=this.cache.getFromCache(t);a?(n(a),this.UntrackKeys(t),this.cache.off("change",s)):i(new Error("Not found"))}};this.cache.on("change",s)})}}Wl=new WeakMap,Ls=new WeakMap,Vl=new WeakMap,Vo=new WeakMap,Xs=new WeakSet,op=async function(){const t=[...c(this,Vo)].filter(n=>!c(this,Vl).has(n));await this.cache.buffer(t);const r=t.filter(n=>{var i;return(((i=this.cache.getFromCache(n))==null?void 0:i.loaded)??0)<this.getExpireCutoff()});if(r.length>0){c(this,Ls).call(this,"Fetching keys: %O",r);try{const n=await R(this,Xs,p1).call(this,r),i=rt(r.filter(s=>!n.some(o=>s===this.cache.key(o))));i.length>0&&i.forEach(s=>c(this,Vl).add(s))}catch(n){c(this,Ls).call(this,"Error: %O",n)}}setTimeout(()=>R(this,Xs,op).call(this),500)},p1=async function(t){if(c(this,Ls).call(this,"Loading data",t),this.loaderFn){const r=await this.loaderFn(t);return await Promise.all(r.map(n=>this.cache.update(n))),r}else{const r=await c(this,Wl).Fetch(this.buildSub(t));c(this,Ls).call(this,"Got data",r);const n=rt(r.map(this.onEvent));return await Promise.all(n.map(i=>this.cache.update(i))),n}};class A3 extends h1{name(){return"RelayMetadataLoader"}onEvent(t){try{const r=m1(t);return r?{relays:r,pubkey:t.pubkey,created:t.created_at,loaded:ke()}:void 0}catch{}}getExpireCutoff(){return ke()-f1}buildSub(t){const r=new Cu("relay-loader");return r.withOptions({timeout:1e4,outboxPickN:4}),r.withFilter().authors(t).kinds([he.Relays,he.ContactList]),r}}const rc=2;function T3(e){if(e[0]!=="r")return;const t=bn(e[1]);if(t)return{url:t,settings:{read:e[2]==="read"||e[2]===void 0,write:e[2]==="write"||e[2]===void 0}}}function P3(e){return rt(e.map(T3))}function m1(e){if(e.kind===he.ContactList){const t=e.content.length>0?JSON.parse(e.content):void 0;if(t)return rt(Object.entries(t).map(([r,n])=>{const i=bn(r);if(i)return{url:i,settings:{read:n.read,write:n.write}}}))}else if(e.kind===he.Relays)return P3(e.tags)}function U3(e){const t=["r",e.url];if(e.settings.read&&!e.settings.write&&t.push("read"),e.settings.write&&!e.settings.read&&t.push("write"),e.settings.read||e.settings.write)return t}let nc;const F3=new Uint8Array(16);function M3(){if(!nc&&(nc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!nc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nc(F3)}const ht=[];for(let e=0;e<256;++e)ht.push((e+256).toString(16).slice(1));function B3(e,t=0){return ht[e[t+0]]+ht[e[t+1]]+ht[e[t+2]]+ht[e[t+3]]+"-"+ht[e[t+4]]+ht[e[t+5]]+"-"+ht[e[t+6]]+ht[e[t+7]]+"-"+ht[e[t+8]]+ht[e[t+9]]+"-"+ht[e[t+10]]+ht[e[t+11]]+ht[e[t+12]]+ht[e[t+13]]+ht[e[t+14]]+ht[e[t+15]]}const O3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),my={randomUUID:O3};function qs(e,t,r){if(my.randomUUID&&!e)return my.randomUUID();e=e||{};const n=e.random||(e.rng||M3)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,B3(n)}var po=null;typeof WebSocket<"u"?po=WebSocket:typeof MozWebSocket<"u"?po=MozWebSocket:typeof global<"u"?po=global.WebSocket||global.MozWebSocket:typeof window<"u"?po=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(po=self.WebSocket||self.MozWebSocket);const ic=po;var he=(e=>(e[e.Unknown=-1]="Unknown",e[e.SetMetadata=0]="SetMetadata",e[e.TextNote=1]="TextNote",e[e.RecommendServer=2]="RecommendServer",e[e.ContactList=3]="ContactList",e[e.DirectMessage=4]="DirectMessage",e[e.Deletion=5]="Deletion",e[e.Repost=6]="Repost",e[e.Reaction=7]="Reaction",e[e.BadgeAward=8]="BadgeAward",e[e.SimpleChatMessage=9]="SimpleChatMessage",e[e.SealedRumor=13]="SealedRumor",e[e.ChatRumor=14]="ChatRumor",e[e.Photo=20]="Photo",e[e.Video=21]="Video",e[e.ShortVideo=22]="ShortVideo",e[e.PublicChatChannel=40]="PublicChatChannel",e[e.PublicChatMetadata=41]="PublicChatMetadata",e[e.PublicChatMessage=42]="PublicChatMessage",e[e.PublicChatMuteMessage=43]="PublicChatMuteMessage",e[e.PublicChatMuteUser=44]="PublicChatMuteUser",e[e.SnortSubscriptions=1e3]="SnortSubscriptions",e[e.Comment=1111]="Comment",e[e.Polls=6969]="Polls",e[e.GiftWrap=1059]="GiftWrap",e[e.FileHeader=1063]="FileHeader",e[e.Relays=10002]="Relays",e[e.Ephemeral=2e4]="Ephemeral",e[e.Auth=22242]="Auth",e[e.MuteList=1e4]="MuteList",e[e.PinList=10001]="PinList",e[e.BookmarksList=10003]="BookmarksList",e[e.CommunitiesList=10004]="CommunitiesList",e[e.PublicChatsList=10005]="PublicChatsList",e[e.BlockedRelaysList=10006]="BlockedRelaysList",e[e.SearchRelaysList=10007]="SearchRelaysList",e[e.InterestsList=10015]="InterestsList",e[e.EmojisList=10030]="EmojisList",e[e.BlossomServerList=10063]="BlossomServerList",e[e.StorageServerList=10096]="StorageServerList",e[e.FollowSet=3e4]="FollowSet",e[e.RelaySet=30002]="RelaySet",e[e.BookmarkSet=30003]="BookmarkSet",e[e.CurationSet=30004]="CurationSet",e[e.InterestSet=30015]="InterestSet",e[e.EmojiSet=30030]="EmojiSet",e[e.StarterPackSet=39089]="StarterPackSet",e[e.Badge=30009]="Badge",e[e.ProfileBadges=30008]="ProfileBadges",e[e.LongFormTextNote=30023]="LongFormTextNote",e[e.AppData=30078]="AppData",e[e.LiveEvent=30311]="LiveEvent",e[e.LiveEventChat=1311]="LiveEventChat",e[e.UserStatus=30315]="UserStatus",e[e.ZapstrTrack=31337]="ZapstrTrack",e[e.ApplicationHandler=31990]="ApplicationHandler",e[e.SimpleChatMetadata=39e3]="SimpleChatMetadata",e[e.ZapRequest=9734]="ZapRequest",e[e.ZapReceipt=9735]="ZapReceipt",e[e.HttpAuthentication=27235]="HttpAuthentication",e))(he||{});function I3(e,t){let r=0,n=e.tags.findIndex(i=>i[0]==="nonce");n===-1&&(n=e.tags.length,e.tags.push(["nonce",r.toString(),t.toString()]));do e.tags[n][1]=(++r).toString(),e.id=D3(e);while(z3(e.id)<t);return e}function D3(e){const t=[0,e.pubkey,e.created_at,e.kind,e.tags,e.content];return Qe(Vs(JSON.stringify(t)))}function z3(e){let t=0;for(let r=0;r<e.length;r++){const n=parseInt(e[r],16);if(n===0)t+=4;else{t+=Math.clz32(n)-28;break}}return t}function es(e,t){const r=e.tags.find(n=>n[0]===t);return r&&r[1]}function $3(e,t){return e.keys===t.keys&&e.since===t.since&&e.until===t.until&&e.limit===t.limit&&e.search===t.search&&e.ids===t.ids&&e.kinds===t.kinds&&e.authors===t.authors&&e["#e"]===t["#e"]&&e["#p"]===t["#p"]&&e["#t"]===t["#t"]&&e["#d"]===t["#d"]&&e["#r"]===t["#r"]}var ap=(e=>(e[e.Regular=0]="Regular",e[e.Replaceable=1]="Replaceable",e[e.Addressable=2]="Addressable",e))(ap||{});class Lt{static getRootPubKey(t){const r=t.tags.find(n=>n[0]==="delegation");return r!=null&&r[1]?r[1]:t.pubkey}static sign(t,r){t.pubkey=Qm(r),t.id=this.createId(t);const n=hd.sign(t.id,r);return t.sig=Qe(n),t}static verify(t){var i;if((((i=t.sig)==null?void 0:i.length)??0)<64)return!1;const r=this.createId(t);return hd.verify(t.sig,r,t.pubkey)}static createId(t){const r=[0,t.pubkey,t.created_at,t.kind,t.tags,t.content];return a1(JSON.stringify(r))}static minePow(t,r){return I3(t,r)}static forPubKey(t,r){return{pubkey:t,kind:r,created_at:Kd(),content:"",tags:[],id:"",sig:""}}static parseTag(t){if(t.length<1)throw new Error("Invalid tag, must have more than 2 items");const r={key:t[0],value:t[1]};switch(r.key){case"a":{r.relay=t[2],r.marker=t[3];break}case"e":{r.relay=t[2],r.marker=t[3],r.author=t[4];break}}return r}static extractThread(t){const r={mentions:[],pubKeys:[]},n=t.tags.filter(i=>i[0]==="e"||i[0]==="a").map(i=>Lt.parseTag(i));if(n.length>0)if(!n.some(s=>s.marker))r.root=n[0],r.root.marker="root",n.length>1&&(r.replyTo=n[n.length-1],r.replyTo.marker="reply"),n.length>2&&(r.mentions=n.slice(1,-1),r.mentions.forEach(s=>s.marker="mention"));else{const s=n.find(a=>a.marker==="root"),o=n.find(a=>a.marker==="reply");r.root=s,r.replyTo=o,r.mentions=n.filter(a=>a.marker==="mention")}else return;return r.pubKeys=Array.from(new Set(t.tags.filter(i=>i[0]==="p").map(i=>i[1]))),r}static fixupEvent(t){t.tags??(t.tags=[]),t.created_at??(t.created_at=0),t.content??(t.content=""),t.id??(t.id=""),t.kind??(t.kind=0),t.pubkey??(t.pubkey=""),t.sig??(t.sig="")}static getType(t){const r=[0,3,41];return t>=3e4&&t<4e4?2:t>=1e4&&t<2e4||r.includes(t)?1:0}static isReplaceable(t){const r=Lt.getType(t);return r===1||r===2}static isValid(t){return Lt.getType(t.kind)===2&&!es(t,"d")?!1:t.sig!==void 0}}var qe,js,_s,Ai,qo,Ti,Pi,At,Dn,Ko,Go,fe,y1,w1,v1,x1,E1,S1,lp,b1,mo,Cc,Nc,k1,up,cp;class g1 extends Fr{constructor(r,n,i=!1,s){super();z(this,fe);z(this,qe);z(this,js);z(this,_s);z(this,Ai);z(this,qo);z(this,Ti);z(this,Pi);z(this,At);z(this,Dn);z(this,Ko);z(this,Go);T(this,_s,ke()),T(this,Ai,!1),T(this,Ti,!1),T(this,Pi,0),T(this,At,new Set),T(this,Dn,!1),T(this,Go,!1),this.Socket=null,this.PendingRaw=[],this.PendingRequests=[],this.ConnectTimeout=N3,this.HasStateChange=!0,this.Authed=!1,this.id=qs(),this.address=r,this.settings=n,this.EventsCallback=new Map,this.AwaitingAuth=new Map,T(this,qo,i),T(this,Ko,s),T(this,qe,on("Connection").extend(r))}get ephemeral(){return c(this,qo)}set ephemeral(r){T(this,qo,r),R(this,fe,cp).call(this)}get isOpen(){var r;return((r=this.Socket)==null?void 0:r.readyState)===ic.OPEN}get isConnecting(){var r;return((r=this.Socket)==null?void 0:r.readyState)===ic.CONNECTING}get isDown(){return c(this,Pi)>0}get ActiveRequests(){return[...c(this,At)]}async connect(r=!1){if(!(this.isOpen||this.isConnecting)&&!this.ReconnectTimer&&!c(this,Dn)){T(this,Dn,!0);try{if(this.info===void 0){const n=new URL(this.address),i=await fetch(`${n.protocol==="wss:"?"https:":"http:"}//${n.host}`,{headers:{accept:"application/nostr+json"}});if(i.ok){const s=await i.json();for(const[o,a]of Object.entries(s))(a==="unset"||a===""||a==="~")&&(s[o]=void 0);this.info=s}}}catch{}try{const n=this.Socket!==null;this.Socket&&(this.id=qs(),this.isOpen&&this.Socket.close(),this.Socket.onopen=null,this.Socket.onmessage=null,this.Socket.onerror=null,this.Socket.onclose=null,this.Socket=null),this.Socket=new ic(this.address),this.Socket.onopen=()=>R(this,fe,y1).call(this,n),this.Socket.onmessage=i=>R(this,fe,x1).call(this,i),this.Socket.onerror=i=>R(this,fe,E1).call(this,i),this.Socket.onclose=i=>R(this,fe,w1).call(this,i),r&&await new Promise((i,s)=>{this.once("connected",i),this.once("disconnect",s)})}catch(n){throw T(this,Dn,!1),n}}}close(){var r;T(this,Ti,!0),(r=this.Socket)==null||r.close()}sendEvent(r){this.settings.write&&(R(this,fe,mo).call(this,["EVENT",r]),this.emit("change"))}async publish(r,n=5e3){return await new Promise((i,s)=>{if(!this.settings.write){s(new Error("Not a write relay"));return}if(this.EventsCallback.has(r.id)){i({ok:!1,id:r.id,relay:this.address,message:"Duplicate request",event:r});return}const o=setTimeout(()=>{this.EventsCallback.delete(r.id),i({ok:!1,id:r.id,relay:this.address,message:"Timeout waiting for OK response",event:r})},n);this.EventsCallback.set(r.id,a=>{clearTimeout(o);const[l,u,d,f]=a;i({ok:d,id:u,relay:this.address,message:f,event:r})}),R(this,fe,mo).call(this,["EVENT",r]),this.emit("change")})}supportsNip(r){var n,i;return((i=(n=this.info)==null?void 0:n.supported_nips)==null?void 0:i.some(s=>s===r))??!1}request(r,n){const i=r[0]==="REQ"?r.slice(2):r.slice(3),s=new Set(i.flatMap(a=>a.kinds??[]));[he.DirectMessage,he.GiftWrap].some(a=>s.has(a))&&!c(this,Ai)&&(T(this,Ai,!0),c(this,qe).call(this,"Setting expectAuth flag %o",s)),c(this,At).size>=c(this,fe,up)?(this.PendingRequests.push({obj:r,cb:n}),c(this,qe).call(this,"Queuing: %O",r)):(R(this,fe,lp).call(this,{obj:r,cb:n}),n==null||n()),this.emit("change")}closeRequest(r){c(this,At).delete(r)&&(R(this,fe,mo).call(this,["CLOSE",r]),this.emit("eose",r),R(this,fe,S1).call(this),this.emit("change"))}sendRaw(r){R(this,fe,mo).call(this,r)}}qe=new WeakMap,js=new WeakMap,_s=new WeakMap,Ai=new WeakMap,qo=new WeakMap,Ti=new WeakMap,Pi=new WeakMap,At=new WeakMap,Dn=new WeakMap,Ko=new WeakMap,Go=new WeakMap,fe=new WeakSet,y1=function(r){T(this,Pi,0),T(this,Dn,!1),T(this,Go,!0),c(this,qe).call(this,"Open!"),R(this,fe,cp).call(this),this.emit("connected",r),R(this,fe,Cc).call(this)},w1=function(r){c(this,Go)&&!c(this,Ti)?(fi(this,Pi)._++,R(this,fe,v1).call(this,r)):(c(this,qe).call(this,`Closed: connecting=${c(this,Dn)}, closing=${c(this,Ti)}`),T(this,Pi,0),this.ReconnectTimer&&(clearTimeout(this.ReconnectTimer),this.ReconnectTimer=void 0)),this.emit("disconnect",r.code),R(this,fe,b1).call(this)},v1=function(r){this.ReconnectTimer&&(clearTimeout(this.ReconnectTimer),this.ReconnectTimer=void 0),this.ConnectTimeout=this.ConnectTimeout*2,c(this,qe).call(this,`Closed (code=${r.code}), trying again in ${(this.ConnectTimeout/1e3).toFixed(0).toLocaleString()} sec`),this.ReconnectTimer=setTimeout(()=>{this.ReconnectTimer=void 0;try{this.connect()}catch{}},this.ConnectTimeout)},x1=function(r){if(T(this,_s,ke()),r.data.length>0){const n=JSON.parse(r.data);switch(n[0]){case"AUTH":{c(this,Ai)?R(this,fe,k1).call(this,n[1]).then(()=>R(this,fe,Cc).call(this)).catch(c(this,qe)):c(this,qe).call(this,"Ignoring unexpected AUTH request");break}case"EVENT":{const s={...n[2],relays:[this.address]};if(!Lt.isValid(s)){c(this,qe).call(this,"Rejecting invalid event %O",s);return}this.emit("event",n[1],s);break}case"EOSE":{this.emit("eose",n[1]);break}case"OK":{c(this,qe).call(this,"OK: %O",n);const s=n[1],o=this.EventsCallback.get(s);o&&(this.EventsCallback.delete(s),o(n));break}case"NOTICE":{this.emit("notice",n[1]),c(this,qe).call(this,`NOTICE: ${n[1]}`);break}case"CLOSED":{this.emit("closed",n[1],n[2]),c(this,qe).call(this,`CLOSED: ${n.slice(1)}`);break}default:{this.emit("unknownMessage",n);break}}}},E1=function(r){c(this,qe).call(this,"Error: %O",r),this.emit("change"),this.emit("error")},S1=function(){const r=c(this,fe,up)-c(this,At).size;if(r>0)for(let n=0;n<r;n++){const i=this.PendingRequests.shift();i&&(R(this,fe,lp).call(this,i),c(this,qe).call(this,"Sent pending REQ %O",i.obj))}},lp=function(r){try{const n=r.obj;if(n[0]==="REQ")c(this,At).add(n[1]),R(this,fe,mo).call(this,n);else if(n[0]==="SYNC"){if(!c(this,Ko))throw new Error("no sync module");c(this,Ko).sync(this,n,r.cb)}}catch(n){console.error(n)}},b1=function(){this.id=qs(),T(this,Ai,!1),c(this,qe).call(this,"Reset active=%O, pending=%O, raw=%O",[...c(this,At)],[...this.PendingRequests],[...this.PendingRaw]);for(const r of c(this,At))this.emit("closed",r,"connection closed");for(const r of this.PendingRequests)this.emit("closed",r.obj[1],"connection closed");for(const r of this.PendingRaw)Array.isArray(r)&&r[0]==="REQ"&&this.emit("closed",r[1],"connection closed");c(this,At).clear(),this.PendingRequests=[],this.PendingRaw=[],this.emit("change")},mo=function(r){var i,s;const n=!this.Authed&&(this.AwaitingAuth.size>0||((s=(i=this.info)==null?void 0:i.limitation)==null?void 0:s.auth_required)===!0);if(!this.isOpen||n)return this.PendingRaw.push(r),!1;R(this,fe,Cc).call(this),R(this,fe,Nc).call(this,r)},Cc=function(){for(;this.PendingRaw.length>0;){const r=this.PendingRaw.shift();r&&R(this,fe,Nc).call(this,r)}},Nc=function(r){var i,s;if(((i=this.Socket)==null?void 0:i.readyState)!==ic.OPEN)throw new Error(`Socket is not open, state is ${(s=this.Socket)==null?void 0:s.readyState}`);const n=JSON.stringify(r);return T(this,_s,ke()),this.Socket.send(n),!0},k1=async function(r){const n=()=>{this.AwaitingAuth.delete(r)};this.AwaitingAuth.set(r,!0);const i=await new Promise((s,o)=>this.emit("auth",r,this.address,s));if(c(this,qe).call(this,"Auth result: %o",i),!i)throw n(),new Error("No auth event");return await new Promise(s=>{const o=setTimeout(()=>{n(),s()},1e4);this.EventsCallback.set(i.id,a=>{clearTimeout(o),n(),a.length>3&&a[2]===!0&&(this.Authed=!0),s()}),R(this,fe,Nc).call(this,["AUTH",i])})},up=function(){var r,n;return((n=(r=this.info)==null?void 0:r.limitation)==null?void 0:n.max_subscriptions)??20},cp=function(){c(this,js)&&(clearInterval(c(this,js)),T(this,js,void 0)),this.ephemeral&&T(this,js,setInterval(()=>{ke()-c(this,_s)>1e4&&!c(this,Ti)&&(c(this,At).size>0?c(this,qe).call(this,"Inactive connection has %d active requests! %O",c(this,At).size,c(this,At)):this.close())},5e3))};const H3=[];class W3 extends Fr{}var ql,Qo,Yo;class V3 extends W3{constructor(){super(...arguments);z(this,ql,[]);z(this,Qo);z(this,Yo,[])}get snapshot(){return c(this,ql)}onChange(r){T(this,ql,this.takeSnapshot()??[]),c(this,Yo).push(...r),c(this,Qo)||T(this,Qo,setTimeout(()=>{T(this,Qo,void 0),this.emit("event",c(this,Yo)),T(this,Yo,[])},300))}}ql=new WeakMap,Qo=new WeakMap,Yo=new WeakMap;var Kl,As;class q3 extends V3{constructor(r){super();z(this,Kl);z(this,As,new k3([],(r,n)=>n[1].created_at-r[1].created_at));T(this,Kl,r)}add(r){r=Array.isArray(r)?r:[r];const n=[];r.forEach(i=>{const s=c(this,Kl).call(this,i),o=c(this,As).get(s);i.created_at>((o==null?void 0:o.created_at)??0)&&(o&&(i.relays=ji(o.relays,i.relays)),c(this,As).set(s,i),n.push(i))}),n.length>0&&this.onChange(n)}clear(){c(this,As).clear(),this.onChange([])}takeSnapshot(){return[...c(this,As).values()]}}Kl=new WeakMap,As=new WeakMap;class C1 extends q3{constructor(){super(t=>{switch(Lt.getType(t.kind)){case ap.Addressable:return`${t.kind}:${t.pubkey}:${es(t,"d")}`;case ap.Replaceable:return`${t.kind}:${t.pubkey}`;default:return t.id}})}}const gy=new Date(2021,1,1).getTime()/1e3;var bd,Gl,Zo,Xo;const kd=class kd extends Fr{constructor(){super();z(this,bd,qs());z(this,Gl,gy);z(this,Zo,60*60*12);z(this,Xo)}static forSystem(r){const n=new kd;return T(n,Xo,(i,s)=>r.Fetch(i,s)),n}static forFetcher(r){const n=new kd;return T(n,Xo,r),n}setWindowSize(r){if(r<60)throw new Error("Window size too small");T(this,Zo,r)}setStartPoint(r){if(r<gy)throw new Error("Start point cannot be before nostr's birthday");T(this,Gl,r)}async sync(r){if(r.since!==void 0||r.until!==void 0||r.limit!==void 0)throw new Error("Filter must not contain since/until/limit");const n=Kd();let i=1;for(let s=n;s>c(this,Gl);s-=c(this,Zo)){const o=new Cu(`${c(this,bd)}+${i++}`);o.withBareFilter(r).since(s-c(this,Zo)).until(s),this.emit("scan",s);const a=await c(this,Xo).call(this,o);this.emit("event",a)}}};bd=new WeakMap,Gl=new WeakMap,Zo=new WeakMap,Xo=new WeakMap;let dp=kd;var mt,rr;class Ci{constructor(t){z(this,mt);z(this,rr);T(this,mt,t?new Uint8Array(t):new Uint8Array(512)),T(this,rr,t?t.length:0)}unwrap(){return c(this,mt).subarray(0,c(this,rr))}get capacity(){return c(this,mt).byteLength}get length(){return c(this,rr)}set(t,r){c(this,mt).set(t,r),T(this,rr,(r??0)+t.length)}append(t){const r=t.length+c(this,rr);this.resize(r),c(this,mt).set(t,c(this,rr)),T(this,rr,c(this,rr)+t.length)}clear(){T(this,rr,0),c(this,mt).fill(0)}resize(t){if(this.capacity<t){const r=Math.max(this.capacity*2,t),n=new Uint8Array(r);n.set(c(this,mt)),T(this,mt,n)}}shift(){const t=c(this,mt)[0];return T(this,mt,c(this,mt).subarray(1)),fi(this,rr)._--,t}shiftN(t=1){const r=c(this,mt).subarray(0,t);return T(this,mt,c(this,mt).subarray(t)),T(this,rr,c(this,rr)-t),r}}mt=new WeakMap,rr=new WeakMap;const Wf=97,N1=16;var Un=(e=>(e[e.Skip=0]="Skip",e[e.Fingerprint=1]="Fingerprint",e[e.IdList=2]="IdList",e))(Un||{});function sc(e){let t=0;for(;;){if(e.length===0)throw Error("parse ends prematurely");let r=0;if(e instanceof Ci?r=e.shift():(r=e[0],e=e.subarray(1)),t=t<<7|r&127,!(r&128))break}return t}function Br(e){if(e===0)return new Uint8Array([0]);let t=[];for(;e!==0;)t.push(e&127),e>>>=7;t.reverse();for(let r=0;r<t.length-1;r++)t[r]|=128;return new Uint8Array(t)}function K3(e){return Rc(e,1)[0]}function Rc(e,t){if(e.length<t)throw Error("parse ends prematurely");if(e instanceof Ci)return e.shiftN(t);{const r=e.subarray(0,t);return e=e.subarray(t),r}}function R1(e,t){for(let r=0;r<e.byteLength;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0}function Vf(e,t){return e.timestamp===t.timestamp?R1(e.id,t.id):e.timestamp-t.timestamp}var st,Jo,zn,Ui,pn,Nr,go,Lc;class G3{constructor(t,r=0){z(this,Nr);z(this,st);z(this,Jo);z(this,zn);z(this,Ui);z(this,pn,!1);if(r!==0&&r<4096)throw Error("frameSizeLimit too small");T(this,st,t),T(this,Jo,r),T(this,zn,0),T(this,Ui,0)}initiate(){if(c(this,pn))throw Error("already initiated");T(this,pn,!0);const t=new Ci;return t.set([Wf]),this.splitRange(0,c(this,st).size(),R(this,Nr,go).call(this,Number.MAX_VALUE),t),R(this,Nr,Lc).call(this,t)}setInitiator(){T(this,pn,!0)}reconcile(t){let r=[],n=[];t=t instanceof Ci?t:new Ci(t),T(this,zn,T(this,Ui,0));const i=new Ci;i.set([Wf]);const s=K3(t);if(s<96||s>111)throw Error("invalid negentropy protocol version byte");if(s!==Wf){if(c(this,pn))throw Error("unsupported negentropy protocol version requested: "+(s-96));return[R(this,Nr,Lc).call(this,i),r,n]}const o=c(this,st).size();let a=R(this,Nr,go).call(this,0),l=0,u=!1;for(;t.length!==0;){let d=new Ci,f=()=>{u&&(u=!1,d.append(this.encodeBound(a)),d.append(Br(Un.Skip)))},h=this.decodeBound(t),w=t.length===0?0:sc(t),E=l,S=c(this,st).findLowerBound(l,o,h);if(w===Un.Skip)u=!0;else if(w===Un.Fingerprint){let x=Rc(t,N1),p=c(this,st).fingerprint(E,S);R1(x,p)!==0?(f(),this.splitRange(E,S,h,d)):u=!0}else if(w===Un.IdList){let x=sc(t),p={};for(let g=0;g<x;g++){let y=Rc(t,c(this,st).idSize);p[Qe(y)]=y}if(c(this,st).iterate(E,S,g=>{let y=Qe(g.id);return p[y]?delete p[y]:c(this,pn)&&r.push(g.id),!0}),c(this,pn)){u=!0;for(let g of Object.values(p))n.push(g)}else{f();let g=new Ci,y=0,b=h;c(this,st).iterate(E,S,(L,v)=>this.exceededFrameSizeLimit(i.length+g.length)?(b=L,S=v,!1):(g.append(L.id),y++,!0)),d.append(this.encodeBound(b)),d.append(Br(Un.IdList)),d.append(Br(y)),d.append(g.unwrap()),i.append(d.unwrap()),d.clear()}}else throw Error("unexpected mode");if(this.exceededFrameSizeLimit(i.length+d.length)){let x=c(this,st).fingerprint(S,o);i.append(this.encodeBound(R(this,Nr,go).call(this,Number.MAX_VALUE))),i.append(Br(Un.Fingerprint)),i.append(x);break}else i.append(d.unwrap());l=S,a=h}return[i.length===1&&c(this,pn)?void 0:R(this,Nr,Lc).call(this,i),r,n]}async splitRange(t,r,n,i){const s=r-t,o=16;if(s<o*2)i.append(this.encodeBound(n)),i.append(Br(Un.IdList)),i.append(Br(s)),c(this,st).iterate(t,r,a=>(i.append(a.id),!0));else{const a=Math.floor(s/o),l=s%o;let u=t;for(let d=0;d<o;d++){let f=a+(d<l?1:0),h=c(this,st).fingerprint(u,u+f);u+=f;let w;if(u===r)w=n;else{let E,S;c(this,st).iterate(u-1,u+1,(x,p)=>(p===u-1?E=x:S=x,!0)),w=this.getMinimalBound(E,S)}i.append(this.encodeBound(w)),i.append(Br(Un.Fingerprint)),i.append(h)}}}exceededFrameSizeLimit(t){return c(this,Jo)&&t>c(this,Jo)-200}decodeTimestampIn(t){let r=sc(t);return r=r===0?Number.MAX_VALUE:r-1,c(this,zn)===Number.MAX_VALUE||r===Number.MAX_VALUE?(T(this,zn,Number.MAX_VALUE),Number.MAX_VALUE):(r+=c(this,zn),T(this,zn,r),r)}decodeBound(t){const r=this.decodeTimestampIn(t),n=sc(t);if(n>c(this,st).idSize)throw Error("bound key too long");const i=new Uint8Array(c(this,st).idSize),s=Rc(t,Math.min(n,t.length));return i.set(s),{timestamp:r,id:i}}encodeTimestampOut(t){if(t===Number.MAX_VALUE)return T(this,Ui,Number.MAX_VALUE),Br(0);let r=t;return t-=c(this,Ui),T(this,Ui,r),Br(t+1)}encodeBound(t){const r=this.encodeTimestampOut(t.timestamp),n=Br(t.id.length),i=new Uint8Array(r.length+n.length+t.id.length);return i.set(r),i.set(n,r.length),i.set(t.id,r.length+n.length),i}getMinimalBound(t,r){if(r.timestamp!==t.timestamp)return R(this,Nr,go).call(this,r.timestamp);{let n=0,i=r.id,s=t.id;for(let o=0;o<c(this,st).idSize&&i[o]===s[o];o++)n++;return R(this,Nr,go).call(this,r.timestamp,r.id.subarray(0,n+1))}}}st=new WeakMap,Jo=new WeakMap,zn=new WeakMap,Ui=new WeakMap,pn=new WeakMap,Nr=new WeakSet,go=function(t,r){return{timestamp:t,id:r||new Uint8Array(0)}},Lc=function(t){return t.unwrap()};var $n;class Q3{constructor(){z(this,$n);this.setToZero()}setToZero(){T(this,$n,new Uint8Array(32))}add(t){let r=0,n=0;const i=new DataView(c(this,$n).buffer),s=new DataView(t.buffer);for(let o=0;o<8;o++){const a=o*4,l=i.getUint32(a,!0),u=s.getUint32(a,!0);let d=l;d+=r,d+=u,d>4294967295&&(n=1),i.setUint32(a,d&4294967295,!0),r=n,n=0}}negate(){const t=new DataView(c(this,$n).buffer);for(let n=0;n<8;n++){let i=n*4;t.setUint32(i,~t.getUint32(i,!0))}const r=new Uint8Array(32);r[0]=1,this.add(r)}getFingerprint(t){const r=Br(t),n=new Uint8Array(c(this,$n).length+r.length);return n.set(c(this,$n)),n.set(r,c(this,$n).length),Vs(n).subarray(0,N1)}}$n=new WeakMap;const yy=32;var Tt,Hn,jr,el,fp,L1;class Y3{constructor(t){z(this,jr);z(this,Tt,[]);z(this,Hn,!1);t&&(T(this,Tt,t),T(this,Hn,!0))}get idSize(){return yy}insert(t,r){if(c(this,Hn))throw Error("already sealed");const n=ii(r);if(n.byteLength!==yy)throw Error("bad id size for added item");c(this,Tt).push({timestamp:t,id:n})}seal(){if(c(this,Hn))throw Error("already sealed");T(this,Hn,!0),c(this,Tt).sort(Vf);for(let t=1;t<c(this,Tt).length;t++)if(Vf(c(this,Tt)[t-1],c(this,Tt)[t])===0)throw Error("duplicate item inserted")}unseal(){T(this,Hn,!1)}size(){return R(this,jr,el).call(this),c(this,Tt).length}getItem(t){if(R(this,jr,el).call(this),t>=c(this,Tt).length)throw Error("out of range");return c(this,Tt)[t]}iterate(t,r,n){R(this,jr,el).call(this),R(this,jr,fp).call(this,t,r);for(let i=t;i<r&&n(c(this,Tt)[i],i);++i);}findLowerBound(t,r,n){return R(this,jr,el).call(this),R(this,jr,fp).call(this,t,r),R(this,jr,L1).call(this,c(this,Tt),t,r,i=>Vf(i,n)<0)}fingerprint(t,r){const n=new Q3;return this.iterate(t,r,i=>(n.add(i.id),!0)),n.getFingerprint(r-t)}}Tt=new WeakMap,Hn=new WeakMap,jr=new WeakSet,el=function(){if(!c(this,Hn))throw Error("not sealed")},fp=function(t,r){if(t>r||r>c(this,Tt).length)throw Error("bad range")},L1=function(t,r,n,i){let s=n-r;for(;s>0;){let o=r,a=Math.floor(s/2);o+=a,i(t[o])?(r=++o,s-=a+1):s=a}return r};var ea,Wn,Ir,Ql,ta,Ts,Xr,tl,jc;class Z3 extends Fr{constructor(r,n,i,s){super();z(this,Xr);z(this,ea);z(this,Wn);z(this,Ir);z(this,Ql);z(this,ta);z(this,Ts);this.idSize=16,T(this,ea,on("NegentropyFlow")),T(this,Ts,[]),T(this,Wn,r),T(this,Ir,n),T(this,Ql,s),c(this,Ir).on("unknownMessage",a=>R(this,Xr,tl).call(this,a)),c(this,Ir).on("notice",a=>R(this,Xr,tl).call(this,["NOTICE",a]));const o=new Y3;i.forEach(a=>o.insert(a.created_at,a.id)),o.seal(),T(this,ta,new G3(o,5e4))}start(){const r=c(this,ta).initiate();c(this,Ir).sendRaw(["NEG-OPEN",c(this,Wn),c(this,Ql),Qe(r)])}}ea=new WeakMap,Wn=new WeakMap,Ir=new WeakMap,Ql=new WeakMap,ta=new WeakMap,Ts=new WeakMap,Xr=new WeakSet,tl=function(r){try{switch(r[0]){case"NOTICE":{const[n,i]=r;(i.includes("negentropy disabled")||i.includes("negentropy error"))&&(c(this,ea).call(this,"SYNC ERROR: %s",i),R(this,Xr,jc).call(this,!0));break}case"NEG-ERROR":{const[n,i,s]=r;if(i!==c(this,Wn))break;c(this,ea).call(this,"SYNC ERROR %s",s),R(this,Xr,jc).call(this,!0);break}case"NEG-MSG":{const[,n,i]=r;if(n!==c(this,Wn))break;const s=ii(i),[o,,a]=c(this,ta).reconcile(s);a.length>0&&c(this,Ts).push(...a.map(Qe)),o?c(this,Ir).sendRaw(["NEG-MSG",c(this,Wn),Qe(o)]):(c(this,Ir).sendRaw(["NEG-CLOSE",c(this,Wn)]),R(this,Xr,jc).call(this));break}}}catch(n){console.error(n)}},jc=function(r=!1){c(this,Ir).off("unknownMessage",n=>R(this,Xr,tl).call(this,n)),c(this,Ir).off("notice",n=>R(this,Xr,tl).call(this,["NOTICE",n])),this.emit("finish",c(this,Ts).length>0?[{ids:c(this,Ts)}]:[]),r&&this.emit("error")};var An,hp,J3,j1,_1;class X3{constructor(t,r){z(this,An);this.method=t,this.system=r}sync(t,r,n){var l;const[i,s,o,...a]=r;if((((l=t.info)==null?void 0:l.negentropy)??NaN)>=1){const u=a,d=new Z3(s,t,o,u);d.once("finish",f=>{f.length>0?t.request(["REQ",s,...f],n):t.emit("closed",s,"Nothing to sync")}),d.once("error",()=>{R(this,An,hp).call(this,t,r,n)}),d.start()}else R(this,An,hp).call(this,t,r,n)}}An=new WeakSet,hp=function(t,r,n){const[i,s,o,...a]=r;if(i!=="SYNC")throw new Error("Must be a SYNC command");const l=a.every(u=>{var d;return(d=u.kinds)==null?void 0:d.every(f=>Lt.isReplaceable(f)??!1)});if(a.some(u=>u.since||u.until||u.ids||u.limit)||l)t.request(["REQ",s,...a],n);else if(this.method==="since")R(this,An,j1).call(this,t,r,n);else if(this.method==="range-sync")R(this,An,_1).call(this,t,r,n);else throw new Error("No fallback sync method")},J3=function(t){const[r,n,i,...s]=t,a=s.flatMap(u=>this.system.optimizer.expandFilter(u)).map(u=>{if(!u.kinds||!u.authors)return u;if(Lt.isReplaceable(u.kinds)){const d=i.find(f=>f.kind===u.kinds&&f.pubkey===u.authors&&(!u["#d"]||es(f,"d")===u["#d"]));if(d)return{...u,since:d.created_at+1}}return u}),l=this.system.optimizer.flatMerge(a);return l.length!==s.length&&console.debug("COMPRESSED",n,s,l),l},j1=function(t,r,n){const[i,s,o,...a]=r;if(i!=="SYNC")throw new Error("Must be a SYNC command");const l=o.reduce((d,f)=>d=f.created_at>d?f.created_at:d,0),u=a.map(d=>d.since||l===0?d:{...d,since:l+1});t.request(["REQ",s,...u],n)},_1=function(t,r,n){const[i,s,o,...a]=r;if(i!=="SYNC")throw new Error("Must be a SYNC command");const l=dp.forFetcher(async(d,f)=>await new Promise((h,w)=>{const E=new C1,S=d.buildRaw();t.on("event",(x,p)=>{d.id===x&&(f==null||f([p]),E.add(p))}),t.on("eose",x=>{x===d.id&&h(E.takeSnapshot())}),t.request(["REQ",d.id,...S],void 0)})),u=o.reduce((d,f)=>d=f.created_at>d?f.created_at:d,0);l.setStartPoint(u+1),l.on("event",d=>{d.forEach(f=>t.emit("event",s,f))});for(const d of a)l.sync(d)};var Vn,Yl,ra,nr,Ps;class eN extends Fr{constructor(r,n){super();z(this,Vn);z(this,Yl,on("ConnectionPool"));z(this,ra,new Set);z(this,nr,new Map);z(this,Ps);T(this,Vn,r),n?T(this,Ps,n):T(this,Ps,(i,s,o)=>{const a=new X3(c(this,Vn).config.fallbackSync,c(this,Vn));return new g1(i,s,o,a)})}getConnection(r){const n=we(bn(r));return c(this,nr).get(n)}async connect(r,n,i){const s=we(bn(r));if(!c(this,ra).has(s)){c(this,ra).add(s);try{const o=c(this,nr).get(s);if(o)return o.settings=n,o.ephemeral&&!i&&(o.ephemeral=i),o.ephemeral&&!o.isOpen&&await o.connect(),o;{const a=await c(this,Ps).call(this,s,n,i);return c(this,nr).set(s,a),a.on("event",(l,u)=>{if(c(this,Vn).checkSigs&&!c(this,Vn).optimizer.schnorrVerify(u)){c(this,Yl).call(this,"Reject invalid event %o",u);return}this.emit("event",s,l,u)}),a.on("eose",l=>this.emit("eose",s,l)),a.on("disconnect",l=>this.emit("disconnect",s,l)),a.on("connected",l=>this.emit("connected",s,l)),a.on("auth",(l,u,d)=>this.emit("auth",s,l,u,d)),await a.connect(),a}}catch(o){console.error(o),c(this,Yl).call(this,"%O",o),this.emit("connectFailed",s),c(this,nr).delete(s)}finally{c(this,ra).delete(s)}}}disconnect(r){const n=we(bn(r)),i=c(this,nr).get(n);i&&(c(this,nr).delete(n),i.close())}async broadcast(r,n){var a;const i=[...c(this,nr).values()].filter(l=>!l.ephemeral&&l.settings.write),s=await((a=c(this,Vn).requestRouter)==null?void 0:a.forReply(r))??[],o=await Promise.all([...i.map(async l=>{try{const u=await l.publish(r);return n==null||n(u),u}catch(u){console.error(u)}}),...s==null?void 0:s.filter(l=>!c(this,nr).has(we(bn(l)))).map(l=>this.broadcastTo(l,r))]);return rt(o)}async broadcastTo(r,n){const i=bn(r);if(!i)throw new Error("Invalid relay address");const s=c(this,nr).get(i);return s?await s.publish(n):await new Promise(async(o,a)=>{const l=await c(this,Ps).call(this,r,{write:!0,read:!0},!0),u=setTimeout(a,1e4);l.once("connected",async()=>{clearTimeout(u);const d=await l.publish(n);l.close(),o(d)}),l.connect()})}*[Symbol.iterator](){for(const r of c(this,nr))yield r}}Vn=new WeakMap,Yl=new WeakMap,ra=new WeakMap,nr=new WeakMap,Ps=new WeakMap;function pp(e,t){var r,n,i;return!(t.since&&e.created_at<t.since||t.until&&e.created_at>t.until||!(((r=t.ids)==null?void 0:r.includes(e.id))??!0)||!(((n=t.authors)==null?void 0:n.includes(e.pubkey))??!0)||!(((i=t.kinds)==null?void 0:i.includes(e.kind))??!0))}function tN(e,t){if(e.ids&&e.ids.every(r=>t.some(n=>n.id===r)))return!0}var Zl;class wy extends Fr{constructor(r,n,i){super();z(this,Zl,!1);this.relay=r,this.connId=i,this.id=qs(),this.start=ke(),this.filters=n}sentToRelay(){this.sent=ke()}gotEose(){this.eose=ke(),this.emit("eose",this.id,this.connId,!1)}forceEose(){this.sent??(this.sent=ke()),this.eose=ke(),T(this,Zl,!0),this.sendClose(),this.emit("eose",this.id,this.connId,!0)}sendClose(){this.close=ke(),this.emit("close",this.id)}get queued(){return(this.sent===void 0?ke():c(this,Zl)?we(this.eose):this.sent)-this.start}get runtime(){return(this.eose===void 0?ke():this.eose)-this.start}get responseTime(){return this.finished?we(this.eose)-(this.sent??ke()):0}get finished(){return this.eose!==void 0}}Zl=new WeakMap;var Ct,Us,Fi,Fs,na,Xl,ia,mn,Ms,sa,Dr,Ye,mp,gp,yp,A1,T1,wp,P1;class rN extends Fr{constructor(r){var n,i,s,o,a;super();z(this,Ye);z(this,Ct);z(this,Us);z(this,Fi);z(this,Fs);z(this,na);z(this,Xl);z(this,ia);z(this,mn);z(this,Ms);z(this,sa);z(this,Dr);this.requests=[],T(this,Ct,[]),T(this,Us,!1),this.skipCache=!1,T(this,Ms,!1),T(this,Dr,on("Query")),this.id=r.id,T(this,na,new C1),T(this,sa,new Set([r.instance])),T(this,Us,((n=r.options)==null?void 0:n.leaveOpen)??!1),this.skipCache=((i=r.options)==null?void 0:i.skipCache)??!1,T(this,Xl,((s=r.options)==null?void 0:s.timeout)??5e3),T(this,ia,((o=r.options)==null?void 0:o.groupingDelay)??100),T(this,Ms,((a=r.options)==null?void 0:a.replaceable)??!1),R(this,Ye,A1).call(this),this.requests.push(...r.buildRaw()),this.feed.on("event",l=>this.emit("event",l)),R(this,Ye,mp).call(this)}addRequest(r){if(!c(this,sa).has(r.instance))return r.numFilters>0?(c(this,Dr).call(this,"Add query %O to %s",r,this.id),this.requests.push(...r.buildRaw()),R(this,Ye,mp).call(this),c(this,sa).add(r.instance),!0):!1}isOpen(){return c(this,Fi)===void 0&&c(this,Us)}canRemove(){return c(this,Fi)!==void 0&&c(this,Fi)<ke()}get filters(){return c(this,Ct).flatMap(r=>r.filters)}get feed(){return c(this,na)}get snapshot(){return c(this,na).snapshot}handleEvent(r,n){for(const i of c(this,Ct))if(i.id===r||r==="*"){i.filters.some(s=>pp(n,s))?this.feed.add(n):c(this,Dr).call(this,"Event did not match filter, rejecting %O %O",n,i);break}}cancel(){T(this,Fi,ke()+1e3)}uncancel(){T(this,Fi,void 0)}cleanup(){c(this,mn)&&(clearTimeout(c(this,mn)),T(this,mn,void 0)),R(this,Ye,yp).call(this),this.emit("end")}insertCompletedTrace(r,n){const i=new wy(r.relay,r.filters,"");return i.sentToRelay(),i.gotEose(),c(this,Ct).push(i),this.feed.add(n),i}sendToRelay(r,n){if(R(this,Ye,T1).call(this,r,n))return R(this,Ye,P1).call(this,r,n)}connectionLost(r){c(this,Ct).filter(n=>n.connId==r).forEach(n=>n.forceEose())}connectionRestored(r){if(this.isOpen())for(const n of c(this,Ct))n.relay===r.address&&r.request(["REQ",n.id,...n.filters],()=>n.sentToRelay())}sendClose(){for(const r of c(this,Ct))r.sendClose();this.cleanup()}get progress(){const r=c(this,Ct).reduce((n,i)=>n+=i.finished?1:0,0)/c(this,Ct).length;return isNaN(r)?0:r}handleEose(r,n){const i=c(this,Ct).find(s=>s.id===r&&s.connId===n.id);i&&(i.gotEose(),c(this,Us)||i.sendClose())}}Ct=new WeakMap,Us=new WeakMap,Fi=new WeakMap,Fs=new WeakMap,na=new WeakMap,Xl=new WeakMap,ia=new WeakMap,mn=new WeakMap,Ms=new WeakMap,sa=new WeakMap,Dr=new WeakMap,Ye=new WeakSet,mp=function(){c(this,mn)&&(clearTimeout(c(this,mn)),T(this,mn,void 0)),c(this,ia)?T(this,mn,setTimeout(()=>{R(this,Ye,gp).call(this)},c(this,ia))):R(this,Ye,gp).call(this)},gp=async function(){c(this,Dr).call(this,"Starting emit of %s",this.id);let r=[...this.requests];this.requests=[],c(this,Ms)&&r.push(...this.filters),r.length>0&&this.emit("request",this.id,r)},yp=function(){c(this,Fs)&&(clearInterval(c(this,Fs)),T(this,Fs,void 0))},A1=function(){R(this,Ye,yp).call(this),T(this,Fs,setInterval(()=>{for(const r of c(this,Ct))r.runtime>c(this,Xl)&&!r.finished&&r.forceEose()},500))},T1=function(r,n){var i,s;return n.relay&&n.relay!==r.address||r.isDown?!1:!n.relay&&r.ephemeral?(c(this,Dr).call(this,"Cant send non-specific REQ to ephemeral connection %O %O %O",n,n.relay,r),!1):n.filters.some(o=>o.search)&&!((s=(i=r.info)==null?void 0:i.supported_nips)!=null&&s.includes($1.Search))?(c(this,Dr).call(this,"Cant send REQ to non-search relay",r.address),!1):this.canRemove()?(c(this,Dr).call(this,"Cant send REQ when query is closed",this.id,n),!1):!0},wp=function(r,n){const i=new wy(r.address,n.filters,r.id);i.on("close",a=>r.closeRequest(a)),i.on("eose",(a,l,u)=>{this.emit("trace",{id:a,conn:r,wasForced:u,queued:i.queued,responseTime:i.responseTime}),this.progress===1&&this.emit("done")});const s=(a,l)=>{i.id===a&&(i.filters.some(u=>pp(l,u))?this.feed.add(l):c(this,Dr).call(this,"Event did not match filter, rejecting %O %O",l,i))},o=a=>{this.handleEose(a,r)};return r.on("event",s),r.on("eose",o),r.on("closed",o),this.on("end",()=>{r.off("event",s),r.off("eose",o),r.off("closed",o)}),c(this,Ct).push(i),i},P1=function(r,n){const i=c(this,Ms)?c(this,Ct).find(s=>s.connId===r.id)??R(this,Ye,wp).call(this,r,n):R(this,Ye,wp).call(this,r,n);return i.filters=n.filters.map(s=>(delete s.relays,s)),n.syncFrom!==void 0?r.request(["SYNC",i.id,n.syncFrom,...i.filters],()=>i.sentToRelay()):r.request(["REQ",i.id,...i.filters],()=>i.sentToRelay()),i};function nN(e){const t=[];for(const r of e)Object.entries(r).filter(([,i])=>Array.isArray(i)).every(([,i])=>i.length>0)&&t.push(r);return t}var xr,gn,Er,ts,U1,F1,M1;class iN extends Fr{constructor(r){super();z(this,ts);z(this,xr,on("QueryManager"));z(this,gn,new Map);z(this,Er);T(this,Er,r),setInterval(()=>R(this,ts,M1).call(this),1e3)}get(r){return c(this,gn).get(r)}query(r){const n=c(this,gn).get(r.id);if(n)return n.addRequest(r)&&this.emit("change"),n;{const i=new rN(r);return i.on("trace",s=>this.emit("trace",s)),i.on("request",(s,o)=>{R(this,ts,U1).call(this,i,o)}),c(this,gn).set(r.id,i),r.numFilters>0&&this.emit("change"),i}}handleEvent(r){c(this,gn).forEach(n=>n.handleEvent("*",r))}async fetch(r,n){const i=r.buildRaw(),s=this.query(r);n&&s.on("event",n),await new Promise(a=>{s.once("done",a)});const o=s.feed.takeSnapshot();return n&&s.off("event",n),o.filter(a=>i.some(l=>pp(a,l)))}*[Symbol.iterator](){for(const r of c(this,gn))yield r}}xr=new WeakMap,gn=new WeakMap,Er=new WeakMap,ts=new WeakSet,U1=async function(r,n){if(n=nN(n),n.length===0){c(this,xr).call(this,"Dropping %s %o",r.id);return}for(const a of n)a.authors&&c(this,Er).relayLoader.TrackKeys(a.authors);let i;if(c(this,Er).cacheRelay&&!r.skipCache){const a=await c(this,Er).cacheRelay.query(["REQ",r.id,...n]);i=a,a.length>0&&(c(this,xr).call(this,"Adding from cache %s %O",r.id,a),r.feed.add(i))}if(((i==null?void 0:i.length)??0)>0){const a=n.filter(l=>!tN(l,i));a.length!==n.length&&(c(this,xr).call(this,"Removing satisfied filters %o %o",a,n),n=a)}if(n.length===0){c(this,xr).call(this,"Dropping %s %o",r.id);return}c(this,Er).requestRouter&&(n=c(this,Er).requestRouter.forAllRequest(n));const s=c(this,Er).optimizer.compress(n).reduce((a,l)=>{for(const u of l.relays??[""])a[u]??(a[u]=[]),a[u].push(l);return a},{}),o=Object.entries(s).map(([a,l])=>({relay:a,filters:l,syncFrom:i}));await Promise.all(o.map(a=>R(this,ts,F1).call(this,r,a)))},F1=async function(r,n){if(n.relay){const i=await c(this,Er).pool.connect(n.relay,{read:!0,write:!0},!0);if(i){const s=r.sendToRelay(i,n);if(s)return c(this,xr).call(this,"Sent query %s to %s %s %O",s.id,n.relay,r.id,n),[s];c(this,xr).call(this,"Query not sent to %s: %O",n.relay,n)}else console.warn("Failed to connect to new relay for:",n.relay,r)}else{const i=[];for(const[s,o]of c(this,Er).pool)if(!o.ephemeral){const a=r.sendToRelay(o,n);a?(c(this,xr).call(this,"Sent query %s to %s %s %O",a.id,n.relay,r.id,n),i.push(a)):c(this,xr).call(this,"Query not sent to %s: %O",s,n)}return i}this.emit("request",r.id,n)},M1=function(){let r=!1;for(const[n,i]of c(this,gn))i.canRemove()&&(i.sendClose(),c(this,gn).delete(n),c(this,xr).call(this,"Deleted query %s",n),r=!0);r&&this.emit("change")};class sN extends ku{constructor(t){super("EventsCache",t)}key(t){return t.id}async preload(){await super.preload(),await this.buffer([...this.onTable])}takeSnapshot(){return[...this.cache.values()]}async search(){return[]}}class oN extends ku{constructor(t){super("UserFollowsCache",t)}key(t){return t.pubkey}async preload(t){await super.preload(),t&&await this.buffer(t)}newest(){let t=0;return this.cache.forEach(r=>t=r.created>t?r.created:t),t}takeSnapshot(){return[...this.cache.values()]}async search(){return[]}}function qf(e){const t=[],r=Object.entries(e),n=aN(e),i=r.filter(([,l])=>Array.isArray(l)),s=Object.fromEntries(r.filter(([,l])=>!Array.isArray(l)));function o(l,u=[]){if(l.length===0){t.push(a(u,s,n));return}for(let d=0;d<l[0][1].length;d++)o(l.slice(1),u.concat([[l[0][0],l[0][1][d]]]))}function a(l,u,d){let f={...Object.fromEntries(l),...u};return f.resultSetId=d,f}return o(i),t}function aN(e){if(e.limit!==void 0||e.since!==void 0||e.until!==void 0){const r=Object.entries(e).filter(([,n])=>Array.isArray(n)).map(n=>n).sort().map(([,n])=>n.join(",")).join(",");return a1(r)}return""}function B1(e,t){return e.resultSetId!==t.resultSetId?!1:y3(e,t)<=1}function O1(e){const t=[],r=[...e];for(;r.length>0;){const i=[r.shift()];for(let s=0;s<r.length;s++){const o=r[s];i.some(a=>!B1(a,o))||(i.push(r.splice(s,1)[0]),s--)}t.push(lN(i))}return t}function lN(e){const t={};return e.forEach(r=>{Object.entries(r).forEach(([n,i])=>{if(Array.isArray(i))if(t[n]===void 0)t[n]=[...i];else{const s=i.filter(o=>!t[n].includes(o));t[n].push(...s)}else t[n]=i})}),t}function uN(e){let t=[];function r(n){return n.reduce((i,s)=>(Object.entries(s).forEach(([o,a])=>{a!==void 0&&(o==="since"||o==="until"||o==="limit"||o==="search"||o==="resultSetId"?i[o]=a:(i[o]??(i[o]=[]),i[o].includes(a)||i[o].push(a)))}),i),{})}for(;e.length>0;){const i=[e.shift()];for(let s=0;s<e.length;s++){const o=e[s];i.every(a=>B1(a,o))&&(i.push(e.splice(s,1)[0]),s--)}t.push(r(i))}for(;;){const n=O1([...t]);if(n.length===t.length)break;t=n}return t.forEach(n=>delete n.resultSetId),t}function cN(e,t,r){const n=[],i=[];for(const o of t){const a=e.findIndex(l=>$3(l,o));a!==-1?e.splice(a,1):n.push(o)}const s=n.length>0||i.length>0;return{added:s?n:[],removed:s?i:[],changed:s}}const dN={expandFilter:e=>qf(e),getDiff:(e,t)=>cN(e.flatMap(n=>qf(n)),t.flatMap(n=>qf(n))).added,flatMerge:e=>uN(e),compress:e=>O1(e),schnorrVerify:e=>{const t=Lt.createId(e);return hd.verify(e.sig,t,e.pubkey)}};var fN=Object.defineProperty,hN=(e,t,r)=>t in e?fN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,tr=(e,t,r)=>hN(e,typeof t!="symbol"?t+"":t,r);class vy{constructor(t){if(tr(this,"strToUniqueId",new Map),tr(this,"uniqueIdToStr",new Map),tr(this,"currentUniqueId",0),t)for(const[r,n]of t){if(!r||r.trim()===""){console.warn(`Skipping empty string with id ${n} during deserialization`);continue}this.strToUniqueId.set(r,n),this.uniqueIdToStr.set(n,r),this.currentUniqueId=Math.max(this.currentUniqueId,n+1)}}id(t){if(!t||t.trim()==="")throw new Error("Cannot store empty or whitespace-only strings");const r=this.strToUniqueId.get(t);if(r!==void 0)return r;const n=this.currentUniqueId++;return this.strToUniqueId.set(t,n),this.uniqueIdToStr.set(n,t),n}str(t){const r=this.uniqueIdToStr.get(t);if(!r)throw new Error("pub: invalid id "+t);return r}has(t){return this.strToUniqueId.has(t)}serialize(t){return t?Array.from(this.uniqueIdToStr.entries()).filter(([r])=>t.has(r)).map(([r,n])=>[n,r]):Array.from(this.strToUniqueId.entries())}*[Symbol.iterator](){yield*this.uniqueIdToStr.entries()}remove(t){const r=this.uniqueIdToStr.get(t);r!==void 0&&(this.uniqueIdToStr.delete(t),this.strToUniqueId.delete(r))}}const xy=/^[0-9a-fA-F]{64}$/,pN=2;function mN(e){const t=e;return{ids:t.ids,followedByUser:t.followedByUser,followListCreatedAt:t.followListCreatedAt,mutedByUser:t.mutedByUser,muteListCreatedAt:t.muteListCreatedAt}}function gN(e){if(!/^[0-9a-fA-F]+$/.test(e))throw new Error(`Invalid hex string: ${e}`);if(e.length%2!==0)throw new Error(`Hex string must have even length: ${e}`);const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=parseInt(e.substr(r,2),16);return t}function I1(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}function er(e){const t=[];let r=e;for(;r>=128;)t.push(r&127|128),r>>>=7;return t.push(r&127),new Uint8Array(t)}async function*D1(e){const{ids:t,followedByUser:r,followListCreatedAt:n,mutedByUser:i,muteListCreatedAt:s}=mN(e),o=Array.from(t).filter(u=>{const[,d]=u;return!d||d.trim()===""||!/^[0-9a-fA-F]{64}$/.test(d)?(console.warn(`Skipping invalid public key: "${d}"`),!1):!0});yield er(pN),yield er(o.length);for(const[u,d]of o){const f=gN(d);yield er(u),yield f,yield new Uint8Array(0)}const a=Array.from(r.entries()).filter(u=>n.has(u[0]));yield er(a.length);for(const[u,d]of a){const f=n.get(u)||0;yield er(u),yield er(f),yield er(d.size);for(const h of d)yield er(h);yield new Uint8Array(0)}const l=Array.from(i.entries()).filter(u=>s.has(u[0]));yield er(l.length);for(const[u,d]of l){const f=s.get(u)||0;yield er(u),yield er(f),yield er(d.size);for(const h of d)yield er(h);yield new Uint8Array(0)}}async function yN(e){return new Promise((t,r)=>{const n=[];let i=0;queueMicrotask(async()=>{try{for await(const a of D1(e))a.length>0&&(n.push(a),i+=a.length);const s=new Uint8Array(i);let o=0;for(const a of n)s.set(a,o),o+=a.length;t(s)}catch(s){r(s)}})})}async function wN(e,t){return new Promise((r,n)=>{let i=0;function s(a){if(i+a>t.length)throw new Error("Unexpected end of data");const l=t.slice(i,i+a);return i+=a,l}function o(){let a=0,l=0;for(;;){const u=s(1)[0];if(a|=(u&127)<<l,(u&128)===0)break;l+=7}return a}try{o();const a=o(),l=[];for(let x=0;x<a;x++){const p=o(),g=s(32),y=I1(g);l.push([y,p])}const u=new Gd(e,{uniqueIds:l,followLists:[],muteLists:[]}),d=o(),f=[];for(let x=0;x<d;x++){const p=o(),g=o(),y=o(),b=[];for(let L=0;L<y;L++)b.push(o());f.push([p,b,g])}const h=o(),w=[];for(let x=0;x<h;x++){const p=o(),g=o(),y=o(),b=[];for(let L=0;L<y;L++)b.push(o());w.push([p,b,g])}const E=()=>{let x=0;const p=()=>{if(x>=f.length){S();return}const[g,y,b]=f[x],L=u;L.followListCreatedAt.set(g,b);for(const v of y)L.privateAddFollower(v,g);x++,queueMicrotask(p)};queueMicrotask(p)},S=()=>{let x=0;const p=()=>{var g;if(x>=w.length){u.recalculateFollowDistances().then(()=>{r(u)}).catch(n);return}const[y,b,L]=w[x],v=u;v.muteListCreatedAt.set(y,L),v.mutedByUser.set(y,new Set(b));for(const F of b)v.userMutedBy.has(F)||v.userMutedBy.set(F,new Set),(g=v.userMutedBy.get(F))==null||g.add(y);x++,queueMicrotask(p)};queueMicrotask(p)};E()}catch(a){n(a)}})}async function vN(e,t){const r=t.getReader();let n=new Uint8Array(0);async function i(S){for(;n.length<S;){const{value:p,done:g}=await r.read();if(g)throw new Error("Unexpected end of stream");const y=new Uint8Array(n.length+p.length);y.set(n),y.set(p,n.length),n=y}const x=n.slice(0,S);return n=n.slice(S),x}async function s(){let S=0,x=0;for(;;){const p=(await i(1))[0];if(S|=(p&127)<<x,(p&128)===0)break;x+=7}return S}await s();const o=await s(),a=[];for(let S=0;S<o;S++){const x=await s(),p=await i(32),g=I1(p);a.push([g,x])}const l=new Gd(e,{uniqueIds:a,followLists:[],muteLists:[]}),u=await s(),d=[];for(let S=0;S<u;S++){const x=await s(),p=await s(),g=await s(),y=[];for(let b=0;b<g;b++)y.push(await s());d.push([x,y,p])}const f=await s(),h=[];for(let S=0;S<f;S++){const x=await s(),p=await s(),g=await s(),y=[];for(let b=0;b<g;b++)y.push(await s());h.push([x,y,p])}const w=()=>new Promise(S=>{let x=0;const p=()=>{if(x>=d.length){S();return}const[g,y,b]=d[x],L=l;L.followListCreatedAt.set(g,b);for(const v of y)L.privateAddFollower(v,g);x++,queueMicrotask(p)};queueMicrotask(p)}),E=()=>new Promise(S=>{let x=0;const p=()=>{var g;if(x>=h.length){S();return}const[y,b,L]=h[x],v=l;v.muteListCreatedAt.set(y,L),v.mutedByUser.set(y,new Set(b));for(const F of b)v.userMutedBy.has(F)||v.userMutedBy.set(F,new Set),(g=v.userMutedBy.get(F))==null||g.add(y);x++,queueMicrotask(p)};queueMicrotask(p)});return await w(),await E(),await l.recalculateFollowDistances(),l}class Gd{constructor(t,r){tr(this,"root"),tr(this,"followDistanceByUser",new Map),tr(this,"usersByFollowDistance",new Map),tr(this,"followedByUser",new Map),tr(this,"followersByUser",new Map),tr(this,"followListCreatedAt",new Map),tr(this,"mutedByUser",new Map),tr(this,"userMutedBy",new Map),tr(this,"muteListCreatedAt",new Map),tr(this,"ids",new vy),this.ids=new vy(r&&r.uniqueIds),this.root=this.id(t),this.followDistanceByUser.set(this.root,0),this.usersByFollowDistance.set(0,new Set([this.root])),r&&this.deserialize(r)}id(t){return this.ids.id(t)}str(t){return this.ids.str(t)}getRoot(){return this.str(this.root)}setRoot(t){const r=this.id(t);return r===this.root?Promise.resolve():(this.root=r,this.recalculateFollowDistances())}recalculateFollowDistances(){return new Promise(t=>{this.followDistanceByUser.clear(),this.usersByFollowDistance.clear(),this.followDistanceByUser.set(this.root,0),this.usersByFollowDistance.set(0,new Set([this.root]));const r=[this.root];let n=0;const i=()=>{if(r.length===0){console.log(`Finished recalculating follow distances. Processed ${n} users.`),t();return}const s=r.shift(),o=this.followDistanceByUser.get(s),a=this.followedByUser.get(s)||new Set;for(const l of a)if(!this.followDistanceByUser.has(l)){const u=o+1;this.followDistanceByUser.set(l,u),this.usersByFollowDistance.has(u)||this.usersByFollowDistance.set(u,new Set),this.usersByFollowDistance.get(u).add(l),r.push(l)}n++,n%1e4===0&&console.log(`Recalculating follow distances: ${n} users processed, ${r.length} remaining`),queueMicrotask(i)};queueMicrotask(i)})}handleEvent(t){const r=(Array.isArray(t)?t:[t]).filter(n=>[3,1e4].includes(n.kind));for(const n of r){const i=n.created_at;if(i>Math.floor(Date.now()/1e3)+10*60){console.debug("event.created_at more than 10 minutes in the future",n);continue}const s=this.id(n.pubkey);n.kind===3?this.handleFollowList(n,s,i):n.kind===1e4&&this.handleMuteList(n,s,i)}}handleFollowList(t,r,n){const i=this.followListCreatedAt.get(r);if(i&&n<=i)return;this.followListCreatedAt.set(r,n);const s=new Set;for(const a of t.tags)if(a[0]==="p"){if(!xy.test(a[1]))continue;const l=this.id(a[1]);l!==r&&s.add(l)}const o=this.followedByUser.get(r)||new Set;for(const a of o)s.has(a)||this.privateRemoveFollower(a,r);for(const a of s)this.privateAddFollower(a,r)}handleMuteList(t,r,n){var i,s,o,a;const l=this.muteListCreatedAt.get(r);if(l&&n<=l)return;this.muteListCreatedAt.set(r,n);const u=new Set;for(const f of t.tags)if(f[0]==="p"){if(!xy.test(f[1]))continue;const h=this.id(f[1]);h!==r&&u.add(h)}const d=this.mutedByUser.get(r)||new Set;for(const f of d)u.has(f)||((i=this.mutedByUser.get(r))==null||i.delete(f),(s=this.userMutedBy.get(f))==null||s.delete(r));for(const f of u)this.mutedByUser.has(r)||this.mutedByUser.set(r,new Set),(o=this.mutedByUser.get(r))==null||o.add(f),this.userMutedBy.has(f)||this.userMutedBy.set(f,new Set),(a=this.userMutedBy.get(f))==null||a.add(r)}isFollowing(t,r){var n;const i=this.id(r),s=this.id(t);return!!((n=this.followedByUser.get(s))!=null&&n.has(i))}getFollowDistance(t){const r=this.followDistanceByUser.get(this.id(t));return r===void 0?1e3:r}addUserByFollowDistance(t,r){var n,i;this.usersByFollowDistance.has(t)||this.usersByFollowDistance.set(t,new Set),(n=this.usersByFollowDistance.get(t))==null||n.add(r);for(const s of this.usersByFollowDistance.keys())s>t&&((i=this.usersByFollowDistance.get(s))==null||i.delete(r))}privateAddFollower(t,r){var n,i;if(typeof t!="number"||typeof r!="number")throw new Error("Invalid user id");if(this.followersByUser.has(t)||this.followersByUser.set(t,new Set),(n=this.followersByUser.get(t))==null||n.add(r),this.followedByUser.has(r)||this.followedByUser.set(r,new Set),t!==this.root){let s;if(r===this.root)s=1,this.addUserByFollowDistance(s,t),this.followDistanceByUser.set(t,s);else{const o=this.followDistanceByUser.get(t),a=this.followDistanceByUser.get(r);s=a&&a+1,(o===void 0||s&&s<o)&&(this.followDistanceByUser.set(t,s),this.addUserByFollowDistance(s,t))}}(i=this.followedByUser.get(r))==null||i.add(t)}addFollower(t,r){this.privateAddFollower(this.id(r),this.id(t))}removeFollower(t,r){this.privateRemoveFollower(this.id(r),this.id(t))}privateRemoveFollower(t,r){var n,i;if((n=this.followersByUser.get(t))==null||n.delete(r),(i=this.followedByUser.get(r))==null||i.delete(t),t===this.root)return;let s=1/0;for(const o of this.followersByUser.get(t)||[]){const a=this.followDistanceByUser.get(o);a!==void 0&&a+1<s&&(s=a+1)}s===1/0?this.followDistanceByUser.delete(t):this.followDistanceByUser.set(t,s)}followerCount(t){var r;const n=this.id(t);return((r=this.followersByUser.get(n))==null?void 0:r.size)??0}followedByFriendsCount(t){var r;let n=0;const i=this.id(t);for(const s of this.followersByUser.get(i)??[])(r=this.followedByUser.get(this.root))!=null&&r.has(s)&&n++;return n}mutedByFriendsCount(t){var r;let n=0;const i=this.id(t);for(const s of this.userMutedBy.get(i)??[])(r=this.followedByUser.get(this.root))!=null&&r.has(s)&&n++;return n}size(){let t=0,r=0;const n={};for(const i of this.followedByUser.values())t+=i.size;for(const i of this.mutedByUser.values())r+=i.size;for(const[i,s]of this.usersByFollowDistance.entries())n[i]=s.size;return{users:this.followDistanceByUser.size,follows:t,mutes:r,sizeByDistance:n}}followedByFriends(t){var r;const n=this.id(t),i=new Set;for(const s of this.followersByUser.get(n)??[])(r=this.followedByUser.get(this.root))!=null&&r.has(s)&&i.add(this.str(s));return i}getFollowedByUser(t,r=!1){const n=this.id(t),i=new Set;for(const s of this.followedByUser.get(n)||[])i.add(this.str(s));return r&&i.add(t),i}getFollowersByUser(t){const r=this.id(t),n=new Set;for(const i of this.followersByUser.get(r)||[])n.add(this.str(i));return n}serialize(t){return t?this.serializeWithSizeLimit(t):this.serializeWithoutSizeLimit()}serializeWithoutSizeLimit(){return new Promise(t=>{const r=[],n=[],i=new Set,s=f=>{i.has(f)||i.add(f)},o=(f,h,w,E)=>{h.length!==0&&(s(f),h.forEach(s),E?r.push([f,h,w]):n.push([f,h,w]))},a=new Set;for(const[f]of this.followedByUser)a.add(f);for(const[f]of this.mutedByUser)a.add(f);const l=Array.from(a);let u=0;const d=()=>{if(u>=l.length){t({followLists:r,uniqueIds:this.ids.serialize(i),muteLists:n});return}const f=l[u],h=this.followedByUser.get(f),w=this.followListCreatedAt.get(f);h&&w&&o(f,Array.from(h),w,!0);const E=this.mutedByUser.get(f),S=this.muteListCreatedAt.get(f);E&&S&&o(f,Array.from(E),S,!1),u++,queueMicrotask(d)};queueMicrotask(d)})}serializeWithSizeLimit(t){return new Promise(r=>{const n=[],i=[],s=new Set,o=x=>x===0?1:Math.floor(Math.log10(x))+1,a=(x,p)=>(p?1:2)+64+2+o(x);let l=48,u=0;const d=x=>s.has(x)?0:(s.add(x),u++,a(x,u===1)),f=(x,p,g,y)=>{const b=d(x);let L=((y?n.length===0:i.length===0)?1:2)+o(x)+1+1+1+1+o(g)+1;const v=[];for(const F of p){const O=(v.length?1:0)+o(F),M=d(F),k=O+M;if(l+L+k>t)break;v.push(F),L+=O,l+=M}v.length!==0&&(l+=L+b,y?n.push([x,v,g]):i.push([x,v,g]))},h=new Set;for(const[x]of this.followedByUser)h.add(x);for(const[x]of this.mutedByUser)h.add(x);const w=Array.from(h);let E=0;const S=()=>{if(E>=w.length||l>=t){r({followLists:n,uniqueIds:this.ids.serialize(s),muteLists:i});return}const x=w[E],p=this.followedByUser.get(x),g=this.followListCreatedAt.get(x);p&&g&&f(x,Array.from(p),g,!0);const y=this.mutedByUser.get(x),b=this.muteListCreatedAt.get(x);y&&b&&f(x,Array.from(y),b,!1),E++,queueMicrotask(S)};queueMicrotask(S)})}deserialize(t){var r,n;const{followLists:i,muteLists:s}=t,o=(r=i[0])==null?void 0:r[0];for(const[a,l,u]of i){for(const d of l)this.privateAddFollower(d,a);this.followListCreatedAt.set(a,u??0)}if(s)for(const[a,l,u]of s){this.mutedByUser.set(a,new Set(l));for(const d of l)this.userMutedBy.has(d)||this.userMutedBy.set(d,new Set),(n=this.userMutedBy.get(d))==null||n.add(a);this.muteListCreatedAt.set(a,u??0)}o!==this.root&&this.recalculateFollowDistances().catch(console.error)}getUsersByFollowDistance(t){const r=this.usersByFollowDistance.get(t)||new Set,n=new Set;for(const i of r)n.add(this.str(i));return n}getFollowListCreatedAt(t){return this.followListCreatedAt.get(this.id(t))}merge(t){return new Promise(r=>{console.log("size before merge",this.size()),console.time("merge graph");const n=Array.from(t);let i=0;const s=()=>{if(i>=n.length){this.recalculateFollowDistances().then(()=>{console.timeEnd("merge graph"),console.log("size after merge",this.size()),r()});return}const o=n[i];this.mergeUserLists(o,this.followListCreatedAt,t.followListCreatedAt,this.followedByUser,t.followedByUser),this.mergeUserLists(o,this.muteListCreatedAt,t.muteListCreatedAt,this.mutedByUser,t.mutedByUser),i++,queueMicrotask(s)};queueMicrotask(s)})}mergeUserLists(t,r,n,i,s){const o=this.id(t),a=r.get(o),l=n.get(o);if(!a||l&&a<l){const u=s.get(o)||new Set,d=i.get(o)||new Set;for(const f of u)d.has(f)||(i.has(o)||i.set(o,new Set),i.get(o).add(f));for(const f of d)u.has(f)||i.get(o).delete(f);r.set(o,l??0)}}*userIterator(t){const r=Array.from(this.usersByFollowDistance.keys()).sort((n,i)=>n-i);for(const n of r){if(t!==void 0&&n>t)break;const i=this.usersByFollowDistance.get(n)||new Set;for(const s of i)yield this.str(s)}}[Symbol.iterator](){return this.userIterator()}getMutedByUser(t){const r=this.id(t),n=new Set;for(const i of this.mutedByUser.get(r)||[])n.add(this.str(i));return n}getUserMutedBy(t){const r=this.id(t),n=new Set;for(const i of this.userMutedBy.get(r)||[])n.add(this.str(i));return n}stats(t){const r={},n=this.id(t);for(const i of this.followersByUser.get(n)||[]){const s=this.followDistanceByUser.get(i);s!==void 0&&(r[s]||(r[s]={followers:0,muters:0}),r[s].followers++)}for(const i of this.userMutedBy.get(n)||[]){const s=this.followDistanceByUser.get(i);s!==void 0&&(r[s]||(r[s]={followers:0,muters:0}),r[s].muters++)}return r}removeMutedNotFollowedUsers(){const t=new Set;for(const[r,n]of this.userMutedBy.entries())(this.followersByUser.get(r)||new Set).size===0&&n.size>0&&t.add(r);for(const r of t)this.removeUserById(r);return t.size}removeUserById(t){this.ids.remove(t),this.followDistanceByUser.delete(t),this.followedByUser.delete(t),this.followersByUser.delete(t),this.followListCreatedAt.delete(t),this.mutedByUser.delete(t),this.userMutedBy.delete(t),this.muteListCreatedAt.delete(t),this.usersByFollowDistance.forEach(r=>r.delete(t)),this.followedByUser.forEach(r=>r.delete(t)),this.followersByUser.forEach(r=>r.delete(t)),this.mutedByUser.forEach(r=>r.delete(t)),this.userMutedBy.forEach(r=>r.delete(t))}toBinaryChunks(){return D1(this)}toBinary(){return yN(this)}static fromBinary(t,r){return wN(t,r)}static fromBinaryStream(t,r){return vN(t,r)}}var Ht;class xN extends Fr{constructor(r){var n,i,s,o,a;super();z(this,Ht);T(this,Ht,{relays:r.relays??new C4((n=r.db)==null?void 0:n.userRelays),profiles:r.profiles??new N4((i=r.db)==null?void 0:i.users),relayMetrics:r.relayMetrics??new R4((s=r.db)==null?void 0:s.relayMetrics),events:r.events??new sN((o=r.db)==null?void 0:o.events),contactLists:r.contactLists??new oN((a=r.db)==null?void 0:a.contacts),optimizer:r.optimizer??dN,checkSigs:r.checkSigs??!1,cachingRelay:r.cachingRelay,db:r.db,automaticOutboxModel:r.automaticOutboxModel??!0,buildFollowGraph:r.buildFollowGraph??!1,fallbackSync:r.fallbackSync??"since",socialGraphInstance:r.socialGraphInstance??new Gd("00".repeat(32))})}get config(){return c(this,Ht)}get relayCache(){return c(this,Ht).relays}get profileCache(){return c(this,Ht).profiles}get relayMetricsCache(){return c(this,Ht).relayMetrics}get optimizer(){return c(this,Ht).optimizer}get eventsCache(){return c(this,Ht).events}get userFollowsCache(){return c(this,Ht).contactLists}get cacheRelay(){return c(this,Ht).cachingRelay}get checkSigs(){return c(this,Ht).checkSigs}set checkSigs(r){c(this,Ht).checkSigs=r}}Ht=new WeakMap;var Jl,Wt;class EN extends xN{constructor(r){super(r);z(this,Jl,on("System"));z(this,Wt);if(this.profileLoader=new _N(this,this.profileCache),this.relayMetricsHandler=new C3(this.relayMetricsCache),this.relayLoader=new A3(this,this.relayCache),this.config.automaticOutboxModel&&(this.requestRouter=sp.fromSystem(this)),this.config.cachingRelay&&this.on("event",async(n,i)=>{var s;await((s=this.config.cachingRelay)==null?void 0:s.event(i))}),this.config.buildFollowGraph){let n=[],i;this.on("event",(s,o)=>{o.kind===he.ContactList&&(this.userFollowsCache.update({loaded:ke(),created:o.created_at,pubkey:o.pubkey,follows:o.tags}),n.push(o),i||(i=setTimeout(()=>{this.config.socialGraphInstance.handleEvent(n),n=[]},500)))})}this.pool=new eN(this),T(this,Wt,new iN(this)),this.pool.on("connected",(n,i)=>{const s=this.pool.getConnection(n);if(s&&(this.relayMetricsHandler.onConnect(s.address),i))for(const[,o]of c(this,Wt))o.connectionRestored(s)}),this.pool.on("connectFailed",n=>{this.relayMetricsHandler.onDisconnect(n,0)}),this.pool.on("event",(n,i,s)=>{var o;(o=s.relays)!=null&&o.length&&this.relayMetricsHandler.onEvent(s.relays[0]),this.emit("event",i,s)}),this.pool.on("disconnect",(n,i)=>{const s=this.pool.getConnection(n);if(s){this.relayMetricsHandler.onDisconnect(s.address,i);for(const[,o]of c(this,Wt))o.connectionLost(s.id)}}),this.pool.on("auth",(n,i,s,o)=>this.emit("auth",i,s,o)),this.pool.on("notice",(n,i)=>{c(this,Jl).call(this,"NOTICE: %s %s",n,i)}),c(this,Wt).on("change",()=>this.emit("change",this.takeSnapshot())),c(this,Wt).on("trace",n=>{this.relayMetricsHandler.onTraceReport(n)}),c(this,Wt).on("request",(n,i)=>this.emit("request",n,i))}async Init(r){const n=[this.relayCache.preload(r),this.profileCache.preload(r),this.relayMetricsCache.preload(r),this.eventsCache.preload(r),this.userFollowsCache.preload(r)];await Promise.all(n),await this.PreloadSocialGraph(r)}async PreloadSocialGraph(r,n){if(this.config.buildFollowGraph){if("localStorage"in globalThis){const i=localStorage.getItem("social-graph");if(i)try{const s=JSON.parse(i);this.config.socialGraphInstance=new Gd(n??"",s)}catch(s){c(this,Jl).call(this,"Failed to load serialzied social-graph: %O",s),localStorage.removeItem("social-graph")}}this.config.socialGraphInstance.setRoot(n??"00".repeat(32));for(const i of this.userFollowsCache.snapshot())r&&!r.includes(i.pubkey)||this.config.socialGraphInstance.handleEvent({id:"",sig:"",content:"",kind:3,pubkey:i.pubkey,created_at:i.created,tags:i.follows})}}async ConnectToRelay(r,n){await this.pool.connect(r,n,!1)}ConnectEphemeralRelay(r){return this.pool.connect(r,{read:!0,write:!0},!0)}DisconnectRelay(r){this.pool.disconnect(r)}GetQuery(r){return c(this,Wt).get(r)}Fetch(r,n){return c(this,Wt).fetch(r,n)}Query(r){return c(this,Wt).query(r)}HandleEvent(r,n){this.emit("event",r,n),c(this,Wt).handleEvent(n)}async BroadcastEvent(r,n){return this.HandleEvent("*",{...r,relays:[]}),await this.pool.broadcast(r,n)}async WriteOnceToRelay(r,n){return await this.pool.broadcastTo(r,n)}takeSnapshot(){return{queries:[...c(this,Wt)].map(([,r])=>({id:r.id,filters:r.filters,subFilters:[]}))}}}Jl=new WeakMap,Wt=new WeakMap;var te=(e=>(e.PublicKey="npub",e.PrivateKey="nsec",e.Note="note",e.Profile="nprofile",e.Event="nevent",e.Relay="nrelay",e.Address="naddr",e.Req="nreq",e.Chat17="nchat17",e))(te||{}),rl=(e=>(e[e.Special=0]="Special",e[e.Relay=1]="Relay",e[e.Author=2]="Author",e[e.Kind=3]="Kind",e))(rl||{});const z1=1e4;function SN(e,t,r,n,i){const s=new TextEncoder,o=e==="naddr"?s.encode(t):ii(t),a=[0,o.length,...o],l=(r==null?void 0:r.map(f=>{const h=s.encode(f);return[1,h.length,...h]}).flat())??[],u=i?[2,32,...ii(i)]:[],d=n?[3,4,...new Uint8Array(new Uint32Array([n]).buffer).reverse()]:[];return _n.encode(e,_n.toWords(new Uint8Array([...a,...l,...u,...d])),z1)}function bN(e){const t=_n.decode(e,z1),r=_n.fromWords(t.words),n=[];let i=0;for(;i<r.length;){const s=r[i],o=r[i+1],a=r.slice(i+2,i+2+o);n.push({type:s,length:o,value:kN(s,t.prefix,new Uint8Array(a))}),i+=2+o}return n}function kN(e,t,r){switch(e){case 0:return t==="naddr"||t==="nreq"?new TextDecoder().decode(r):Qe(r);case 2:return Qe(r);case 3:return new Uint32Array(new Uint8Array(r.reverse()).buffer)[0];case 1:return new TextDecoder().decode(r)}}var $1=(e=>(e[e.Search=50]="Search",e[e.GetMatchingEventIds=114]="GetMatchingEventIds",e))($1||{}),Sr,Bs;class Cu{constructor(t){z(this,Sr);z(this,Bs);this.instance=qs(),this.id=t,T(this,Sr,[])}get numFilters(){return c(this,Sr).length}get filterBuilders(){return c(this,Sr)}get options(){return c(this,Bs)}clear(){T(this,Sr,[]),T(this,Bs,void 0)}add(t){c(this,Sr).push(...c(t,Sr))}withFilter(){const t=new Ey;return c(this,Sr).push(t),t}withBareFilter(t){const r=new Ey(t);return c(this,Sr).push(r),r}withOptions(t){return T(this,Bs,{...c(this,Bs),...t}),this}buildRaw(){return c(this,Sr).map(t=>t.filter)}}Sr=new WeakMap,Bs=new WeakMap;var Oe;class Ey{constructor(t){z(this,Oe);T(this,Oe,t??{})}get filter(){return{...c(this,Oe)}}relay(t){var n;const r=Array.isArray(t)?t:[t];return c(this,Oe).relays=ji(c(this,Oe).relays,rt(r.map(i=>bn(i)))),((n=c(this,Oe).relays)==null?void 0:n.length)===0&&(c(this,Oe).relays=void 0),this}ids(t){return c(this,Oe).ids=ji(c(this,Oe).ids,t),this}authors(t){return t?(c(this,Oe).authors=ji(c(this,Oe).authors,t),c(this,Oe).authors=c(this,Oe).authors.filter(r=>r.length===64),this):this}kinds(t){return t?(c(this,Oe).kinds=ji(c(this,Oe).kinds,t),this):this}since(t){return t?(c(this,Oe).since=t,this):this}until(t){return t?(c(this,Oe).until=t,this):this}limit(t){return t?(c(this,Oe).limit=t,this):this}tag(t,r){return r?(c(this,Oe)[`#${t}`]=ji(c(this,Oe)[`#${t}`],r),this):this}tags(t){for(const r of t){const n=r.toEventTag();n&&this.tag(n[0],[n[1]])}return this}search(t){return t?(c(this,Oe).search=t,this):this}link(t){var r;return t.type===te.Address?this.tag("d",[t.id]).kinds([we(t.kind)]).authors([we(t.author)]):(t.id&&(t.kind===void 0||!Lt.isReplaceable(t.kind))&&this.ids([t.id]),t.author&&this.authors([t.author]),t.kind!==void 0&&this.kinds([t.kind])),(r=t.relays)==null||r.forEach(n=>this.relay(n)),this}replyToLink(t){if(Yr(t.map(i=>i.type)).length>1)throw new Error("Cannot add multiple links of different kinds");const n=rt(t.map(i=>i.toEventTag()));return this.tag(n[0][0],n.map(i=>i[1])),this.relay(rt(t.map(i=>i.relays).flat())),this}build(t,r){return t?t.forRequest(this.filter,r==null?void 0:r.outboxPickN):[this.filter]}}Oe=new WeakMap;class CN{constructor(t){this.value=t}equals(t){const r=t.toEventTag();return(r==null?void 0:r.at(0))===this.value.at(0)&&(r==null?void 0:r.at(1))===this.value.at(1)}toEventTag(){return this.value}}class Ee{constructor(t,r,n,i,s,o){if(this.type=t,this.id=r,this.kind=n,this.author=i,this.relays=s,this.marker=o,t!==te.Address&&!Hf(r))throw new Error(`ID must be hex: ${JSON.stringify(r)}`)}encode(t){try{let r=this.type===te.Address?this.type:t??this.type;return r===te.Note||r===te.PrivateKey||r===te.PublicKey?qd(r,this.id):SN(r,this.id,this.relays,this.kind,this.author)}catch(r){throw console.error("Invalid data",this,r),r}}get tagKey(){return this.type===te.Address?`${this.kind}:${this.author}:${this.id}`:this.id}toEventTag(t){const r=[];if(this.relays&&this.relays.length>0&&r.push(this.relays[0]),t&&(r[0]===void 0&&r.push(""),r.push(t)),this.type===te.PublicKey||this.type===te.Profile)return["p",this.id,...r];if(this.type===te.Note||this.type===te.Event)return this.author&&(r[0]===void 0&&r.push(""),r[1]===void 0&&r.push(""),r.push(this.author)),["e",this.id,...r];if(this.type===te.Address)return["a",`${this.kind}:${this.author}:${this.id}`,...r]}toEventTagNip22(t){t??(t=this.marker==="root");const r=[];if(this.relays&&this.relays.length>0&&r.push(this.relays[0]),this.type===te.PublicKey||this.type===te.Profile)return[t?"P":"p",this.id,...r];if(this.type===te.Note||this.type===te.Event)return this.author&&(r[0]===void 0&&r.push(""),r.push(this.author)),[t?"E":"e",this.id,...r];if(this.type===te.Address)return[t?"A":"a",`${this.kind}:${this.author}:${this.id}`,...r]}matchesEvent(t){if(this.type===te.Address){const r=es(t,"d");if(r&&r===this.id&&we(this.author)===t.pubkey&&we(this.kind)===t.kind)return!0}else if(this.type===te.Event||this.type===te.Note){const r=(n,i)=>!n||n===i;return(Lt.isReplaceable(t.kind)||r(this.id,t.id))&&r(this.author,t.pubkey)&&r(this.kind,t.kind)}return!1}isReplyToThis(t){if([he.Reaction,he.Repost,he.ZapReceipt].includes(t.kind)){const n=rt(t.tags.filter(i=>i[0]==="e"||i[0]==="a").map(i=>Ee.fromTag(i)));return n.length===0?!1:n.some(i=>i.equals(this))}else{const n=Lt.extractThread(t);if(!n||!n.root)return!1;if(n.root.key==="e"&&n.root.value===this.id&&(this.type===te.Event||this.type===te.Note))return!0;if(n.root.key==="a"&&this.type===te.Address){const[i,s,o]=we(n.root.value).split(":");if(Number(i)===this.kind&&s===this.author&&o===this.id)return!0}}return!1}referencesThis(t){for(const r of t.tags){if(r[0]==="e"&&r[1]===this.id&&(this.type===te.Event||this.type===te.Note))return!0;if(r[0]==="a"&&this.type===te.Address){const[n,i,s]=r[1].split(":");if(Number(n)===this.kind&&i===this.author&&s===this.id)return!0}if(r[0]==="p"&&(this.type===te.Profile||this.type===te.PublicKey)&&this.id===r[1])return!0}return!1}equals(t){return t.tagKey===this.tagKey}static fromTag(t,r,n){const i=t.length>2?[t[2]]:void 0;switch(t[0]){case"E":return new Ee(te.Event,t[1],n,r??t[3],i,"root");case"e":return new Ee(te.Event,t[1],n,r??t[4],i,t[3]);case"p":return new Ee(te.Profile,t[1],n,r,i);case"A":{const[s,o,a]=t[1].split(":");if(!Hf(o))throw new Error(`Invalid author in A tag: ${t[1]}`);return new Ee(te.Address,a,Number(s),o,i,"root")}case"a":{const[s,o,a]=t[1].split(":");if(!Hf(o))throw new Error(`Invalid author in a tag: ${t[1]}`);return new Ee(te.Address,a,Number(s),o,i,t[3])}}throw new Error("Unknown tag!")}static tryFromTag(t,r,n){try{return Ee.fromTag(t,r,n)}catch{}}static fromTags(t){return rt(t.map(r=>{try{return Ee.fromTag(r)}catch{}}))}static fromAllTags(t){return rt(t.map(r=>{try{return Ee.fromTag(r)}catch{return new CN(r)}}))}static fromEvent(t){let r="relays"in t?t.relays:void 0;const n=rt(t.tags.filter(i=>i[0]==="relays"||i[0]==="relay"||i[0]==="r"&&t.kind==he.Relays).flatMap(i=>i.slice(1).map(s=>bn(s))));if(r=ji(r,n),t.kind>=3e4&&t.kind<4e4){const i=we(es(t,"d"));return new Ee(te.Address,i,t.kind,t.pubkey,r)}return new Ee(te.Event,t.id,t.kind,t.pubkey,r)}static profile(t,r){return new Ee(te.Profile,t,void 0,void 0,r)}static publicKey(t,r){return new Ee(te.PublicKey,t,void 0,void 0,r)}}function NN(e,t){try{return LN(e,t)}catch{return}}function RN(e){var r;let t=e.startsWith("web+nostr:")||e.startsWith("nostr:")?e.split(":")[1]:e;return t=((r=t.match(wC))==null?void 0:r[0])??t,t}function LN(e,t){var i,s,o;const r=RN(e),n=a=>r.startsWith(a);if(n(te.PublicKey)){const a=ip(r);if(a.length!==64)throw new Error("Invalid nostr link, must contain 32 byte id");return new Ee(te.PublicKey,a)}else if(n(te.Note)){const a=ip(r);if(a.length!==64)throw new Error("Invalid nostr link, must contain 32 byte id");return new Ee(te.Note,a)}else if(n(te.Profile)||n(te.Event)||n(te.Address)||n(te.Req)){const a=bN(r),l=(i=a.find(h=>h.type===rl.Special))==null?void 0:i.value,u=a.filter(h=>h.type===rl.Relay).map(h=>h.value),d=(s=a.find(h=>h.type===rl.Author))==null?void 0:s.value,f=(o=a.find(h=>h.type===rl.Kind))==null?void 0:o.value;if(n(te.Profile)){if(l.length!==64)throw new Error("Invalid nostr link, must contain 32 byte id");return new Ee(te.Profile,l,f,d,u)}else if(n(te.Event)){if(l.length!==64)throw new Error("Invalid nostr link, must contain 32 byte id");return new Ee(te.Event,l,f,d,u)}else{if(n(te.Address))return new Ee(te.Address,l,f,d,u);if(n(te.Req))return new Ee(te.Req,l)}}throw new Error("Invalid nostr link")}var Os,qn,eu,Mi,oa,aa,la,ua,nn,vp,H1,W1,V1;const ws=class ws{constructor(){z(this,nn);z(this,Os);z(this,qn);z(this,eu);z(this,Mi);z(this,oa,[]);z(this,aa);z(this,la);z(this,ua)}get pubkey(){return c(this,Mi)}fromLink(t){t.kind&&T(this,Os,t.kind),t.author&&T(this,Mi,t.author),t.type===te.Address&&t.id&&this.tag(["d",t.id])}jitter(t){return T(this,ua,t),this}kind(t){return T(this,Os,t),this}content(t){return T(this,qn,t),this}createdAt(t){return T(this,eu,t),this}pubKey(t){return T(this,Mi,t),this}tag(t){return c(this,oa).some(n=>n.length===t.length&&n.every((i,s)=>i!==n[s]))?this:(c(this,oa).push(t),this)}pow(t,r){return T(this,aa,t),T(this,la,r??{minePow:(n,i)=>(Lt.minePow(n,i),Promise.resolve(n))}),this}processContent(){return c(this,qn)&&(T(this,qn,c(this,qn).replace(j3,r=>R(this,nn,W1).call(this,r))),[...c(this,qn).matchAll(R3)].map(r=>{R(this,nn,V1).call(this,r[0])})),this}build(){R(this,nn,H1).call(this);const t={id:"",pubkey:c(this,Mi)??"",content:c(this,qn)??"",kind:c(this,Os),created_at:(c(this,eu)??Kd())-(c(this,ua)?Math.floor(g3(c(this,ua))):0),tags:c(this,oa).sort((r,n)=>r[0].localeCompare(n[0]))};return ws.ClientTag&&ws.ClientTag[0]==="client"&&ws.ClientTag.length>1&&t.tags.push(ws.ClientTag),t.id=Lt.createId(t),t}async buildAndSign(t){if(typeof t=="string"){const r=this.pubKey(Qm(t)).build();return Lt.sign(await R(this,nn,vp).call(this,r),t)}else{const r=this.pubKey(await t.getPubKey()).build();return await t.sign(await R(this,nn,vp).call(this,r))}}};Os=new WeakMap,qn=new WeakMap,eu=new WeakMap,Mi=new WeakMap,oa=new WeakMap,aa=new WeakMap,la=new WeakMap,ua=new WeakMap,nn=new WeakSet,vp=async function(t){return c(this,aa)&&c(this,la)?await c(this,la).minePow(t,c(this,aa)):t},H1=function(){if(c(this,Os)===void 0)throw new Error("Kind must be set");if(c(this,Mi)===void 0)throw new Error("Pubkey must be set")},W1=function(t){const r=t.slice(1),n=NN(r);return n?((n.type===te.Profile||n.type===te.PublicKey)&&this.tag(["p",n.id]),`nostr:${n.encode()}`):t},V1=function(t){const r=t.slice(1);this.tag(["t",r.toLowerCase()])},ws.ClientTag=["client","snort_system"];let Ns=ws;const ps=[];u1(ps);class Ym{get supports(){const t=["nip04"];return window.nostr&&"nip44"in window.nostr&&t.push("nip44"),t}init(){return Promise.resolve()}async getPubKey(){if(!window.nostr)throw new Error("Cannot use NIP-07 signer, not found!");return await co(ps,()=>we(window.nostr).getPublicKey())}async nip4Encrypt(t,r){if(!window.nostr)throw new Error("Cannot use NIP-07 signer, not found!");return await co(ps,()=>{var n,i,s;return we((i=(n=window.nostr)==null?void 0:n.nip04)==null?void 0:i.encrypt).call((s=window.nostr)==null?void 0:s.nip04,r,t)})}async nip4Decrypt(t,r){if(!window.nostr)throw new Error("Cannot use NIP-07 signer, not found!");return await co(ps,()=>{var n,i,s;return we((i=(n=window.nostr)==null?void 0:n.nip04)==null?void 0:i.decrypt).call((s=window.nostr)==null?void 0:s.nip04,r,t)})}async nip44Encrypt(t,r){if(!window.nostr)throw new Error("Cannot use NIP-07 signer, not found!");return await co(ps,async()=>await globalThis.window.nostr.nip44.encrypt(r,t))}async nip44Decrypt(t,r){if(!window.nostr)throw new Error("Cannot use NIP-07 signer, not found!");return await co(ps,async()=>await globalThis.window.nostr.nip44.decrypt(r,t))}async sign(t){if(!window.nostr)throw new Error("Cannot use NIP-07 signer, not found!");return await co(ps,async()=>{const r=await we(window.nostr).signEvent(t);if(r.id!==t.id)throw new Error("Signer returned different event id! Please check your event format or contact the signer developer!");return{...t,sig:r.sig}})}}class Zm{static replyTo(t,r){const n=Ee.fromEvent(t),i=Zm.parseThread(t);if(i){const s=i.root||i.replyTo;s&&r.tag(we(s.toEventTag("root"))),r.tag(we(n.toEventTag("reply")));for(const o of i.pubKeys)o.id!==r.pubkey&&r.tag(we(o.toEventTag()))}else r.tag(we(n.toEventTag("root"))),t.pubkey!==r.pubkey&&r.tag(["p",t.pubkey])}static parseThread(t){const r={mentions:[],pubKeys:[]},n=t.tags.filter(i=>i[0]==="e"||i[0]==="a").map(i=>Ee.fromTag(i));if(n.length>0)if(!n.some(s=>s.marker))r.root=n[0],n.length>1&&(r.replyTo=n[n.length-1]),n.length>2&&(r.mentions=n.slice(1,-1));else{const s=n.find(a=>a.marker==="root"),o=n.find(a=>a.marker==="reply");r.root=s,r.replyTo=o,r.mentions=n.filter(a=>a.marker==="mention")}else return;return r.pubKeys=Yr(t.tags.filter(i=>i[0]==="p").map(i=>i[1])).map(i=>Ee.publicKey(i)),r}}class Xm{static rootScopeOf(t){const r=Ee.fromEvent(t);return t.tags.find(n=>["E","A","I"].includes(n[0]))??r.toEventTagNip22(!0)}static replyTo(t,r){const n=Ee.fromEvent(t),i=Xm.rootScopeOf(t),s=["K",es(t,"K")??t.kind.toString()],o=["P",es(t,"P")??t.pubkey],a=n.toEventTagNip22(!1),l=["k",t.kind.toString()],u=["p",t.pubkey];if(i===void 0||a===void 0)throw new Error("RootScope or ReplyScope are undefined!");r.tag(i),r.tag(s),r.tag(o),r.tag(a),r.tag(l),r.tag(u)}}var ir,sr,ca,tu,ge,pt,it;const pl=class pl{constructor(t,r){z(this,ge);z(this,ir);z(this,sr);z(this,ca);z(this,tu);T(this,sr,t),T(this,ir,r)}get signer(){return c(this,sr)}static async nip7(){if("nostr"in window){const t=new Ym,r=await t.getPubKey();if(r)return new pl(t,r)}}static privateKey(t){const r=new Jn(t);return new pl(r,r.getPubKey())}supports(t){return c(this,sr).supports.includes(t)}get pubKey(){return c(this,ir)}pow(t,r){const n=new pl(c(this,sr),c(this,ir));return T(n,ca,t),T(n,tu,r),n}async nip4Encrypt(t,r){return await c(this,sr).nip4Encrypt(t,r)}async nip4Decrypt(t,r){return await c(this,sr).nip4Decrypt(t,r)}async nip42Auth(t,r){const n=R(this,ge,pt).call(this,he.Auth);return n.tag(["relay",r]),n.tag(["challenge",t]),await R(this,ge,it).call(this,n)}async muted(t,r){const n=R(this,ge,pt).call(this,he.MuteList);if(t.forEach(i=>{n.tag(["p",i])}),r.length>0){const i=r.map(o=>["p",o]),s=JSON.stringify(i);n.content(await this.nip4Encrypt(s,c(this,ir)))}return await R(this,ge,it).call(this,n)}async pinned(t){const r=R(this,ge,pt).call(this,he.PinList);return t.forEach(n=>{r.tag(we(n.toEventTag()))}),await R(this,ge,it).call(this,r)}async bookmarks(t){const r=R(this,ge,pt).call(this,he.BookmarksList);return t.forEach(n=>{r.tag(we(n.toEventTag()))}),await R(this,ge,it).call(this,r)}async metadata(t){const r=R(this,ge,pt).call(this,he.SetMetadata);return r.content(JSON.stringify(t)),await R(this,ge,it).call(this,r)}async note(t,r){const n=R(this,ge,pt).call(this,he.TextNote);return n.content(t),n.processContent(),r==null||r(n),await R(this,ge,it).call(this,n)}async zap(t,r,n,i,s,o){const a=R(this,ge,pt).call(this,he.ZapRequest);return a.content((s==null?void 0:s.trim())??""),i&&a.tag(we(i.toEventTag()).slice(0,2)),a.tag(["p",r]),a.tag(["relays",...n.map(l=>l.trim())]),a.tag(["amount",t.toString()]),a.processContent(),o==null||o(a),await R(this,ge,it).call(this,a)}async reply(t,r,n){const i=t.kind===he.TextNote?he.TextNote:he.Comment,s=R(this,ge,pt).call(this,i);return s.content(r),i===he.TextNote?Zm.replyTo(t,s):Xm.replyTo(t,s),s.processContent(),n==null||n(s),await R(this,ge,it).call(this,s)}async react(t,r="+"){const n=R(this,ge,pt).call(this,he.Reaction);return n.content(r),n.tag(we(Ee.fromEvent(t).toEventTag())),n.tag(["p",t.pubkey]),n.tag(["k",t.kind.toString()]),await R(this,ge,it).call(this,n)}async relayList(t){Array.isArray(t)||(t=Object.entries(t).map(([n,i])=>({url:n,settings:i})));const r=R(this,ge,pt).call(this,he.Relays);for(const n of t){const i=U3(n);i&&r.tag(i)}return await R(this,ge,it).call(this,r)}async contactList(t,r){const n=R(this,ge,pt).call(this,he.ContactList);return t.forEach(i=>n.tag(i)),r&&n.content(JSON.stringify(r)),await R(this,ge,it).call(this,n)}async delete(t){const r=R(this,ge,pt).call(this,he.Deletion);return r.tag(["e",t]),await R(this,ge,it).call(this,r)}async repost(t){const r=R(this,ge,pt).call(this,he.Repost);return r.tag(we(Ee.fromEvent(t).toEventTag())),r.tag(["p",t.pubkey]),await R(this,ge,it).call(this,r)}async decryptDm(t){var n;if(t.kind===he.SealedRumor)return(await this.unsealRumor(t)).content;if(t.kind===he.DirectMessage&&t.pubkey!==c(this,ir)&&!t.tags.some(i=>i[1]===c(this,ir)))throw new Error("Can't decrypt, DM does not belong to this user");const r=t.pubkey===c(this,ir)?we((n=t.tags.find(i=>i[0]==="p"))==null?void 0:n[1]):t.pubkey;return await this.nip4Decrypt(t.content,r)}async sendDm(t,r){const n=R(this,ge,pt).call(this,he.DirectMessage);return n.content(await this.nip4Encrypt(t,r)),n.tag(["p",r]),await R(this,ge,it).call(this,n)}async generic(t){const r=new Ns;return r.pubKey(c(this,ir)),t(r),await R(this,ge,it).call(this,r)}async appData(t,r){const n=R(this,ge,pt).call(this,he.AppData);return n.content(await this.nip4Encrypt(JSON.stringify(t),c(this,ir))),n.tag(["d",r]),await R(this,ge,it).call(this,n)}async giftWrap(t,r,n,i){const s=Qe(ro.utils.randomPrivateKey()),o=new Jn(s),a=r??es(t,"p");if(!a)throw new Error("Inner event must have a p tag");const l=new Ns;return l.pubKey(o.getPubKey()),l.kind(he.GiftWrap),l.tag(["p",a]),n&&l.pow(n,i),l.content(await o.nip44Encrypt(JSON.stringify(t),a)),l.jitter(60*60*24),await l.buildAndSign(s)}async unwrapGift(t){const r=await c(this,sr).nip44Decrypt(t.content,t.pubkey);return JSON.parse(r)}createUnsigned(t,r,n){const i=new Ns;return i.pubKey(this.pubKey),i.kind(t),i.content(r),n(i),i.build()}async sealRumor(t,r){const n=R(this,ge,pt).call(this,he.SealedRumor);return n.content(await c(this,sr).nip44Encrypt(JSON.stringify(t),r)),await R(this,ge,it).call(this,n)}async unsealRumor(t){if(t.kind!==he.SealedRumor)throw new Error("Not a sealed rumor event");const r=await c(this,sr).nip44Decrypt(t.content,t.pubkey);return JSON.parse(r)}};ir=new WeakMap,sr=new WeakMap,ca=new WeakMap,tu=new WeakMap,ge=new WeakSet,pt=function(t){return new Ns().pubKey(c(this,ir)).kind(t)},it=async function(t){return await(c(this,ca)?t.pow(c(this,ca),c(this,tu)):t).buildAndSign(c(this,sr))};let hl=pl;function jN(e){if(!(e.kind!==0&&e.kind!==31990))try{let r={...JSON.parse(e.content),pubkey:e.pubkey,npub:qd("npub",e.pubkey),created:e.created_at,loaded:ke()};for(const[n,i]of Object.entries(r))typeof i!="number"&&typeof i!="string"&&(r[n]=void 0);return r}catch(t){console.error("Failed to parse JSON",e,t)}}class _N extends h1{name(){return"ProfileLoaderService"}onEvent(t){return jN(t)}getExpireCutoff(){return ke()-L3}buildSub(t){const r=new Cu("profiles");return r.withFilter().kinds([he.SetMetadata]).authors(t),r}}const fo=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,q1=new Set,xp=typeof process=="object"&&process?process:{},K1=(e,t,r,n)=>{typeof xp.emitWarning=="function"?xp.emitWarning(e,t,r,n):console.error(`[${r}] ${t}: ${e}`)};let yd=globalThis.AbortController,Sy=globalThis.AbortSignal;var Oy;if(typeof yd>"u"){Sy=class{constructor(){Se(this,"onabort");Se(this,"_onabort",[]);Se(this,"reason");Se(this,"aborted",!1)}addEventListener(n,i){this._onabort.push(i)}},yd=class{constructor(){Se(this,"signal",new Sy);t()}abort(n){var i,s;if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(const o of this.signal._onabort)o(n);(s=(i=this.signal).onabort)==null||s.call(i,n)}}};let e=((Oy=xp.env)==null?void 0:Oy.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const t=()=>{e&&(e=!1,K1("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}const AN=e=>!q1.has(e),wi=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),G1=e=>wi(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?_c:null:null;class _c extends Array{constructor(t){super(t),this.fill(0)}}var da;const vs=class vs{constructor(t,r){Se(this,"heap");Se(this,"length");if(!c(vs,da))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(t),this.length=0}static create(t){const r=G1(t);if(!r)return[];T(vs,da,!0);const n=new vs(t,r);return T(vs,da,!1),n}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}};da=new WeakMap,z(vs,da,!1);let Ep=vs;var Iy,Dy,zr,or,$r,Hr,fa,ha,Xe,Wr,Ke,Te,ce,Pt,ar,Nt,ot,Vr,at,qr,Kr,lr,Gr,Bi,Ut,Y,bp,Is,Kn,ru,ur,Q1,Ds,pa,nu,vi,xi,kp,Ac,Tc,Ae,Cp,nl,Ei,Np;const i0=class i0{constructor(t){z(this,Y);z(this,zr);z(this,or);z(this,$r);z(this,Hr);z(this,fa);z(this,ha);Se(this,"ttl");Se(this,"ttlResolution");Se(this,"ttlAutopurge");Se(this,"updateAgeOnGet");Se(this,"updateAgeOnHas");Se(this,"allowStale");Se(this,"noDisposeOnSet");Se(this,"noUpdateTTL");Se(this,"maxEntrySize");Se(this,"sizeCalculation");Se(this,"noDeleteOnFetchRejection");Se(this,"noDeleteOnStaleGet");Se(this,"allowStaleOnFetchAbort");Se(this,"allowStaleOnFetchRejection");Se(this,"ignoreFetchAbort");z(this,Xe);z(this,Wr);z(this,Ke);z(this,Te);z(this,ce);z(this,Pt);z(this,ar);z(this,Nt);z(this,ot);z(this,Vr);z(this,at);z(this,qr);z(this,Kr);z(this,lr);z(this,Gr);z(this,Bi);z(this,Ut);z(this,Is,()=>{});z(this,Kn,()=>{});z(this,ru,()=>{});z(this,ur,()=>!1);z(this,Ds,t=>{});z(this,pa,(t,r,n)=>{});z(this,nu,(t,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});Se(this,Iy,"LRUCache");const{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:l,dispose:u,disposeAfter:d,noDisposeOnSet:f,noUpdateTTL:h,maxSize:w=0,maxEntrySize:E=0,sizeCalculation:S,fetchMethod:x,memoMethod:p,noDeleteOnFetchRejection:g,noDeleteOnStaleGet:y,allowStaleOnFetchRejection:b,allowStaleOnFetchAbort:L,ignoreFetchAbort:v}=t;if(r!==0&&!wi(r))throw new TypeError("max option must be a nonnegative integer");const F=r?G1(r):Array;if(!F)throw new Error("invalid max value: "+r);if(T(this,zr,r),T(this,or,w),this.maxEntrySize=E||c(this,or),this.sizeCalculation=S,this.sizeCalculation){if(!c(this,or)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(p!==void 0&&typeof p!="function")throw new TypeError("memoMethod must be a function if defined");if(T(this,ha,p),x!==void 0&&typeof x!="function")throw new TypeError("fetchMethod must be a function if specified");if(T(this,fa,x),T(this,Bi,!!x),T(this,Ke,new Map),T(this,Te,new Array(r).fill(void 0)),T(this,ce,new Array(r).fill(void 0)),T(this,Pt,new F(r)),T(this,ar,new F(r)),T(this,Nt,0),T(this,ot,0),T(this,Vr,Ep.create(r)),T(this,Xe,0),T(this,Wr,0),typeof u=="function"&&T(this,$r,u),typeof d=="function"?(T(this,Hr,d),T(this,at,[])):(T(this,Hr,void 0),T(this,at,void 0)),T(this,Gr,!!c(this,$r)),T(this,Ut,!!c(this,Hr)),this.noDisposeOnSet=!!f,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!g,this.allowStaleOnFetchRejection=!!b,this.allowStaleOnFetchAbort=!!L,this.ignoreFetchAbort=!!v,this.maxEntrySize!==0){if(c(this,or)!==0&&!wi(c(this,or)))throw new TypeError("maxSize must be a positive integer if specified");if(!wi(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");R(this,Y,Q1).call(this)}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!y,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=wi(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=n||0,this.ttl){if(!wi(this.ttl))throw new TypeError("ttl must be a positive integer if specified");R(this,Y,bp).call(this)}if(c(this,zr)===0&&this.ttl===0&&c(this,or)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!c(this,zr)&&!c(this,or)){const O="LRU_CACHE_UNBOUNDED";AN(O)&&(q1.add(O),K1("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",O,i0))}}static unsafeExposeInternals(t){return{starts:c(t,Kr),ttls:c(t,lr),sizes:c(t,qr),keyMap:c(t,Ke),keyList:c(t,Te),valList:c(t,ce),next:c(t,Pt),prev:c(t,ar),get head(){return c(t,Nt)},get tail(){return c(t,ot)},free:c(t,Vr),isBackgroundFetch:r=>{var n;return R(n=t,Y,Ae).call(n,r)},backgroundFetch:(r,n,i,s)=>{var o;return R(o=t,Y,Tc).call(o,r,n,i,s)},moveToTail:r=>{var n;return R(n=t,Y,nl).call(n,r)},indexes:r=>{var n;return R(n=t,Y,vi).call(n,r)},rindexes:r=>{var n;return R(n=t,Y,xi).call(n,r)},isStale:r=>{var n;return c(n=t,ur).call(n,r)}}}get max(){return c(this,zr)}get maxSize(){return c(this,or)}get calculatedSize(){return c(this,Wr)}get size(){return c(this,Xe)}get fetchMethod(){return c(this,fa)}get memoMethod(){return c(this,ha)}get dispose(){return c(this,$r)}get disposeAfter(){return c(this,Hr)}getRemainingTTL(t){return c(this,Ke).has(t)?1/0:0}*entries(){for(const t of R(this,Y,vi).call(this))c(this,ce)[t]!==void 0&&c(this,Te)[t]!==void 0&&!R(this,Y,Ae).call(this,c(this,ce)[t])&&(yield[c(this,Te)[t],c(this,ce)[t]])}*rentries(){for(const t of R(this,Y,xi).call(this))c(this,ce)[t]!==void 0&&c(this,Te)[t]!==void 0&&!R(this,Y,Ae).call(this,c(this,ce)[t])&&(yield[c(this,Te)[t],c(this,ce)[t]])}*keys(){for(const t of R(this,Y,vi).call(this)){const r=c(this,Te)[t];r!==void 0&&!R(this,Y,Ae).call(this,c(this,ce)[t])&&(yield r)}}*rkeys(){for(const t of R(this,Y,xi).call(this)){const r=c(this,Te)[t];r!==void 0&&!R(this,Y,Ae).call(this,c(this,ce)[t])&&(yield r)}}*values(){for(const t of R(this,Y,vi).call(this))c(this,ce)[t]!==void 0&&!R(this,Y,Ae).call(this,c(this,ce)[t])&&(yield c(this,ce)[t])}*rvalues(){for(const t of R(this,Y,xi).call(this))c(this,ce)[t]!==void 0&&!R(this,Y,Ae).call(this,c(this,ce)[t])&&(yield c(this,ce)[t])}[(Dy=Symbol.iterator,Iy=Symbol.toStringTag,Dy)](){return this.entries()}find(t,r={}){for(const n of R(this,Y,vi).call(this)){const i=c(this,ce)[n],s=R(this,Y,Ae).call(this,i)?i.__staleWhileFetching:i;if(s!==void 0&&t(s,c(this,Te)[n],this))return this.get(c(this,Te)[n],r)}}forEach(t,r=this){for(const n of R(this,Y,vi).call(this)){const i=c(this,ce)[n],s=R(this,Y,Ae).call(this,i)?i.__staleWhileFetching:i;s!==void 0&&t.call(r,s,c(this,Te)[n],this)}}rforEach(t,r=this){for(const n of R(this,Y,xi).call(this)){const i=c(this,ce)[n],s=R(this,Y,Ae).call(this,i)?i.__staleWhileFetching:i;s!==void 0&&t.call(r,s,c(this,Te)[n],this)}}purgeStale(){let t=!1;for(const r of R(this,Y,xi).call(this,{allowStale:!0}))c(this,ur).call(this,r)&&(R(this,Y,Ei).call(this,c(this,Te)[r],"expire"),t=!0);return t}info(t){const r=c(this,Ke).get(t);if(r===void 0)return;const n=c(this,ce)[r],i=R(this,Y,Ae).call(this,n)?n.__staleWhileFetching:n;if(i===void 0)return;const s={value:i};if(c(this,lr)&&c(this,Kr)){const o=c(this,lr)[r],a=c(this,Kr)[r];if(o&&a){const l=o-(fo.now()-a);s.ttl=l,s.start=Date.now()}}return c(this,qr)&&(s.size=c(this,qr)[r]),s}dump(){const t=[];for(const r of R(this,Y,vi).call(this,{allowStale:!0})){const n=c(this,Te)[r],i=c(this,ce)[r],s=R(this,Y,Ae).call(this,i)?i.__staleWhileFetching:i;if(s===void 0||n===void 0)continue;const o={value:s};if(c(this,lr)&&c(this,Kr)){o.ttl=c(this,lr)[r];const a=fo.now()-c(this,Kr)[r];o.start=Math.floor(Date.now()-a)}c(this,qr)&&(o.size=c(this,qr)[r]),t.unshift([n,o])}return t}load(t){this.clear();for(const[r,n]of t){if(n.start){const i=Date.now()-n.start;n.start=fo.now()-i}this.set(r,n.value,n)}}set(t,r,n={}){var h,w,E,S,x;if(r===void 0)return this.delete(t),this;const{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=n;let{noUpdateTTL:u=this.noUpdateTTL}=n;const d=c(this,nu).call(this,t,r,n.size||0,a);if(this.maxEntrySize&&d>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),R(this,Y,Ei).call(this,t,"set"),this;let f=c(this,Xe)===0?void 0:c(this,Ke).get(t);if(f===void 0)f=c(this,Xe)===0?c(this,ot):c(this,Vr).length!==0?c(this,Vr).pop():c(this,Xe)===c(this,zr)?R(this,Y,Ac).call(this,!1):c(this,Xe),c(this,Te)[f]=t,c(this,ce)[f]=r,c(this,Ke).set(t,f),c(this,Pt)[c(this,ot)]=f,c(this,ar)[f]=c(this,ot),T(this,ot,f),fi(this,Xe)._++,c(this,pa).call(this,f,d,l),l&&(l.set="add"),u=!1;else{R(this,Y,nl).call(this,f);const p=c(this,ce)[f];if(r!==p){if(c(this,Bi)&&R(this,Y,Ae).call(this,p)){p.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:g}=p;g!==void 0&&!o&&(c(this,Gr)&&((h=c(this,$r))==null||h.call(this,g,t,"set")),c(this,Ut)&&((w=c(this,at))==null||w.push([g,t,"set"])))}else o||(c(this,Gr)&&((E=c(this,$r))==null||E.call(this,p,t,"set")),c(this,Ut)&&((S=c(this,at))==null||S.push([p,t,"set"])));if(c(this,Ds).call(this,f),c(this,pa).call(this,f,d,l),c(this,ce)[f]=r,l){l.set="replace";const g=p&&R(this,Y,Ae).call(this,p)?p.__staleWhileFetching:p;g!==void 0&&(l.oldValue=g)}}else l&&(l.set="update")}if(i!==0&&!c(this,lr)&&R(this,Y,bp).call(this),c(this,lr)&&(u||c(this,ru).call(this,f,i,s),l&&c(this,Kn).call(this,l,f)),!o&&c(this,Ut)&&c(this,at)){const p=c(this,at);let g;for(;g=p==null?void 0:p.shift();)(x=c(this,Hr))==null||x.call(this,...g)}return this}pop(){var t;try{for(;c(this,Xe);){const r=c(this,ce)[c(this,Nt)];if(R(this,Y,Ac).call(this,!0),R(this,Y,Ae).call(this,r)){if(r.__staleWhileFetching)return r.__staleWhileFetching}else if(r!==void 0)return r}}finally{if(c(this,Ut)&&c(this,at)){const r=c(this,at);let n;for(;n=r==null?void 0:r.shift();)(t=c(this,Hr))==null||t.call(this,...n)}}}has(t,r={}){const{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,s=c(this,Ke).get(t);if(s!==void 0){const o=c(this,ce)[s];if(R(this,Y,Ae).call(this,o)&&o.__staleWhileFetching===void 0)return!1;if(c(this,ur).call(this,s))i&&(i.has="stale",c(this,Kn).call(this,i,s));else return n&&c(this,Is).call(this,s),i&&(i.has="hit",c(this,Kn).call(this,i,s)),!0}else i&&(i.has="miss");return!1}peek(t,r={}){const{allowStale:n=this.allowStale}=r,i=c(this,Ke).get(t);if(i===void 0||!n&&c(this,ur).call(this,i))return;const s=c(this,ce)[i];return R(this,Y,Ae).call(this,s)?s.__staleWhileFetching:s}async fetch(t,r={}){const{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:w=this.ignoreFetchAbort,allowStaleOnFetchAbort:E=this.allowStaleOnFetchAbort,context:S,forceRefresh:x=!1,status:p,signal:g}=r;if(!c(this,Bi))return p&&(p.fetch="get"),this.get(t,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:p});const y={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:u,noUpdateTTL:d,noDeleteOnFetchRejection:f,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:E,ignoreFetchAbort:w,status:p,signal:g};let b=c(this,Ke).get(t);if(b===void 0){p&&(p.fetch="miss");const L=R(this,Y,Tc).call(this,t,b,y,S);return L.__returned=L}else{const L=c(this,ce)[b];if(R(this,Y,Ae).call(this,L)){const k=n&&L.__staleWhileFetching!==void 0;return p&&(p.fetch="inflight",k&&(p.returnedStale=!0)),k?L.__staleWhileFetching:L.__returned=L}const v=c(this,ur).call(this,b);if(!x&&!v)return p&&(p.fetch="hit"),R(this,Y,nl).call(this,b),i&&c(this,Is).call(this,b),p&&c(this,Kn).call(this,p,b),L;const F=R(this,Y,Tc).call(this,t,b,y,S),M=F.__staleWhileFetching!==void 0&&n;return p&&(p.fetch=v?"stale":"refresh",M&&v&&(p.returnedStale=!0)),M?F.__staleWhileFetching:F.__returned=F}}async forceFetch(t,r={}){const n=await this.fetch(t,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(t,r={}){const n=c(this,ha);if(!n)throw new Error("no memoMethod provided to constructor");const{context:i,forceRefresh:s,...o}=r,a=this.get(t,o);if(!s&&a!==void 0)return a;const l=n(t,a,{options:o,context:i});return this.set(t,l,o),l}get(t,r={}){const{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=r,a=c(this,Ke).get(t);if(a!==void 0){const l=c(this,ce)[a],u=R(this,Y,Ae).call(this,l);return o&&c(this,Kn).call(this,o,a),c(this,ur).call(this,a)?(o&&(o.get="stale"),u?(o&&n&&l.__staleWhileFetching!==void 0&&(o.returnedStale=!0),n?l.__staleWhileFetching:void 0):(s||R(this,Y,Ei).call(this,t,"expire"),o&&n&&(o.returnedStale=!0),n?l:void 0)):(o&&(o.get="hit"),u?l.__staleWhileFetching:(R(this,Y,nl).call(this,a),i&&c(this,Is).call(this,a),l))}else o&&(o.get="miss")}delete(t){return R(this,Y,Ei).call(this,t,"delete")}clear(){return R(this,Y,Np).call(this,"delete")}};zr=new WeakMap,or=new WeakMap,$r=new WeakMap,Hr=new WeakMap,fa=new WeakMap,ha=new WeakMap,Xe=new WeakMap,Wr=new WeakMap,Ke=new WeakMap,Te=new WeakMap,ce=new WeakMap,Pt=new WeakMap,ar=new WeakMap,Nt=new WeakMap,ot=new WeakMap,Vr=new WeakMap,at=new WeakMap,qr=new WeakMap,Kr=new WeakMap,lr=new WeakMap,Gr=new WeakMap,Bi=new WeakMap,Ut=new WeakMap,Y=new WeakSet,bp=function(){const t=new _c(c(this,zr)),r=new _c(c(this,zr));T(this,lr,t),T(this,Kr,r),T(this,ru,(s,o,a=fo.now())=>{if(r[s]=o!==0?a:0,t[s]=o,o!==0&&this.ttlAutopurge){const l=setTimeout(()=>{c(this,ur).call(this,s)&&R(this,Y,Ei).call(this,c(this,Te)[s],"expire")},o+1);l.unref&&l.unref()}}),T(this,Is,s=>{r[s]=t[s]!==0?fo.now():0}),T(this,Kn,(s,o)=>{if(t[o]){const a=t[o],l=r[o];if(!a||!l)return;s.ttl=a,s.start=l,s.now=n||i();const u=s.now-l;s.remainingTTL=a-u}});let n=0;const i=()=>{const s=fo.now();if(this.ttlResolution>0){n=s;const o=setTimeout(()=>n=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{const o=c(this,Ke).get(s);if(o===void 0)return 0;const a=t[o],l=r[o];if(!a||!l)return 1/0;const u=(n||i())-l;return a-u},T(this,ur,s=>{const o=r[s],a=t[s];return!!a&&!!o&&(n||i())-o>a})},Is=new WeakMap,Kn=new WeakMap,ru=new WeakMap,ur=new WeakMap,Q1=function(){const t=new _c(c(this,zr));T(this,Wr,0),T(this,qr,t),T(this,Ds,r=>{T(this,Wr,c(this,Wr)-t[r]),t[r]=0}),T(this,nu,(r,n,i,s)=>{if(R(this,Y,Ae).call(this,n))return 0;if(!wi(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(n,r),!wi(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i}),T(this,pa,(r,n,i)=>{if(t[r]=n,c(this,or)){const s=c(this,or)-t[r];for(;c(this,Wr)>s;)R(this,Y,Ac).call(this,!0)}T(this,Wr,c(this,Wr)+t[r]),i&&(i.entrySize=n,i.totalCalculatedSize=c(this,Wr))})},Ds=new WeakMap,pa=new WeakMap,nu=new WeakMap,vi=function*({allowStale:t=this.allowStale}={}){if(c(this,Xe))for(let r=c(this,ot);!(!R(this,Y,kp).call(this,r)||((t||!c(this,ur).call(this,r))&&(yield r),r===c(this,Nt)));)r=c(this,ar)[r]},xi=function*({allowStale:t=this.allowStale}={}){if(c(this,Xe))for(let r=c(this,Nt);!(!R(this,Y,kp).call(this,r)||((t||!c(this,ur).call(this,r))&&(yield r),r===c(this,ot)));)r=c(this,Pt)[r]},kp=function(t){return t!==void 0&&c(this,Ke).get(c(this,Te)[t])===t},Ac=function(t){var s,o;const r=c(this,Nt),n=c(this,Te)[r],i=c(this,ce)[r];return c(this,Bi)&&R(this,Y,Ae).call(this,i)?i.__abortController.abort(new Error("evicted")):(c(this,Gr)||c(this,Ut))&&(c(this,Gr)&&((s=c(this,$r))==null||s.call(this,i,n,"evict")),c(this,Ut)&&((o=c(this,at))==null||o.push([i,n,"evict"]))),c(this,Ds).call(this,r),t&&(c(this,Te)[r]=void 0,c(this,ce)[r]=void 0,c(this,Vr).push(r)),c(this,Xe)===1?(T(this,Nt,T(this,ot,0)),c(this,Vr).length=0):T(this,Nt,c(this,Pt)[r]),c(this,Ke).delete(n),fi(this,Xe)._--,r},Tc=function(t,r,n,i){const s=r===void 0?void 0:c(this,ce)[r];if(R(this,Y,Ae).call(this,s))return s;const o=new yd,{signal:a}=n;a==null||a.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});const l={signal:o.signal,options:n,context:i},u=(S,x=!1)=>{const{aborted:p}=o.signal,g=n.ignoreFetchAbort&&S!==void 0;if(n.status&&(p&&!x?(n.status.fetchAborted=!0,n.status.fetchError=o.signal.reason,g&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),p&&!g&&!x)return f(o.signal.reason);const y=w;return c(this,ce)[r]===w&&(S===void 0?y.__staleWhileFetching?c(this,ce)[r]=y.__staleWhileFetching:R(this,Y,Ei).call(this,t,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(t,S,l.options))),S},d=S=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=S),f(S)),f=S=>{const{aborted:x}=o.signal,p=x&&n.allowStaleOnFetchAbort,g=p||n.allowStaleOnFetchRejection,y=g||n.noDeleteOnFetchRejection,b=w;if(c(this,ce)[r]===w&&(!y||b.__staleWhileFetching===void 0?R(this,Y,Ei).call(this,t,"fetch"):p||(c(this,ce)[r]=b.__staleWhileFetching)),g)return n.status&&b.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),b.__staleWhileFetching;if(b.__returned===b)throw S},h=(S,x)=>{var g;const p=(g=c(this,fa))==null?void 0:g.call(this,t,s,l);p&&p instanceof Promise&&p.then(y=>S(y===void 0?void 0:y),x),o.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(S(void 0),n.allowStaleOnFetchAbort&&(S=y=>u(y,!0)))})};n.status&&(n.status.fetchDispatched=!0);const w=new Promise(h).then(u,d),E=Object.assign(w,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return r===void 0?(this.set(t,E,{...l.options,status:void 0}),r=c(this,Ke).get(t)):c(this,ce)[r]=E,E},Ae=function(t){if(!c(this,Bi))return!1;const r=t;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof yd},Cp=function(t,r){c(this,ar)[r]=t,c(this,Pt)[t]=r},nl=function(t){t!==c(this,ot)&&(t===c(this,Nt)?T(this,Nt,c(this,Pt)[t]):R(this,Y,Cp).call(this,c(this,ar)[t],c(this,Pt)[t]),R(this,Y,Cp).call(this,c(this,ot),t),T(this,ot,t))},Ei=function(t,r){var i,s,o,a;let n=!1;if(c(this,Xe)!==0){const l=c(this,Ke).get(t);if(l!==void 0)if(n=!0,c(this,Xe)===1)R(this,Y,Np).call(this,r);else{c(this,Ds).call(this,l);const u=c(this,ce)[l];if(R(this,Y,Ae).call(this,u)?u.__abortController.abort(new Error("deleted")):(c(this,Gr)||c(this,Ut))&&(c(this,Gr)&&((i=c(this,$r))==null||i.call(this,u,t,r)),c(this,Ut)&&((s=c(this,at))==null||s.push([u,t,r]))),c(this,Ke).delete(t),c(this,Te)[l]=void 0,c(this,ce)[l]=void 0,l===c(this,ot))T(this,ot,c(this,ar)[l]);else if(l===c(this,Nt))T(this,Nt,c(this,Pt)[l]);else{const d=c(this,ar)[l];c(this,Pt)[d]=c(this,Pt)[l];const f=c(this,Pt)[l];c(this,ar)[f]=c(this,ar)[l]}fi(this,Xe)._--,c(this,Vr).push(l)}}if(c(this,Ut)&&((o=c(this,at))!=null&&o.length)){const l=c(this,at);let u;for(;u=l==null?void 0:l.shift();)(a=c(this,Hr))==null||a.call(this,...u)}return n},Np=function(t){var r,n,i;for(const s of R(this,Y,xi).call(this,{allowStale:!0})){const o=c(this,ce)[s];if(R(this,Y,Ae).call(this,o))o.__abortController.abort(new Error("deleted"));else{const a=c(this,Te)[s];c(this,Gr)&&((r=c(this,$r))==null||r.call(this,o,a,t)),c(this,Ut)&&((n=c(this,at))==null||n.push([o,a,t]))}}if(c(this,Ke).clear(),c(this,ce).fill(void 0),c(this,Te).fill(void 0),c(this,lr)&&c(this,Kr)&&(c(this,lr).fill(0),c(this,Kr).fill(0)),c(this,qr)&&c(this,qr).fill(0),T(this,Nt,0),T(this,ot,0),c(this,Vr).length=0,T(this,Wr,0),T(this,Xe,0),c(this,Ut)&&c(this,at)){const s=c(this,at);let o;for(;o=s==null?void 0:s.shift();)(i=c(this,Hr))==null||i.call(this,...o)}};let Sp=i0;on("zaps");new Sp({max:1e3});var Gn,iu,Rp;class by{constructor(t,r){z(this,iu);z(this,Gn);this.privKey=t,this.pubKey=r}getSharedSecret(t,r){return ro.getSharedSecret(t,"02"+r).slice(1,33)}async encryptData(t){c(this,Gn)||T(this,Gn,await R(this,iu,Rp).call(this,this.getSharedSecret(this.privKey,this.pubKey)));const r=window.crypto.getRandomValues(new Uint8Array(16)),n=new TextEncoder().encode(t),i=await window.crypto.subtle.encrypt({name:"AES-CBC",iv:r},c(this,Gn),n);return`${kn.encode(new Uint8Array(i))}?iv=${kn.encode(r)}`}async decryptData(t){c(this,Gn)||T(this,Gn,await R(this,iu,Rp).call(this,this.getSharedSecret(this.privKey,this.pubKey)));const[r,n]=t.split("?iv="),i=await window.crypto.subtle.decrypt({name:"AES-CBC",iv:kn.decode(n)},c(this,Gn),kn.decode(r));return new TextDecoder().decode(i)}}Gn=new WeakMap,iu=new WeakSet,Rp=async function(t){return await window.crypto.subtle.importKey("raw",t,{name:"AES-CBC"},!1,["encrypt","decrypt"])};function Kf(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function ky(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function TN(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function oc(e,...t){if(!TN(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const Qi=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),PN=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!PN)throw new Error("Non little-endian hardware is not supported");function UN(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function FN(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}function Cy(e){return Uint8Array.from(e)}function MN(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}const Y1=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),BN=Y1("expand 16-byte k"),ON=Y1("expand 32-byte k"),IN=Qi(BN),Z1=Qi(ON);Z1.slice();function xe(e,t){return e<<t|e>>>32-t}function Lp(e){return e.byteOffset%4===0}const ac=64,DN=16,X1=2**32-1,Ny=new Uint32Array;function zN(e,t,r,n,i,s,o,a){const l=i.length,u=new Uint8Array(ac),d=Qi(u),f=Lp(i)&&Lp(s),h=f?Qi(i):Ny,w=f?Qi(s):Ny;for(let E=0;E<l;o++){if(e(t,r,n,d,o,a),o>=X1)throw new Error("arx: counter overflow");const S=Math.min(ac,l-E);if(f&&S===ac){const x=E/4;if(E%4!==0)throw new Error("arx: invalid block position");for(let p=0,g;p<DN;p++)g=x+p,w[g]=h[g]^d[p];E+=ac;continue}for(let x=0,p;x<S;x++)p=E+x,s[p]=i[p]^u[x];E+=S}}function $N(e,t){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:o}=UN({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return Kf(i),Kf(o),ky(s),ky(r),(a,l,u,d,f=0)=>{oc(a),oc(l),oc(u);const h=u.length;if(d===void 0&&(d=new Uint8Array(h)),oc(d),Kf(f),f<0||f>=X1)throw new Error("arx: counter overflow");if(d.length<h)throw new Error(`arx: output (${d.length}) is shorter than data (${h})`);const w=[];let E=a.length,S,x;if(E===32)w.push(S=Cy(a)),x=Z1;else if(E===16&&r)S=new Uint8Array(32),S.set(a),S.set(a,16),x=IN,w.push(S);else throw new Error(`arx: invalid 32-byte key, got length=${E}`);Lp(l)||w.push(l=Cy(l));const p=Qi(S);if(n){if(l.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(x,p,Qi(l.subarray(0,16)),p),l=l.subarray(16)}const g=16-i;if(g!==l.length)throw new Error(`arx: nonce must be ${g} or 16 bytes`);if(g!==12){const b=new Uint8Array(12);b.set(l,s?0:12-l.length),l=b,w.push(l)}const y=Qi(l);return zN(e,x,p,y,u,d,f,o),MN(...w),d}}function HN(e,t,r,n,i,s=20){let o=e[0],a=e[1],l=e[2],u=e[3],d=t[0],f=t[1],h=t[2],w=t[3],E=t[4],S=t[5],x=t[6],p=t[7],g=i,y=r[0],b=r[1],L=r[2],v=o,F=a,O=l,M=u,k=d,C=f,U=h,B=w,$=E,D=S,N=x,j=p,_=g,H=y,q=b,V=L;for(let ee=0;ee<s;ee+=2)v=v+k|0,_=xe(_^v,16),$=$+_|0,k=xe(k^$,12),v=v+k|0,_=xe(_^v,8),$=$+_|0,k=xe(k^$,7),F=F+C|0,H=xe(H^F,16),D=D+H|0,C=xe(C^D,12),F=F+C|0,H=xe(H^F,8),D=D+H|0,C=xe(C^D,7),O=O+U|0,q=xe(q^O,16),N=N+q|0,U=xe(U^N,12),O=O+U|0,q=xe(q^O,8),N=N+q|0,U=xe(U^N,7),M=M+B|0,V=xe(V^M,16),j=j+V|0,B=xe(B^j,12),M=M+B|0,V=xe(V^M,8),j=j+V|0,B=xe(B^j,7),v=v+C|0,V=xe(V^v,16),N=N+V|0,C=xe(C^N,12),v=v+C|0,V=xe(V^v,8),N=N+V|0,C=xe(C^N,7),F=F+U|0,_=xe(_^F,16),j=j+_|0,U=xe(U^j,12),F=F+U|0,_=xe(_^F,8),j=j+_|0,U=xe(U^j,7),O=O+B|0,H=xe(H^O,16),$=$+H|0,B=xe(B^$,12),O=O+B|0,H=xe(H^O,8),$=$+H|0,B=xe(B^$,7),M=M+k|0,q=xe(q^M,16),D=D+q|0,k=xe(k^D,12),M=M+k|0,q=xe(q^M,8),D=D+q|0,k=xe(k^D,7);let K=0;n[K++]=o+v|0,n[K++]=a+F|0,n[K++]=l+O|0,n[K++]=u+M|0,n[K++]=d+k|0,n[K++]=f+C|0,n[K++]=h+U|0,n[K++]=w+B|0,n[K++]=E+$|0,n[K++]=S+D|0,n[K++]=x+N|0,n[K++]=p+j|0,n[K++]=g+_|0,n[K++]=y+H|0,n[K++]=b+q|0,n[K++]=L+V|0}const Jm=$N(HN,{counterRight:!1,counterLength:4,allowShortKeys:!1});function WN(e,t,r){return Vd(e),xu(e,Ml(r),Ml(t))}const Gf=Uint8Array.from([0]),Ry=Uint8Array.of();function VN(e,t,r,n=32){Vd(e),ad(n);const i=e.outputLen;if(n>255*i)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(n/i);r===void 0&&(r=Ry);const o=new Uint8Array(s*i),a=xu.create(e,t),l=a._cloneInto(),u=new Uint8Array(a.outputLen);for(let d=0;d<s;d++)Gf[0]=d+1,l.update(d===0?Ry:u).update(r).update(Gf).digestInto(u),o.set(u,i*d),a._cloneInto(l);return a.destroy(),l.destroy(),Fl(u,Gf),o.slice(0,n)}const qN=new TextDecoder,ut={minPlaintextSize:1,maxPlaintextSize:65535,utf8Encode:Lx,utf8Decode(e){return qN.decode(e)},getConversationKey(e,t){const r=ro.getSharedSecret(e,"02"+t).subarray(1,33);return WN(Vs,r,"nip44-v2")},getMessageKeys(e,t){const r=VN(Vs,e,t,76);return{chacha_key:r.subarray(0,32),chacha_nonce:r.subarray(32,44),hmac_key:r.subarray(44,76)}},calcPaddedLen(e){if(!Number.isSafeInteger(e)||e<1)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,r=t<=256?32:t/8;return r*(Math.floor((e-1)/r)+1)},writeU16BE(e){if(!Number.isSafeInteger(e)||e<ut.minPlaintextSize||e>ut.maxPlaintextSize)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t},pad(e){const t=ut.utf8Encode(e),r=t.length,n=ut.writeU16BE(r),i=new Uint8Array(ut.calcPaddedLen(r)-r);return Lr(n,t,i)},unpad(e){const t=new DataView(e.buffer).getUint16(0),r=e.subarray(2,2+t);if(t<ut.minPlaintextSize||t>ut.maxPlaintextSize||r.length!==t||e.length!==2+ut.calcPaddedLen(t))throw new Error("invalid padding");return ut.utf8Decode(r)},hmacAad(e,t,r){if(r.length!==32)throw new Error("AAD associated data must be 32 bytes");const n=Lr(r,t);return xu(Vs,e,n)},decodePayload(e){if(typeof e!="string")throw new Error("payload must be a valid string");const t=e.length;if(t<132||t>87472)throw new Error("invalid payload length: "+t);if(e[0]==="#")throw new Error("unknown encryption version");if(e.startsWith("{")&&e.endsWith("}"))throw new Error("invalid base64: JSON string in content");let r;try{r=kn.decode(e)}catch(s){throw new Error("invalid base64: "+s.message)}const n=r.length;if(n<99||n>65603)throw new Error("invalid data length: "+n);const i=r[0];return{version:i,nonce:r.subarray(1,33),ciphertext:r.subarray(33,i===2?-32:void 0),mac:i===2?r.subarray(-32):void 0}}};function KN(e,t,r=yu(32)){const{chacha_key:n,chacha_nonce:i,hmac_key:s}=ut.getMessageKeys(t,r),o=ut.pad(e),a=Jm(n,i,o),l=ut.hmacAad(s,a,r);return kn.encode(Lr(new Uint8Array([2]),r,a,l))}function GN(e,t,r,n){const{chacha_key:i,chacha_nonce:s,hmac_key:o}=ut.getMessageKeys(n,t),a=ut.hmacAad(o,e,t);if(!FN(a,r))throw new Error("invalid MAC");const l=Jm(i,s,e);return ut.unpad(l)}function QN(e,t,r){const n=Jm(r,t,e);return ut.unpad(n)}const ds={utils:ut,v1:{getConversationKey:(e,t)=>{const r=ro.getSharedSecret(e,"02"+t);return Vs(r.slice(1,33))},decrypt:QN},v2:{getConversationKey:ut.getConversationKey,encrypt:KN,decrypt:GN}};class Ly{constructor(t,r){this.privateKey=t,this.publicKey=r}encryptData(t){const r=ds.v2.getConversationKey(this.privateKey,this.publicKey);return ds.v2.encrypt(t,r)}decryptData(t){const{version:r,ciphertext:n,nonce:i,mac:s}=ds.utils.decodePayload(t);if(r===1){const o=ds.v1.getConversationKey(this.privateKey,this.publicKey);return ds.v1.decrypt(n,i,o)}if(r===2){const o=ds.v2.getConversationKey(this.privateKey,this.publicKey);return ds.v2.decrypt(n,i,s,o)}throw new Error(`Unsupported payload version: ${r}`)}}var su,yn;const s0=class s0{constructor(t){z(this,su);z(this,yn);typeof t=="string"?T(this,yn,t):T(this,yn,Qe(t)),T(this,su,Qm(c(this,yn)))}static random(){const t=yu(32);return new s0(t)}get supports(){return["nip04","nip44"]}get privateKey(){return c(this,yn)}init(){return Promise.resolve()}getPubKey(){return c(this,su)}async nip4Encrypt(t,r){return await new by(this.privateKey,r).encryptData(t)}async nip4Decrypt(t,r){return await new by(this.privateKey,r).decryptData(t)}async nip44Encrypt(t,r){return new Ly(c(this,yn),r).encryptData(t)}async nip44Decrypt(t,r){return new Ly(c(this,yn),r).decryptData(t)}sign(t){return Lt.sign(t,c(this,yn)),Promise.resolve(t)}};su=new WeakMap,yn=new WeakMap;let Jn=s0;var Qd={},pe={},J1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(a,l){var u=a>>>16&65535,d=a&65535,f=l>>>16&65535,h=l&65535;return d*h+(u*h+d*f<<16>>>0)|0}e.mul=Math.imul||t;function r(a,l){return a+l|0}e.add=r;function n(a,l){return a-l|0}e.sub=n;function i(a,l){return a<<l|a>>>32-l}e.rotl=i;function s(a,l){return a<<32-l|a>>>l}e.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}e.isInteger=Number.isInteger||o,e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(a){return e.isInteger(a)&&a>=-e.MAX_SAFE_INTEGER&&a<=e.MAX_SAFE_INTEGER}})(J1);Object.defineProperty(pe,"__esModule",{value:!0});var eE=J1;function YN(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16}pe.readInt16BE=YN;function ZN(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])>>>0}pe.readUint16BE=ZN;function XN(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])<<16>>16}pe.readInt16LE=XN;function JN(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])>>>0}pe.readUint16LE=JN;function tE(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}pe.writeUint16BE=tE;pe.writeInt16BE=tE;function rE(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}pe.writeUint16LE=rE;pe.writeInt16LE=rE;function jp(e,t){return t===void 0&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}pe.readInt32BE=jp;function _p(e,t){return t===void 0&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}pe.readUint32BE=_p;function Ap(e,t){return t===void 0&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}pe.readInt32LE=Ap;function Tp(e,t){return t===void 0&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}pe.readUint32LE=Tp;function wd(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}pe.writeUint32BE=wd;pe.writeInt32BE=wd;function vd(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}pe.writeUint32LE=vd;pe.writeInt32LE=vd;function e4(e,t){t===void 0&&(t=0);var r=jp(e,t),n=jp(e,t+4);return r*4294967296+n-(n>>31)*4294967296}pe.readInt64BE=e4;function t4(e,t){t===void 0&&(t=0);var r=_p(e,t),n=_p(e,t+4);return r*4294967296+n}pe.readUint64BE=t4;function r4(e,t){t===void 0&&(t=0);var r=Ap(e,t),n=Ap(e,t+4);return n*4294967296+r-(r>>31)*4294967296}pe.readInt64LE=r4;function n4(e,t){t===void 0&&(t=0);var r=Tp(e,t),n=Tp(e,t+4);return n*4294967296+r}pe.readUint64LE=n4;function nE(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),wd(e/4294967296>>>0,t,r),wd(e>>>0,t,r+4),t}pe.writeUint64BE=nE;pe.writeInt64BE=nE;function iE(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),vd(e>>>0,t,r),vd(e/4294967296>>>0,t,r+4),t}pe.writeUint64LE=iE;pe.writeInt64LE=iE;function i4(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=e/8+r-1;s>=r;s--)n+=t[s]*i,i*=256;return n}pe.readUintBE=i4;function s4(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+e/8;s++)n+=t[s]*i,i*=256;return n}pe.readUintLE=s4;function o4(e,t,r,n){if(r===void 0&&(r=new Uint8Array(e/8)),n===void 0&&(n=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!eE.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var i=1,s=e/8+n-1;s>=n;s--)r[s]=t/i&255,i*=256;return r}pe.writeUintBE=o4;function a4(e,t,r,n){if(r===void 0&&(r=new Uint8Array(e/8)),n===void 0&&(n=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!eE.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+e/8;s++)r[s]=t/i&255,i*=256;return r}pe.writeUintLE=a4;function l4(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t)}pe.readFloat32BE=l4;function u4(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t,!0)}pe.readFloat32LE=u4;function c4(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t)}pe.readFloat64BE=c4;function d4(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t,!0)}pe.readFloat64LE=d4;function f4(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat32(r,e),t}pe.writeFloat32BE=f4;function h4(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat32(r,e,!0),t}pe.writeFloat32LE=h4;function p4(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat64(r,e),t}pe.writeFloat64BE=p4;function m4(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat64(r,e,!0),t}pe.writeFloat64LE=m4;var Yd={};Object.defineProperty(Yd,"__esModule",{value:!0});function g4(e){for(var t=0;t<e.length;t++)e[t]=0;return e}Yd.wipe=g4;var Zd={};Object.defineProperty(Zd,"__esModule",{value:!0});var kt=pe,Pp=Yd,y4=20;function w4(e,t,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],l=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],f=r[19]<<24|r[18]<<16|r[17]<<8|r[16],h=r[23]<<24|r[22]<<16|r[21]<<8|r[20],w=r[27]<<24|r[26]<<16|r[25]<<8|r[24],E=r[31]<<24|r[30]<<16|r[29]<<8|r[28],S=t[3]<<24|t[2]<<16|t[1]<<8|t[0],x=t[7]<<24|t[6]<<16|t[5]<<8|t[4],p=t[11]<<24|t[10]<<16|t[9]<<8|t[8],g=t[15]<<24|t[14]<<16|t[13]<<8|t[12],y=n,b=i,L=s,v=o,F=a,O=l,M=u,k=d,C=f,U=h,B=w,$=E,D=S,N=x,j=p,_=g,H=0;H<y4;H+=2)y=y+F|0,D^=y,D=D>>>16|D<<16,C=C+D|0,F^=C,F=F>>>20|F<<12,b=b+O|0,N^=b,N=N>>>16|N<<16,U=U+N|0,O^=U,O=O>>>20|O<<12,L=L+M|0,j^=L,j=j>>>16|j<<16,B=B+j|0,M^=B,M=M>>>20|M<<12,v=v+k|0,_^=v,_=_>>>16|_<<16,$=$+_|0,k^=$,k=k>>>20|k<<12,L=L+M|0,j^=L,j=j>>>24|j<<8,B=B+j|0,M^=B,M=M>>>25|M<<7,v=v+k|0,_^=v,_=_>>>24|_<<8,$=$+_|0,k^=$,k=k>>>25|k<<7,b=b+O|0,N^=b,N=N>>>24|N<<8,U=U+N|0,O^=U,O=O>>>25|O<<7,y=y+F|0,D^=y,D=D>>>24|D<<8,C=C+D|0,F^=C,F=F>>>25|F<<7,y=y+O|0,_^=y,_=_>>>16|_<<16,B=B+_|0,O^=B,O=O>>>20|O<<12,b=b+M|0,D^=b,D=D>>>16|D<<16,$=$+D|0,M^=$,M=M>>>20|M<<12,L=L+k|0,N^=L,N=N>>>16|N<<16,C=C+N|0,k^=C,k=k>>>20|k<<12,v=v+F|0,j^=v,j=j>>>16|j<<16,U=U+j|0,F^=U,F=F>>>20|F<<12,L=L+k|0,N^=L,N=N>>>24|N<<8,C=C+N|0,k^=C,k=k>>>25|k<<7,v=v+F|0,j^=v,j=j>>>24|j<<8,U=U+j|0,F^=U,F=F>>>25|F<<7,b=b+M|0,D^=b,D=D>>>24|D<<8,$=$+D|0,M^=$,M=M>>>25|M<<7,y=y+O|0,_^=y,_=_>>>24|_<<8,B=B+_|0,O^=B,O=O>>>25|O<<7;kt.writeUint32LE(y+n|0,e,0),kt.writeUint32LE(b+i|0,e,4),kt.writeUint32LE(L+s|0,e,8),kt.writeUint32LE(v+o|0,e,12),kt.writeUint32LE(F+a|0,e,16),kt.writeUint32LE(O+l|0,e,20),kt.writeUint32LE(M+u|0,e,24),kt.writeUint32LE(k+d|0,e,28),kt.writeUint32LE(C+f|0,e,32),kt.writeUint32LE(U+h|0,e,36),kt.writeUint32LE(B+w|0,e,40),kt.writeUint32LE($+E|0,e,44),kt.writeUint32LE(D+S|0,e,48),kt.writeUint32LE(N+x|0,e,52),kt.writeUint32LE(j+p|0,e,56),kt.writeUint32LE(_+g|0,e,60)}function sE(e,t,r,n,i){if(i===void 0&&(i=0),e.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-t.length,s.set(t,o)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=t,o=i}for(var a=new Uint8Array(64),l=0;l<r.length;l+=64){w4(a,s,e);for(var u=l;u<l+64&&u<r.length;u++)n[u]=r[u]^a[u-l];x4(s,0,o)}return Pp.wipe(a),i===0&&Pp.wipe(s),n}Zd.streamXOR=sE;function v4(e,t,r,n){return n===void 0&&(n=0),Pp.wipe(r),sE(e,t,r,r,n)}Zd.stream=v4;function x4(e,t,r){for(var n=1;r--;)n=n+(e[t]&255)|0,e[t]=n&255,n>>>=8,t++;if(n>0)throw new Error("ChaCha: counter overflow")}Object.defineProperty(Qd,"__esModule",{value:!0});var gi=pe,oE=Yd,E4=Zd,S4=20;function aE(e,t,r,n){if(t.length!==24)throw new Error("XChaCha20 nonce must be 24 bytes");var i=lE(e,t.subarray(0,16),new Uint8Array(32)),s=new Uint8Array(12);s.set(t.subarray(16),4);var o=E4.streamXOR(i,s,r,n);return oE.wipe(i),o}Qd.streamXOR=aE;function b4(e,t,r){return oE.wipe(r),aE(e,t,r,r)}Qd.stream=b4;function lE(e,t,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=e[3]<<24|e[2]<<16|e[1]<<8|e[0],l=e[7]<<24|e[6]<<16|e[5]<<8|e[4],u=e[11]<<24|e[10]<<16|e[9]<<8|e[8],d=e[15]<<24|e[14]<<16|e[13]<<8|e[12],f=e[19]<<24|e[18]<<16|e[17]<<8|e[16],h=e[23]<<24|e[22]<<16|e[21]<<8|e[20],w=e[27]<<24|e[26]<<16|e[25]<<8|e[24],E=e[31]<<24|e[30]<<16|e[29]<<8|e[28],S=t[3]<<24|t[2]<<16|t[1]<<8|t[0],x=t[7]<<24|t[6]<<16|t[5]<<8|t[4],p=t[11]<<24|t[10]<<16|t[9]<<8|t[8],g=t[15]<<24|t[14]<<16|t[13]<<8|t[12],y=n,b=i,L=s,v=o,F=a,O=l,M=u,k=d,C=f,U=h,B=w,$=E,D=S,N=x,j=p,_=g,H=0;H<S4;H+=2)y=y+F|0,D^=y,D=D>>>16|D<<16,C=C+D|0,F^=C,F=F>>>20|F<<12,b=b+O|0,N^=b,N=N>>>16|N<<16,U=U+N|0,O^=U,O=O>>>20|O<<12,L=L+M|0,j^=L,j=j>>>16|j<<16,B=B+j|0,M^=B,M=M>>>20|M<<12,v=v+k|0,_^=v,_=_>>>16|_<<16,$=$+_|0,k^=$,k=k>>>20|k<<12,L=L+M|0,j^=L,j=j>>>24|j<<8,B=B+j|0,M^=B,M=M>>>25|M<<7,v=v+k|0,_^=v,_=_>>>24|_<<8,$=$+_|0,k^=$,k=k>>>25|k<<7,b=b+O|0,N^=b,N=N>>>24|N<<8,U=U+N|0,O^=U,O=O>>>25|O<<7,y=y+F|0,D^=y,D=D>>>24|D<<8,C=C+D|0,F^=C,F=F>>>25|F<<7,y=y+O|0,_^=y,_=_>>>16|_<<16,B=B+_|0,O^=B,O=O>>>20|O<<12,b=b+M|0,D^=b,D=D>>>16|D<<16,$=$+D|0,M^=$,M=M>>>20|M<<12,L=L+k|0,N^=L,N=N>>>16|N<<16,C=C+N|0,k^=C,k=k>>>20|k<<12,v=v+F|0,j^=v,j=j>>>16|j<<16,U=U+j|0,F^=U,F=F>>>20|F<<12,L=L+k|0,N^=L,N=N>>>24|N<<8,C=C+N|0,k^=C,k=k>>>25|k<<7,v=v+F|0,j^=v,j=j>>>24|j<<8,U=U+j|0,F^=U,F=F>>>25|F<<7,b=b+M|0,D^=b,D=D>>>24|D<<8,$=$+D|0,M^=$,M=M>>>25|M<<7,y=y+O|0,_^=y,_=_>>>24|_<<8,B=B+_|0,O^=B,O=O>>>25|O<<7;return gi.writeUint32LE(y,r,0),gi.writeUint32LE(b,r,4),gi.writeUint32LE(L,r,8),gi.writeUint32LE(v,r,12),gi.writeUint32LE(D,r,16),gi.writeUint32LE(N,r,20),gi.writeUint32LE(j,r,24),gi.writeUint32LE(_,r,28),r}Qd.hchacha=lE;const Qf=24133,jy="nip04_encrypt,nip04_decrypt,sign_event:0,sign_event:1,sign_event:3,sign_event:4,sign_event:6,sign_event:7,sign_event:30078";var Ft,ma,wn,vn,ga,xn,zs,ou,au,ya,et,uE,cE,dE,Si,Up;class k4 extends Fr{constructor(r,n){super();z(this,et);z(this,Ft);z(this,ma);z(this,wn);z(this,vn);z(this,ga);z(this,xn);z(this,zs,new Map);z(this,ou,on("NIP-46"));z(this,au);z(this,ya,!1);const i=new URL(r);T(this,au,i.protocol),T(this,wn,i.hostname||i.pathname.substring(2)),i.hash.length>1?T(this,ga,i.hash.substring(1)):T(this,ga,i.searchParams.get("secret")||void 0),c(this,wn).startsWith("npub")&&T(this,wn,ip(c(this,wn))),T(this,ma,we(i.searchParams.get("relay"))),T(this,xn,n??new Jn(ro.utils.randomPrivateKey())),this.isBunker&&T(this,vn,c(this,wn))}get supports(){return["nip44"]}get relays(){return[c(this,ma)]}get privateKey(){if(c(this,xn)instanceof Jn)return c(this,xn).privateKey}get isBunker(){return c(this,au)==="bunker:"}async init(r=!0){return T(this,wn,await c(this,xn).getPubKey()),await new Promise((n,i)=>{T(this,Ft,new g1(c(this,ma),{read:!0,write:!0})),c(this,Ft).on("event",async(s,o)=>{await R(this,et,dE).call(this,o)}),c(this,Ft).on("connected",async()=>{if(c(this,Ft).request(["REQ","reply",{kinds:[Qf],"#p":[c(this,wn)],since:Math.floor(Date.now()/1e3-10)}]),r)if(this.isBunker){const s=await R(this,et,cE).call(this,we(c(this,vn)));s.result==="ack"?n():i(s.error)}else c(this,zs).set("connect",{reject:i,resolve:()=>{n()}});else n()}),c(this,Ft).connect(),T(this,ya,!0)})}async close(){c(this,Ft)&&(await R(this,et,uE).call(this),c(this,Ft).closeRequest("reply"),c(this,Ft).close(),T(this,Ft,void 0),T(this,ya,!1))}async describe(){return(await R(this,et,Si).call(this,"describe",[])).result}async getPubKey(){return c(this,vn)}async nip4Encrypt(r,n){return(await R(this,et,Si).call(this,"nip04_encrypt",[n,r])).result}async nip4Decrypt(r,n){return(await R(this,et,Si).call(this,"nip04_decrypt",[n,r])).result}nip44Encrypt(r,n){throw new Error("Method not implemented.")}nip44Decrypt(r,n){throw new Error("Method not implemented.")}async sign(r){const n=await R(this,et,Si).call(this,"sign_event",[JSON.stringify(r)]),i=JSON.parse(n.result);if(i.id!==r.id)throw new Error("Signer returned different event id! Please check your event format or contact the signer developer!");return{...r,sig:i.sig}}async createAccount(r,n,i){await this.init(!1);const s=await R(this,et,Si).call(this,"create_account",[r,n,i??"",jy]);s.error||T(this,vn,s.result)}}Ft=new WeakMap,ma=new WeakMap,wn=new WeakMap,vn=new WeakMap,ga=new WeakMap,xn=new WeakMap,zs=new WeakMap,ou=new WeakMap,au=new WeakMap,ya=new WeakMap,et=new WeakSet,uE=async function(){return await R(this,et,Si).call(this,"disconnect",[])},cE=async function(r){const n=[r,c(this,ga)??"",jy];return await R(this,et,Si).call(this,"connect",n)},dE=async function(r){if(r.kind!==Qf)throw new Error("Unknown event kind");const n=await c(this,xn).nip44Decrypt(r.content,r.pubkey),i=JSON.parse(n);let s=i.id;c(this,ou).call(this,"Recv: %O",i),"method"in i&&i.method==="connect"&&(T(this,vn,i.params[0]),await R(this,et,Up).call(this,{id:i.id,result:"ack",error:""},we(c(this,vn))),s="connect");const o=c(this,zs).get(s);if(!o)throw new Error("No pending command found");if("result"in i&&i.result==="auth_url")o.authed||this.emit("oauth",i.error),o.authed=!0;else{const a=i;a.error?o.reject(new Error(a.error)):o.resolve(a),c(this,zs).delete(i.id)}},Si=async function(r,n){if(c(this,ya)||await this.init(),!c(this,Ft))throw new Error("Connection error");const i={id:qs(),method:r,params:n};return R(this,et,Up).call(this,i,we(c(this,vn))),await new Promise((s,o)=>{c(this,zs).set(i.id,{resolve:async a=>{s(a)},reject:o})})},Up=async function(r,n){if(!c(this,Ft))return;const i=new Ns;i.kind(Qf).content(await c(this,xn).nip44Encrypt(JSON.stringify(r),n)).tag(["p",n]),c(this,ou).call(this,"Send: %O",r);const s=await i.buildAndSign(c(this,xn));await c(this,Ft).publish(s)};class C4 extends ku{constructor(t){super("UserRelays",t)}key(t){return t.pubkey}async preload(t){await super.preload(),t&&await this.buffer(t)}newest(){let t=0;return this.cache.forEach(r=>t=r.created>t?r.created:t),t}takeSnapshot(){return[...this.cache.values()]}async search(){return[]}}var lu,uu,oi,fE,hE,Fp;class N4 extends ku{constructor(r){super("UserCache",r);z(this,oi);z(this,lu,[]);z(this,uu,[])}key(r){return r.pubkey}async preload(r){await super.preload(),r&&await this.buffer(r)}async search(r){return this.table?(await this.table.where("npub").startsWithIgnoreCase(r).or("name").startsWithIgnoreCase(r).or("display_name").startsWithIgnoreCase(r).or("nip05").startsWithIgnoreCase(r).toArray()).slice(0,5):[...this.cache.values()].filter(n=>{var s,o,a,l;const i=n;return((s=i.name)==null?void 0:s.includes(r))||((o=i.npub)==null?void 0:o.includes(r))||((a=i.display_name)==null?void 0:a.includes(r))||((l=i.nip05)==null?void 0:l.includes(r))}).slice(0,5)}async update(r){const n=await super.update(r);if(n!=="refresh"){const i=r.lud16??r.lud06;i&&c(this,lu).push({pubkey:r.pubkey,lnurl:i}),r.nip05&&c(this,uu).push({pubkey:r.pubkey,nip05:r.nip05})}return n}takeSnapshot(){return[...this.cache.values()]}}lu=new WeakMap,uu=new WeakMap,oi=new WeakSet,fE=async function(){await R(this,oi,Fp).call(this,c(this,lu),async r=>{const n=new b3(r.lnurl);await n.load();const i=this.getFromCache(r.pubkey);i&&await this.set({...i,zapService:n.zapperPubkey})},5),setTimeout(()=>R(this,oi,fE).call(this),1e3)},hE=async function(){await R(this,oi,Fp).call(this,c(this,uu),async r=>{const[n,i]=r.nip05.split("@"),s=await v3(n,i),o=this.getFromCache(r.pubkey);o&&await this.set({...o,isNostrAddressValid:r.pubkey===s})},5),setTimeout(()=>R(this,oi,hE).call(this),1e3)},Fp=async function(r,n,i=3){const s=[];for(;r.length>0;){const o=r.shift();o?(s.push((async()=>{try{await n(o)}catch{console.warn("Failed to process item",o)}s.pop()})()),s.length===i&&await Promise.all(s)):await Promise.all(s)}};class R4 extends ku{constructor(t){super("RelayMetrics",t)}key(t){return t.addr}async preload(){await super.preload(),await this.buffer([...this.onTable])}takeSnapshot(){return[...this.cache.values()]}async search(){return[]}}var pE={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,n(a)))}return s}function n(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return r.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)t.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(pE);var L4=pE.exports;const e0=Op(L4);function jn({children:e,onClick:t,disabled:r,className:n,variant:i="primary",size:s="default",...o}){const[a,l]=P.useState(!1);async function u(w){if(t)try{l(!0),await t(w)}finally{l(!1)}}const d="inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",f={primary:"bg-neutral-700 text-white hover:bg-neutral-600 focus:ring-neutral-500",secondary:"bg-neutral-800 text-neutral-300 hover:bg-neutral-700 focus:ring-neutral-500",destructive:"bg-red-600 text-white hover:bg-red-500 focus:ring-red-500"},h={sm:"h-8 px-3 text-sm",default:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"};return m.jsx("button",{onClick:u,disabled:a||r,className:e0(d,f[i],h[s],n),...o,children:a?"...":e})}const t0=P.createContext({});function j4(e){const t=P.useContext(t0);return P.useSyncExternalStore(r=>{const n=t.Query(e);return n.on("event",r),n.uncancel(),()=>{n.off("event",r),n.cancel()}},()=>{const r=t.GetQuery(e.id);return r?r.snapshot:H3})}function _4(e){const t=P.useContext(t0);return P.useSyncExternalStore(r=>{if(e){const n=i=>{i.includes(e)&&r()};return t.profileLoader.cache.on("change",n),t.profileLoader.TrackKeys(e),()=>{t.profileLoader.cache.off("change",n),t.profileLoader.UntrackKeys(e)}}return()=>{}},()=>t.profileLoader.cache.getFromCache(e))}function xd({link:e,size:t,showName:r,adminMode:n}){const i=P.useMemo(()=>e.id,[e.id]),s=_4(i),o=t??40,a=m.jsxs(m.Fragment,{children:[m.jsx("img",{src:(s==null?void 0:s.picture)||`https://nostr.api.v0l.io/api/v1/avatar/cyberpunks/${e.id}`,alt:(s==null?void 0:s.display_name)||(s==null?void 0:s.name)||"User avatar",width:o,height:o,className:"rounded-full object-fit owbject-center",onError:l=>{const u=l.target;u.src=`https://nostr.api.v0l.io/api/v1/avatar/cyberpunks/${e.id}`}}),(r??!0)&&m.jsx("div",{children:(s==null?void 0:s.display_name)??(s==null?void 0:s.name)??qd("npub",e.id).slice(0,12)})]});return n?m.jsx(Ws,{className:"flex gap-2 items-center",to:`/admin/user/${i}`,children:a}):m.jsx("a",{className:"flex gap-2 items-center",href:`https://snort.social/${e.encode()}`,target:"_blank",children:a})}var Me,En,Oi,yo;class A4 extends gC{constructor(){var n;super();z(this,Oi);z(this,Me);z(this,En);const r=window.localStorage.getItem("session");r&&(T(this,Me,JSON.parse(r)),c(this,Me)&&((n=c(this,Me)).type??(n.type="nip7")))}takeSnapshot(){return c(this,Me)?{...c(this,Me)}:void 0}logout(){T(this,Me,void 0),T(this,En,void 0),R(this,Oi,yo).call(this)}login(r,n="nip7"){T(this,Me,{type:n??"nip7",publicKey:r,currency:"EUR"}),R(this,Oi,yo).call(this)}loginPrivateKey(r){const n=new Jn(r);T(this,Me,{type:"nsec",publicKey:n.getPubKey(),privateKey:r,currency:"EUR"}),R(this,Oi,yo).call(this)}loginBunker(r,n,i){T(this,Me,{type:"nip46",publicKey:i,privateKey:n,bunker:r,currency:"EUR"}),R(this,Oi,yo).call(this)}getSigner(){if(!c(this,En)&&c(this,Me))switch(c(this,Me).type){case"nsec":T(this,En,new hl(new Jn(c(this,Me).privateKey),c(this,Me).publicKey));break;case"nip46":T(this,En,new hl(new k4(c(this,Me).bunker,new Jn(c(this,Me).privateKey)),c(this,Me).publicKey));break;case"nip7":T(this,En,new hl(new Ym,c(this,Me).publicKey));break}if(c(this,En))return c(this,En);throw"Signer not setup!"}updateSession(r){c(this,Me)&&(r(c(this,Me)),R(this,Oi,yo).call(this))}}Me=new WeakMap,En=new WeakMap,Oi=new WeakSet,yo=function(){c(this,Me)?window.localStorage.setItem("session",JSON.stringify(c(this,Me))):window.localStorage.removeItem("session"),this.notifyChange()};const Dl=new A4;function oo(){return P.useSyncExternalStore(e=>Dl.hook(e),()=>Dl.snapshot())}function Nu(){const e=oo();if(e!=null&&e.publicKey)return Dl.getSigner()}var dt,ms,Fn;class Cn{constructor(t,r){z(this,dt);this.url=t,this.publisher=r,this.url=new URL(this.url).toString()}async getSelf(){const t=await R(this,dt,Fn).call(this,"admin/self","GET");return await R(this,dt,ms).call(this,t)}async listFiles(t=0,r=10,n){const i=await R(this,dt,Fn).call(this,`admin/files?page=${t}&count=${r}${n?`&mime_type=${n}`:""}`,"GET"),s=await R(this,dt,ms).call(this,i);return{...s,...s.data,files:s.data.files}}async listReports(t=0,r=10){const n=await R(this,dt,Fn).call(this,`admin/reports?page=${t}&count=${r}`,"GET"),i=await R(this,dt,ms).call(this,n);return{...i,...i.data,files:i.data.files}}async acknowledgeReport(t){const r=await R(this,dt,Fn).call(this,`admin/reports/${t}`,"DELETE");return await R(this,dt,ms).call(this,r)}async getUserInfo(t,r=0,n=50){const i=await R(this,dt,Fn).call(this,`admin/user/${t}?page=${r}&count=${n}`,"GET");return await R(this,dt,ms).call(this,i)}async purgeUser(t){const r=await R(this,dt,Fn).call(this,`admin/user/${t}/purge`,"DELETE");return await R(this,dt,ms).call(this,r)}async getPaymentInfo(){const t=await R(this,dt,Fn).call(this,"payment","GET");if(t.ok)return await t.json();{const r=await t.text();try{const n=JSON.parse(r);throw new Error(n.message)}catch{throw new Error(`Payment info failed: ${r}`)}}}async requestPayment(t){const r=await R(this,dt,Fn).call(this,"payment","POST",JSON.stringify(t));if(r.ok)return await r.json();{const n=await r.text();try{const i=JSON.parse(n);throw new Error(i.message)}catch{throw new Error(`Payment request failed: ${n}`)}}}}dt=new WeakSet,ms=async function(t){if(t.ok)return await t.json();{const r=await t.text();try{const n=JSON.parse(r);throw new Error(n.message)}catch{throw new Error(`Upload failed: ${r}`)}}},Fn=async function(t,r,n){Il();const i=async(a,l)=>{const u=await this.publisher.generic(d=>d.kind(he.HttpAuthentication).tag(["u",a]).tag(["method",l]));return`Nostr ${kn.encode(new TextEncoder().encode(JSON.stringify(u)))}`},s=`${this.url}${t}`,o={accept:"application/json",authorization:await i(s,r)};return n&&r!=="GET"&&(o["content-type"]="application/json"),await fetch(s,{method:r,body:n,headers:o})};function T4(){const e=oo(),t=Nu(),r=li(),[n,i]=P.useState(),s=`${window.location.protocol}//${window.location.host}`;async function o(){try{const l=await new Ym().getPubKey();Dl.login(l)}catch{}}return P.useEffect(()=>{t&&n===void 0&&new Cn(s,t).getSelf().then(l=>i(l.data)).catch(()=>{})},[t,n,s]),m.jsx("header",{className:"border-b border-neutral-600 bg-neutral-800 w-full",children:m.jsxs("div",{className:"px-4 flex justify-between items-center py-4",children:[m.jsxs("div",{className:"flex items-center space-x-8",children:[m.jsx(Ws,{to:"/",children:m.jsx("div",{className:"text-2xl font-bold text-neutral-100 hover:text-neutral-300 transition-colors",children:"route96"})}),m.jsxs("nav",{className:"flex space-x-6",children:[m.jsx(Ws,{to:"/",className:`text-sm font-medium transition-colors ${r.pathname==="/"?"text-neutral-300 border-b-2 border-neutral-300 pb-1":"text-neutral-400 hover:text-neutral-100"}`,children:"Upload"}),(n==null?void 0:n.is_admin)&&m.jsx(Ws,{to:"/admin",className:`text-sm font-medium transition-colors ${r.pathname==="/admin"?"text-neutral-300 border-b-2 border-neutral-300 pb-1":"text-neutral-400 hover:text-neutral-100"}`,children:"Admin"})]})]}),m.jsx("div",{className:"flex items-center space-x-4",children:e?m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx(xd,{link:Ee.publicKey(e.publicKey)}),m.jsx(jn,{onClick:()=>Dl.logout(),variant:"secondary",size:"sm",children:"Logout"})]}):m.jsx(jn,{onClick:o,children:"Login"})})]})})}function P4(){return m.jsx("div",{className:"min-h-screen bg-background text-foreground dark",children:m.jsxs("div",{className:"max-lg:px-6",children:[m.jsx(T4,{}),m.jsx("main",{className:"py-8",children:m.jsx(Lk,{})})]})})}const _y=Math.pow(1024,1),Ay=Math.pow(1024,2),Ty=Math.pow(1024,3),Py=Math.pow(1024,4),Uy=Math.pow(1024,5),Fy=Math.pow(1024,6),My=Math.pow(1024,7),By=Math.pow(1024,8);function yt(e,t){return t??(t=2),e>=By?(e/By).toFixed(t)+" YiB":e>=My?(e/My).toFixed(t)+" ZiB":e>=Fy?(e/Fy).toFixed(t)+" EiB":e>=Uy?(e/Uy).toFixed(t)+" PiB":e>=Py?(e/Py).toFixed(t)+" TiB":e>=Ty?(e/Ty).toFixed(t)+" GiB":e>=Ay?(e/Ay).toFixed(t)+" MiB":e>=_y?(e/_y).toFixed(t)+" KiB":e.toFixed(t)+" B"}const wo=`${location.protocol}//${location.host}`;function r0({files:e,pages:t,page:r,onPage:n,onDelete:i,adminMode:s}){const[o,a]=P.useState("grid"),[l,u]=P.useState(()=>{const x=localStorage.getItem("file-grid-columns");return x?parseInt(x):6});if(P.useEffect(()=>{localStorage.setItem("file-grid-columns",l.toString())},[l]),e.length===0)return m.jsx("b",{className:"text-neutral-400",children:"No Files"});function d(){const x="grid gap-4";switch(l){case 2:return`${x} grid-cols-1 sm:grid-cols-2`;case 3:return`${x} grid-cols-2 sm:grid-cols-3`;case 4:return`${x} grid-cols-2 sm:grid-cols-3 md:grid-cols-4`;case 5:return`${x} grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5`;case 6:return`${x} grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6`;case 8:return`${x} grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8`;case 10:return`${x} grid-cols-2 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10`;case 12:return`${x} grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-9 xl:grid-cols-12`;default:return`${x} grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6`}}function f(x){var p,g;if((p=x.type)!=null&&p.startsWith("image/")||(g=x.type)!=null&&g.startsWith("video/")||!x.type)return m.jsx("img",{src:x.url.replace(`/${x.id}`,`/thumb/${x.id}`),className:"w-full h-full object-contain object-center",loading:"lazy"})}function h(x){var p,g;return"url"in x?x:"created_at"in x?{id:x.tags.find(y=>y[0]==="x")[1],url:x.tags.find(y=>y[0]==="url")[1],name:x.content,type:(p=x.tags.find(y=>y[0]==="m"))==null?void 0:p.at(1),size:Number((g=x.tags.find(y=>y[0]==="size"))==null?void 0:g.at(1)),uploader:"uploader"in x?x.uploader:void 0}:{id:x.name,url:URL.createObjectURL(x),name:x.name,type:x.type,size:x.size}}function w(x,p){const g=[];g.push(m.jsx("button",{onClick:()=>n==null?void 0:n(x-1),disabled:x===0,className:"px-3 py-2 text-sm font-medium border border-neutral-600 bg-neutral-800 text-neutral-200 hover:bg-neutral-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-l-md transition-colors",children:"←"},"prev"));let b=Math.max(0,x-Math.floor(5/2)),L=Math.min(p-1,b+5-1);L-b<4&&(b=Math.max(0,L-5+1)),b>0&&(g.push(m.jsx("button",{onClick:()=>n==null?void 0:n(0),className:"px-3 py-2 text-sm font-medium border-t border-b border-neutral-600 bg-neutral-800 text-neutral-200 hover:bg-neutral-700 transition-colors",children:"1"},0)),b>1&&g.push(m.jsx("span",{className:"px-3 py-2 text-sm text-neutral-400 border-t border-b border-neutral-600 bg-neutral-800",children:"..."},"ellipsis1")));for(let v=b;v<=L;v++)g.push(m.jsx("button",{onClick:()=>n==null?void 0:n(v),className:e0("px-3 py-2 text-sm font-medium border-t border-b border-neutral-600 transition-colors",{"bg-neutral-600 text-neutral-100 border-neutral-500":x===v,"bg-neutral-800 text-neutral-200 hover:bg-neutral-700":x!==v}),children:v+1},v));return L<p-1&&(L<p-2&&g.push(m.jsx("span",{className:"px-3 py-2 text-sm text-neutral-400 border-t border-b border-neutral-600 bg-neutral-800",children:"..."},"ellipsis2")),g.push(m.jsx("button",{onClick:()=>n==null?void 0:n(p-1),className:"px-3 py-2 text-sm font-medium border-t border-b border-neutral-600 bg-neutral-800 text-neutral-200 hover:bg-neutral-700 transition-colors",children:p},p-1))),g.push(m.jsx("button",{onClick:()=>n==null?void 0:n(x+1),disabled:x===p-1,className:"px-3 py-2 text-sm font-medium border border-neutral-600 bg-neutral-800 text-neutral-200 hover:bg-neutral-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-r-md transition-colors",children:"→"},"next")),g}function E(){return m.jsx("div",{className:d(),children:e.map(x=>{var g,y,b;const p=h(x);return m.jsxs("div",{className:"group relative rounded-lg aspect-square overflow-hidden bg-neutral-700 border border-neutral-600 hover:shadow-md transition-shadow",children:[m.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-2 text-xs text-center opacity-0 group-hover:opacity-100 bg-black/75 text-white transition-opacity",children:[m.jsx("div",{className:"font-medium mb-1",children:(((g=p.name)==null?void 0:g.length)??0)===0?"Untitled":p.name.length>20?`${(y=p.name)==null?void 0:y.substring(0,10)}...${(b=p.name)==null?void 0:b.substring(p.name.length-10)}`:p.name}),m.jsx("div",{className:"text-neutral-200 mb-1",children:p.size&&!isNaN(p.size)?yt(p.size,2):""}),m.jsx("div",{className:"text-neutral-200 mb-2",children:p.type}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("a",{href:p.url,className:"bg-neutral-700 hover:bg-neutral-600 text-white px-2 py-1 rounded text-xs",target:"_blank",children:"View"}),i&&m.jsx("button",{onClick:L=>{L.preventDefault(),i==null||i(p.id)},className:"bg-red-600 hover:bg-red-500 text-white px-2 py-1 rounded text-xs",children:"Delete"})]}),p.uploader&&p.uploader.map((L,v)=>m.jsx(xd,{link:Ee.publicKey(L),size:20,adminMode:s},v))]}),f(p)]},p.id)})})}function S(){return m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full bg-neutral-800 border border-neutral-600 rounded-lg",children:[m.jsx("thead",{className:"bg-neutral-700/50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-400 uppercase tracking-wider border-b border-neutral-600",children:"Preview"}),m.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-400 uppercase tracking-wider border-b border-neutral-600",children:"Name"}),m.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-400 uppercase tracking-wider border-b border-neutral-600",children:"Type"}),m.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-400 uppercase tracking-wider border-b border-neutral-600",children:"Size"}),e.some(x=>"uploader"in x)&&m.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-400 uppercase tracking-wider border-b border-neutral-600",children:"Uploader"}),m.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-400 uppercase tracking-wider border-b border-neutral-600",children:"Actions"})]})}),m.jsx("tbody",{className:"divide-y divide-neutral-600",children:e.map(x=>{var g;const p=h(x);return m.jsxs("tr",{className:"hover:bg-neutral-700/30",children:[m.jsx("td",{className:"px-4 py-3 w-16",children:m.jsx("div",{className:"w-12 h-12 bg-neutral-700 rounded overflow-hidden",children:f(p)})}),m.jsx("td",{className:"px-4 py-3 text-sm text-neutral-100 break-all max-w-xs",children:(((g=p.name)==null?void 0:g.length)??0)===0?"<Untitled>":p.name}),m.jsx("td",{className:"px-4 py-3 text-sm text-neutral-400",children:p.type}),m.jsx("td",{className:"px-4 py-3 text-sm text-neutral-400",children:p.size&&!isNaN(p.size)?yt(p.size,2):""}),p.uploader&&m.jsx("td",{className:"px-4 py-3",children:p.uploader.map((y,b)=>m.jsx(xd,{link:Ee.publicKey(y),size:20,adminMode:s},b))}),m.jsx("td",{className:"px-4 py-3",children:m.jsxs("div",{className:"flex gap-2",children:[m.jsx("a",{href:p.url,className:"bg-neutral-700 hover:bg-neutral-600 text-white px-3 py-1 rounded text-xs",target:"_blank",children:"View"}),i&&m.jsx("button",{onClick:y=>{y.preventDefault(),i==null||i(p.id)},className:"bg-red-600 hover:bg-red-500 text-white px-3 py-1 rounded text-xs",children:"Delete"})]})})]},p.id)})})]})})}return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[m.jsxs("div",{className:"flex rounded-lg border border-neutral-600 overflow-hidden",children:[m.jsx("button",{onClick:()=>a("grid"),className:`px-4 py-2 text-sm font-medium transition-colors ${o==="grid"?"bg-neutral-600 text-neutral-100":"bg-neutral-800 text-neutral-200 hover:bg-neutral-700"}`,children:"Grid"}),m.jsx("button",{onClick:()=>a("list"),className:`px-4 py-2 text-sm font-medium transition-colors border-l border-neutral-600 ${o==="list"?"bg-neutral-600 text-neutral-100":"bg-neutral-800 text-neutral-200 hover:bg-neutral-700"}`,children:"List"})]}),o==="grid"&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:"text-sm font-medium text-neutral-400",children:"Columns:"}),m.jsxs("select",{value:l,onChange:x=>u(parseInt(x.target.value)),className:"flex h-9 w-16 rounded-md border border-neutral-600 bg-neutral-700 text-neutral-100 px-2 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-neutral-500 disabled:cursor-not-allowed disabled:opacity-50",children:[m.jsx("option",{value:2,children:"2"}),m.jsx("option",{value:3,children:"3"}),m.jsx("option",{value:4,children:"4"}),m.jsx("option",{value:5,children:"5"}),m.jsx("option",{value:6,children:"6"}),m.jsx("option",{value:8,children:"8"}),m.jsx("option",{value:10,children:"10"}),m.jsx("option",{value:12,children:"12"})]})]})]}),o==="grid"?E():S(),t!==void 0&&t>1&&m.jsx("div",{className:"flex justify-center",children:m.jsx("div",{className:"flex rounded-lg border border-neutral-600 overflow-hidden",children:w(r??0,t)})})]})}function U4({route96:e,onPaymentRequested:t,userInfo:r}){const[n,i]=P.useState(null),[s,o]=P.useState(1),[a,l]=P.useState(1),[u,d]=P.useState(""),[f,h]=P.useState(""),[w,E]=P.useState(!1);P.useEffect(()=>{n===null&&S()},[n]),P.useEffect(()=>{if(r!=null&&r.quota&&r.quota>0){const b=Math.round(r.quota/1073741824);b>0&&o(b)}},[r]);async function S(){try{const b=await e.getPaymentInfo();i(b)}catch(b){b instanceof Error?h(b.message):h("Failed to load payment info")}}async function x(){if(n){E(!0),h("");try{const b={units:s,quantity:a},L=await e.requestPayment(b);d(L.pr),t==null||t(L.pr)}catch(b){b instanceof Error?h(b.message):h("Failed to request payment")}finally{E(!1)}}}if(f&&!n)return m.jsxs("div",{className:"text-red-400",children:["Payment not available: ",f]});if(!n)return m.jsx("div",{className:"text-neutral-400",children:"Loading payment info..."});const p=n.cost.amount*s*a,g=Math.round(p*1e8);function y(b){return b.toLowerCase().includes("gbspace")||b.toLowerCase().includes("gb")?"GB":b}return m.jsx("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-6 text-neutral-100",children:"Top Up Account"}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"text-center",children:[m.jsxs("div",{className:"text-2xl font-bold mb-2 text-neutral-100",children:[s," ",y(n.unit)," for ",a," month",a>1?"s":""]}),m.jsxs("div",{className:"text-lg text-neutral-300 font-semibold",children:[g.toLocaleString()," sats"]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium mb-2 text-neutral-300",children:["Storage (",y(n.unit),")"]}),m.jsx("input",{type:"number",min:"1",step:"1",value:s,onChange:b=>o(parseInt(b.target.value)||1),className:"flex h-10 w-full rounded-md border border-neutral-600 bg-neutral-700 px-3 py-2 text-center text-lg text-neutral-100 ring-offset-neutral-800 placeholder:text-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2 text-neutral-300",children:"Duration (months)"}),m.jsx("input",{type:"number",min:"1",step:"1",value:a,onChange:b=>l(parseInt(b.target.value)||1),className:"flex h-10 w-full rounded-md border border-neutral-600 bg-neutral-700 px-3 py-2 text-center text-lg text-neutral-100 ring-offset-neutral-800 placeholder:text-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),m.jsx(jn,{onClick:x,disabled:w||s<=0||a<=0,className:"w-full",children:w?"Processing...":"Generate Payment Request"}),f&&m.jsx("div",{className:"text-red-400 text-sm",children:f}),u&&m.jsx("div",{className:"bg-neutral-700 border border-neutral-600 rounded-lg",children:m.jsxs("div",{className:"p-4",children:[m.jsx("div",{className:"text-sm font-medium mb-2 text-neutral-200",children:"Lightning Invoice:"}),m.jsx("div",{className:"font-mono text-xs break-all bg-neutral-800 text-neutral-200 p-2 rounded",children:u}),m.jsx("div",{className:"text-xs text-neutral-400 mt-2",children:"Copy this invoice to your Lightning wallet to complete payment"})]})})]})]})})}class F4{constructor(t){Se(this,"startTime");Se(this,"lastUpdateTime");Se(this,"bytesUploaded",0);Se(this,"totalBytes");Se(this,"speedSamples",[]);Se(this,"maxSamples",10);this.totalBytes=t,this.startTime=Date.now(),this.lastUpdateTime=this.startTime}update(t){const r=Date.now(),n=r-this.lastUpdateTime;if(n>0){const l=(t-this.bytesUploaded)/n*1e3;this.speedSamples.push(l),this.speedSamples.length>this.maxSamples&&this.speedSamples.shift()}this.bytesUploaded=t,this.lastUpdateTime=r;const i=this.speedSamples.length>0?this.speedSamples.reduce((a,l)=>a+l,0)/this.speedSamples.length:0,s=this.totalBytes-t,o=i>0?s/i:0;return{percentage:t/this.totalBytes*100,bytesUploaded:t,totalBytes:this.totalBytes,averageSpeed:i,estimatedTimeRemaining:o,startTime:this.startTime}}}function M4(e){if(e===0)return"0 B/s";const t=["B/s","KB/s","MB/s","GB/s"];let r=e,n=0;for(;r>=1024&&n<t.length-1;)r/=1024,n++;return`${r.toFixed(1)} ${t[n]}`}function B4(e){if(e===0||!isFinite(e))return"--";const t=Math.floor(e/60),r=Math.floor(e%60);return t>0?`${t}m ${r}s`:`${r}s`}function mE(e,t,r,n,i){return new Promise((s,o)=>{const a=new XMLHttpRequest;let l=0;if(r instanceof File)l=r.size;else if(r instanceof FormData){const d=r;for(const[,f]of d.entries())f instanceof File?l+=f.size:typeof f=="string"&&(l+=new Blob([f]).size)}const u=new F4(l);i&&l>0&&a.upload.addEventListener("progress",d=>{if(d.lengthComputable){const f=u.update(d.loaded);i(f)}}),a.addEventListener("load",()=>{const d=new Response(a.response,{status:a.status,statusText:a.statusText,headers:O4(a.getAllResponseHeaders())});s(d)}),a.addEventListener("error",()=>{o(new Error("Network error"))}),a.addEventListener("abort",()=>{o(new Error("Upload aborted"))}),a.open(t,e);for(const[d,f]of Object.entries(n))a.setRequestHeader(d,f);a.send(r)})}function O4(e){const t=new Headers,r=e.trim().split(`\r
`);for(const n of r){const i=n.indexOf(":");if(i>0){const s=n.substring(0,i).trim(),o=n.substring(i+1).trim();t.append(s,o)}}return t}function I4({progress:e,fileName:t}){const{percentage:r,bytesUploaded:n,totalBytes:i,averageSpeed:s,estimatedTimeRemaining:o}=e;return m.jsxs("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:[m.jsx("div",{className:"p-4 pb-2",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h4",{className:"font-medium text-neutral-100",children:t?`Uploading ${t}`:"Uploading..."}),m.jsxs("span",{className:"text-sm text-neutral-400",children:[r.toFixed(1),"%"]})]})}),m.jsxs("div",{className:"p-4 space-y-4",children:[m.jsx("div",{className:"w-full bg-neutral-700 rounded-full h-2",children:m.jsx("div",{className:"bg-neutral-300 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,r)}%`}})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-neutral-400",children:"Progress:"}),m.jsxs("span",{className:"ml-2 font-medium text-neutral-200",children:[yt(n)," / ",yt(i)]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-neutral-400",children:"Speed:"}),m.jsx("span",{className:"ml-2 font-medium text-green-400",children:M4(s)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-neutral-400",children:"ETA:"}),m.jsx("span",{className:"ml-2 font-medium text-neutral-200",children:B4(o)})]})]})]})]})}var Gt,vo,xo;class zl{constructor(t,r){z(this,Gt);this.url=t,this.publisher=r,this.url=new URL(this.url).toString()}async upload(t,r){const n=await window.crypto.subtle.digest("SHA-256",await t.arrayBuffer()),i=[["x",hy("hex",new Uint8Array(n))]],s=await R(this,Gt,xo).call(this,"upload","PUT","upload",t,i,void 0,r);if(s.ok)return await s.json();throw await R(this,Gt,vo).call(this,s),new Error("Should not reach here")}async media(t,r){const n=await window.crypto.subtle.digest("SHA-256",await t.arrayBuffer()),i=[["x",hy("hex",new Uint8Array(n))]],s=await R(this,Gt,xo).call(this,"media","PUT","media",t,i,void 0,r);if(s.ok)return await s.json();throw await R(this,Gt,vo).call(this,s),new Error("Should not reach here")}async mirror(t){const r=await R(this,Gt,xo).call(this,"mirror","PUT","upload",JSON.stringify({url:t}),void 0,{"content-type":"application/json"});if(r.ok)return await r.json();throw await R(this,Gt,vo).call(this,r),new Error("Should not reach here")}async list(t){const r=await R(this,Gt,xo).call(this,`list/${t}`,"GET","list");if(r.ok)return await r.json();throw await R(this,Gt,vo).call(this,r),new Error("Should not reach here")}async delete(t){const r=[["x",t]],n=await R(this,Gt,xo).call(this,t,"DELETE","delete",void 0,r);if(!n.ok)throw await R(this,Gt,vo).call(this,n),new Error("Should not reach here")}}Gt=new WeakSet,vo=async function(t){const r=t.headers.get("X-Reason")||t.headers.get("x-reason");if(r)throw new Error(r);{const n=await t.text();throw new Error(n)}},xo=async function(t,r,n,i,s,o,a){Il();const l=`${this.url}${t}`,u=Kd(),f={...o,accept:"application/json",authorization:await(async(h,w)=>{const E=await this.publisher.generic(S=>(S.kind(24242).tag(["u",h]).tag(["method",w.toLowerCase()]).tag(["t",n]).tag(["expiration",(u+10).toString()]),s==null||s.forEach(x=>S.tag(x)),S));return`Nostr ${kn.encode(new TextEncoder().encode(JSON.stringify(E)))}`})(l,r)};return r==="PUT"&&i&&a?await mE(l,r,i,f,a):await fetch(l,{method:r,body:i,headers:f})};function D4({servers:e}){const[t,r]=P.useState([]),[n,i]=P.useState(!1),[s,o]=P.useState(),[a,l]=P.useState(null),u=Nu(),d=oo(),f=P.useMemo(()=>e,[e]),h=P.useCallback(async()=>{if(!(!u||!(d!=null&&d.publicKey)))try{i(!0),o(void 0);const g=[...f];if(g.length<=1){i(!1);return}const y=new Map;for(const L of g)try{const F=await new zl(L,u).list(d.publicKey);for(const O of F){const M=y.get(O.sha256);M?M.available_on.push(L):y.set(O.sha256,{sha256:O.sha256,url:O.url||"",size:O.size,mime_type:O.type,available_on:[L],missing_from:[]})}}catch(v){console.error(`Failed to fetch files from ${L}:`,v)}for(const L of y.values())for(const v of g)L.available_on.includes(v)||L.missing_from.push(v);const b=Array.from(y.values()).filter(L=>L.missing_from.length>0&&L.available_on.length>0);r(b)}catch(g){g instanceof Error?o(g.message):o("Failed to fetch mirror suggestions")}finally{i(!1)}},[f,u,d==null?void 0:d.publicKey]);P.useEffect(()=>{f.length>1&&u&&(d!=null&&d.publicKey)&&h()},[f,u,d==null?void 0:d.publicKey,h]);async function w(){if(!u||t.length===0)return;const g=t.reduce((v,F)=>v+F.missing_from.length,0);l({total:g,completed:0,failed:0,errors:[]});let y=0,b=0;const L=[];for(const v of t)for(const F of v.missing_from)try{await new zl(F,u).mirror(v.url),y++,l(M=>M?{...M,completed:y,failed:b}:null),r(M=>M.map(k=>k.sha256===v.sha256?{...k,available_on:[...k.available_on,F],missing_from:k.missing_from.filter(C=>C!==F)}:k).filter(k=>k.missing_from.length>0))}catch(O){b++;const M=O instanceof Error?O.message:"Unknown error",k=new URL(F).hostname;L.push(`${k}: ${M}`),l(C=>C?{...C,completed:y,failed:b,errors:[...L]}:null)}setTimeout(()=>{l(null)},3e3)}const E=t.length,S=t.reduce((g,y)=>g+y.missing_from.length,0),x=t.reduce((g,y)=>g+y.size,0),p=f.map(g=>{const y=t.filter(v=>v.available_on.includes(g)).length,b=new Set(t.map(v=>v.sha256)).size,L=b>0?Math.round(y/b*100):100;return{url:g,hostname:new URL(g).hostname,filesCount:y,totalFiles:b,coveragePercentage:L}});return f.length<=1?null:n?m.jsx("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4 text-neutral-100",children:"Mirror Suggestions"}),m.jsx("p",{className:"text-neutral-400",children:"Loading mirror suggestions..."})]})}):s?m.jsx("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4 text-neutral-100",children:"Mirror Suggestions"}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded",children:s}),m.jsx(jn,{onClick:h,variant:"secondary",children:"Retry"})]})]})}):t.length===0?m.jsx("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4 text-neutral-100",children:"Mirror Suggestions"}),m.jsx("p",{className:"text-neutral-400",children:"All your files are synchronized across all servers."})]})}):m.jsx("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-6 text-neutral-100",children:"Mirror Coverage"}),m.jsxs("div",{className:"space-y-6",children:[m.jsx("div",{className:"bg-neutral-700 border border-neutral-600 rounded-lg",children:m.jsx("div",{className:"p-6",children:m.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-neutral-100",children:E}),m.jsx("div",{className:"text-xs text-neutral-400",children:"Files to Mirror"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-orange-400",children:S}),m.jsx("div",{className:"text-xs text-neutral-400",children:"Operations Needed"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-green-400",children:yt(x)}),m.jsx("div",{className:"text-xs text-neutral-400",children:"Total Size"})]})]})})}),m.jsxs("div",{className:"bg-neutral-700 border border-neutral-600 rounded-lg",children:[m.jsx("div",{className:"p-4 pb-3",children:m.jsx("h4",{className:"text-sm font-semibold text-neutral-200",children:"Coverage by Server"})}),m.jsx("div",{className:"p-4",children:m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:p.map(g=>m.jsx("div",{className:"bg-neutral-800 border border-neutral-600 rounded-lg",children:m.jsxs("div",{className:"p-3",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("span",{className:"text-sm font-medium truncate text-neutral-200",children:g.hostname}),m.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${g.coveragePercentage===100?"bg-green-900 text-green-200":g.coveragePercentage>=80?"bg-yellow-900 text-yellow-200":"bg-red-900 text-red-200"}`,children:[g.coveragePercentage,"%"]})]}),m.jsx("div",{className:"w-full bg-neutral-600 rounded-full h-2 mb-2",children:m.jsx("div",{className:"bg-neutral-300 h-2 rounded-full transition-all duration-300",style:{width:`${g.coveragePercentage}%`}})}),m.jsxs("div",{className:"text-xs text-neutral-400 text-center",children:[g.filesCount," / ",g.totalFiles," files"]})]})},g.url))})})]}),a?m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[m.jsx("span",{className:"text-neutral-400",children:"Progress"}),m.jsxs("span",{className:"text-neutral-400",children:[a.completed+a.failed," / ",a.total]})]}),m.jsx("div",{className:"w-full bg-neutral-700 rounded-full h-2",children:m.jsx("div",{className:"bg-neutral-300 h-2 rounded-full transition-all duration-300",style:{width:`${(a.completed+a.failed)/a.total*100}%`}})})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center text-sm",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-green-400 font-semibold",children:a.completed}),m.jsx("div",{className:"text-neutral-500",children:"Completed"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-red-400 font-semibold",children:a.failed}),m.jsx("div",{className:"text-neutral-500",children:"Failed"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-neutral-500 font-semibold",children:a.total-a.completed-a.failed}),m.jsx("div",{className:"text-neutral-500",children:"Remaining"})]})]}),a.errors.length>0&&m.jsxs("div",{className:"bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded",children:[m.jsxs("h4",{className:"font-semibold mb-2",children:["Errors (",a.errors.length,")"]}),m.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:a.errors.map((g,y)=>m.jsx("div",{className:"text-xs",children:g},y))})]})]}):m.jsxs("div",{className:"text-center space-y-4",children:[m.jsxs("p",{className:"text-neutral-400",children:[E," files need to be synchronized across your servers"]}),m.jsx(jn,{onClick:w,disabled:S===0,children:"Mirror Everything"})]})]})]})})}const z4=["https://blossom.band/","https://blossom.primal.net",wo];function $4(){const e=oo(),t=new Cu("media-servers");e!=null&&e.publicKey&&t.withFilter().kinds([10063]).authors([e.publicKey]);const r=j4(t),n=r===void 0?void 0:r.flatMap(i=>i.tags.filter(s=>s[0]==="server").map(s=>s[1]));return P.useMemo(()=>Yr(rt([...z4,...n??[]].map(bn))),[n])}async function H4(){return new Promise(e=>{const t=document.createElement("input");let r=!1;t.type="file",t.multiple=!0;const n=i=>{var o;r=!0;const s=i.target;(((o=s.files)==null?void 0:o.length)??0)>0?e(s.files):e(void 0)};t.onchange=i=>n(i),t.click(),window.addEventListener("focus",()=>{setTimeout(()=>{r||e(void 0)},300)},{once:!0})})}var wa,rs,Mp,Bp;class W4{constructor(t,r){z(this,rs);z(this,wa);this.url=t,this.publisher=r,this.url=new URL(this.url).toString()}async loadInfo(){const t=new URL(this.url),r=await fetch(`${t.protocol}//${t.host}/.well-known/nostr/nip96.json`);return T(this,wa,await r.json()),c(this,wa)}async listFiles(t=0,r=10){const n=await R(this,rs,Bp).call(this,`?page=${t}&count=${r}`,"GET");return await R(this,rs,Mp).call(this,n)}async upload(t,r){const n=new FormData;n.append("size",t.size.toString()),n.append("caption",t.name),n.append("content_type",t.type),n.append("file",t);const i=await R(this,rs,Bp).call(this,"","POST",n,r),s=await R(this,rs,Mp).call(this,i);if(s.status!=="success")throw new Error(s.message);return s}}wa=new WeakMap,rs=new WeakSet,Mp=async function(t){if(t.ok)return await t.json();{const r=await t.text();try{const n=JSON.parse(r);throw new Error(n.message)}catch{throw new Error(`Upload failed: ${r}`)}}},Bp=async function(t,r,n,i){Il();const s=async(u,d)=>{const f=await this.publisher.generic(h=>h.kind(he.HttpAuthentication).tag(["u",u]).tag(["method",d]));return`Nostr ${kn.encode(new TextEncoder().encode(JSON.stringify(f)))}`};let a=(c(this,wa)??await this.loadInfo()).api_url;a.startsWith("/")&&(a=`${this.url}${a.slice(1)}`),a+=t;const l={accept:"application/json",authorization:await s(a,r)};return r==="POST"&&n&&i?await mE(a,r,n,l,i):await fetch(a,{method:r,body:n,headers:l})};function V4(){const[e,t]=P.useState(!0),[r,n]=P.useState(),[i,s]=P.useState(),[o,a]=P.useState([]),[l,u]=P.useState(),[d,f]=P.useState(0),[h,w]=P.useState(!1),[E,S]=P.useState(!1),[x,p]=P.useState(),g=$4(),y=oo(),b=Nu(),L=k=>k.type.startsWith("video/")||k.type.startsWith("image/");async function v(k){if(b&&k&&!E)try{s(void 0),S(!0),p(void 0);const C=D=>{p(D)},U=new zl(wo,b),$=L(k)&&e?await U.media(k,C):await U.upload(k,C);a(D=>[...D,$])}catch(C){C instanceof Error?s(C.message||"Upload failed - no error details provided"):s(typeof C=="string"?C:"Upload failed")}finally{S(!1),p(void 0)}}async function F(){if(!E)try{const k=await H4();if(!k||k.length===0)return;for(let C=0;C<k.length;C++){const U=k[C];await v(U)}}catch(k){k instanceof Error?s(k.message||"File selection failed"):s("File selection failed")}}const O=P.useCallback(async k=>{if(b)try{s(void 0);const C=new W4(wo,b);await C.loadInfo();const U=await C.listFiles(k,50);u(U)}catch(C){C instanceof Error?s(C.message||"List files failed - no error details provided"):s(typeof C=="string"?C:"List files failed")}},[b]);async function M(k){if(b)try{s(void 0),await new zl(wo,b).delete(k)}catch(C){C instanceof Error?s(C.message||"Delete failed - no error details provided"):s(typeof C=="string"?C:"Delete failed")}}return P.useEffect(()=>{b&&!l&&O(d)},[d,b,O,l]),P.useEffect(()=>{b&&!r&&new Cn(wo,b).getSelf().then(C=>n(C.data))},[b,r]),y?m.jsxs("div",{className:"w-full px-4",children:[i&&m.jsx("div",{className:"bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded mb-6",children:i}),m.jsxs("div",{className:"flex flex-wrap gap-6",children:[m.jsx("div",{className:"flex-1 min-w-80 bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-6 text-neutral-100",children:"Upload Files"}),m.jsxs("div",{className:"space-y-6",children:[m.jsx("div",{children:m.jsxs("label",{className:"flex items-center cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:e,onChange:k=>t(k.target.checked),className:"mr-2"}),m.jsx("span",{className:"text-sm font-medium text-neutral-300",children:"Strip metadata (for images)"})]})}),E&&x&&m.jsx(I4,{progress:x}),m.jsx("div",{className:"flex gap-4",children:m.jsx(jn,{onClick:F,className:"flex-1",disabled:E,children:E?"Uploading...":"Select Files to Upload"})})]})]})}),r&&m.jsx("div",{className:"flex-1 min-w-80 bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4 text-neutral-100",children:"Storage Usage"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-neutral-300",children:"Files:"}),m.jsx("span",{className:"font-medium text-neutral-100",children:r.file_count.toLocaleString()})]}),m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-neutral-300",children:"Total Size:"}),m.jsx("span",{className:"font-medium text-neutral-100",children:yt(r.total_size)})]}),r.total_available_quota&&r.total_available_quota>0&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-neutral-300",children:"Quota Used:"}),m.jsxs("span",{className:"font-medium text-neutral-100",children:[yt(r.total_size)," of"," ",yt(r.total_available_quota)]})]}),m.jsx("div",{className:"w-full bg-neutral-700 rounded-full h-2",children:m.jsx("div",{className:"bg-neutral-300 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,r.total_size/r.total_available_quota*100)}%`}})}),m.jsxs("div",{className:"flex justify-between text-xs text-neutral-400",children:[m.jsxs("span",{children:[(r.total_size/r.total_available_quota*100).toFixed(1),"% used"]}),m.jsxs("span",{className:`${r.total_size/r.total_available_quota>.8?"text-red-400":r.total_size/r.total_available_quota>.6?"text-yellow-400":"text-green-400"}`,children:[yt(Math.max(0,r.total_available_quota-r.total_size))," ","remaining"]})]})]}),m.jsxs("div",{className:"space-y-2 pt-2 border-t border-neutral-700",children:[(r.quota??0)>0&&m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-neutral-300",children:"Paid Quota:"}),m.jsx("span",{className:"font-medium text-neutral-100",children:yt(r.quota)})]}),(r.paid_until??0)>0&&m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-neutral-300",children:"Expires:"}),m.jsxs("div",{className:"text-right",children:[m.jsx("div",{className:"font-medium text-neutral-100",children:new Date(r.paid_until*1e3).toLocaleDateString()}),m.jsx("div",{className:"text-xs text-neutral-400",children:(()=>{const k=Date.now()/1e3,C=Math.max(0,Math.ceil((r.paid_until-k)/(24*60*60)));return C>0?`${C} days left`:"Expired"})()})]})]})]})]}),m.jsxs(jn,{onClick:()=>w(!h),className:"w-full mt-4",children:[h?"Hide":"Show"," Payment Options"]})]})]})}),h&&b&&m.jsx("div",{className:"flex-1 min-w-80",children:m.jsx(U4,{route96:new Cn(wo,b),onPaymentRequested:k=>{console.log("Payment requested:",k)},userInfo:r})}),g&&g.length>1&&m.jsx("div",{className:"w-full",children:m.jsx(D4,{servers:g})}),m.jsx("div",{className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-neutral-100",children:"Your Files"}),!l&&m.jsx(jn,{onClick:()=>O(0),children:"Load Files"})]}),l&&m.jsx(r0,{files:l.files,pages:Math.ceil(l.total/l.count),page:l.page,onPage:k=>f(k),onDelete:async k=>{await M(k),await O(d)}})]})}),o.length>0&&m.jsx("div",{className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4 text-neutral-100",children:"Upload Results"}),m.jsx("div",{className:"space-y-4",children:o.map((k,C)=>m.jsxs("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-start justify-between mb-3",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h4",{className:"font-medium text-green-400 mb-1",children:"✅ Upload Successful"}),m.jsx("p",{className:"text-sm text-neutral-500",children:new Date((k.uploaded||Date.now()/1e3)*1e3).toLocaleString()})]}),m.jsx("div",{className:"text-right",children:m.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-neutral-100 text-neutral-800",children:k.type||"Unknown type"})})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-neutral-500",children:"File Size"}),m.jsx("p",{className:"font-medium",children:yt(k.size||0)})]})}),m.jsxs("div",{className:"space-y-2",children:[k.url&&m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-neutral-400 mb-1",children:"File URL"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("code",{className:"text-xs bg-neutral-900 text-green-400 px-2 py-1 rounded flex-1 overflow-hidden",children:k.url}),m.jsx("button",{onClick:()=>navigator.clipboard.writeText(k.url),className:"text-xs bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded transition-colors",title:"Copy URL",children:"Copy"})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-neutral-400 mb-1",children:"File Hash (SHA256)"}),m.jsx("code",{className:"text-xs bg-neutral-900 text-neutral-400 px-2 py-1 rounded block overflow-hidden",children:k.sha256})]})]}),m.jsxs("details",{className:"mt-4",children:[m.jsx("summary",{className:"text-sm text-neutral-500 cursor-pointer hover:text-neutral-900",children:"Show raw JSON data"}),m.jsx("pre",{className:"text-xs bg-neutral-100 text-neutral-900 p-3 rounded mt-2 overflow-auto",children:JSON.stringify(k,void 0,2)})]})]},C))})]})})]})]}):m.jsx("div",{className:"max-w-2xl mx-auto bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"text-center p-6",children:[m.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-neutral-100",children:["Welcome to ",window.location.hostname]}),m.jsx("p",{className:"text-neutral-300 mb-6",children:"Please log in to start uploading files to your storage."})]})})}function q4({reports:e,pages:t,page:r,onPage:n,onAcknowledge:i,onDeleteFile:s}){if(e.length===0)return m.jsx("b",{children:"No Reports"});function o(d,f){const h=[];for(let E=0;E<f;E++)h.push(m.jsx("div",{onClick:()=>n==null?void 0:n(E),className:e0("bg-neutral-700 hover:bg-neutral-600 min-w-8 text-center cursor-pointer font-bold",{"rounded-l-md":E===0,"rounded-r-md":E+1===f,"bg-neutral-400":d===E}),children:E+1},E));return h}function a(d){try{return JSON.parse(d).pubkey}catch{return null}}function l(d){try{return JSON.parse(d).content||"No reason provided"}catch{return"Invalid event data"}}function u(d){return new Date(d).toLocaleString()}return m.jsxs(m.Fragment,{children:[m.jsxs("table",{className:"w-full border-collapse border border-neutral-500",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-neutral-700",children:[m.jsx("th",{className:"border border-neutral-500 py-2 px-4 text-left",children:"Report ID"}),m.jsx("th",{className:"border border-neutral-500 py-2 px-4 text-left",children:"File ID"}),m.jsx("th",{className:"border border-neutral-500 py-2 px-4 text-left",children:"Reporter"}),m.jsx("th",{className:"border border-neutral-500 py-2 px-4 text-left",children:"Reason"}),m.jsx("th",{className:"border border-neutral-500 py-2 px-4 text-left",children:"Created"}),m.jsx("th",{className:"border border-neutral-500 py-2 px-4 text-left",children:"Actions"})]})}),m.jsx("tbody",{children:e.map(d=>{const f=a(d.event_json),h=l(d.event_json);return m.jsxs("tr",{className:"hover:bg-neutral-700",children:[m.jsx("td",{className:"border border-neutral-500 py-2 px-4",children:d.id}),m.jsxs("td",{className:"border border-neutral-500 py-2 px-4 font-mono text-sm",children:[d.file_id.substring(0,12),"..."]}),m.jsx("td",{className:"border border-neutral-500 py-2 px-4",children:f?m.jsx(xd,{link:Ee.publicKey(f),size:20}):"Unknown"}),m.jsx("td",{className:"border border-neutral-500 py-2 px-4 max-w-xs truncate",children:h}),m.jsx("td",{className:"border border-neutral-500 py-2 px-4",children:u(d.created)}),m.jsx("td",{className:"border border-neutral-500 py-2 px-4",children:m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>i==null?void 0:i(d.id),className:"bg-blue-600 hover:bg-blue-700 px-2 py-1 rounded text-sm",children:"Acknowledge"}),m.jsx("button",{onClick:()=>s==null?void 0:s(d.file_id),className:"bg-red-600 hover:bg-red-700 px-2 py-1 rounded text-sm",children:"Delete File"})]})})]},d.id)})})]}),t!==void 0&&m.jsx(m.Fragment,{children:m.jsx("div",{className:"flex justify-center mt-4",children:m.jsx("div",{className:"flex gap-1",children:o(r??0,t)})})})]})}function K4(){const[e,t]=P.useState(),[r,n]=P.useState(),[i,s]=P.useState(),[o,a]=P.useState(),[l,u]=P.useState(),[d,f]=P.useState(0),[h,w]=P.useState(0),[E,S]=P.useState(),[x,p]=P.useState(!0),g=oo(),y=Nu(),b=`${location.protocol}//${location.host}`,L=P.useCallback(async M=>{if(y)try{n(void 0);const C=await new Cn(b,y).listFiles(M,50,E);s(C)}catch(k){k instanceof Error?n(k.message.length>0?k.message:"Upload failed"):n(typeof k=="string"?k:"List files failed")}},[y,b,E]),v=P.useCallback(async M=>{if(y)try{n(void 0);const C=await new Cn(b,y).listReports(M,10);a(C.files),u(Math.ceil(C.total/C.count))}catch(k){k instanceof Error?n(k.message.length>0?k.message:"List reports failed"):n(typeof k=="string"?k:"List reports failed")}},[y,b]);async function F(M){if(y)try{n(void 0),await new Cn(b,y).acknowledgeReport(M),await v(d)}catch(k){k instanceof Error?n(k.message.length>0?k.message:"Acknowledge report failed"):n(typeof k=="string"?k:"Acknowledge report failed")}}async function O(M){if(y)try{n(void 0),await new zl(b,y).delete(M)}catch(k){k instanceof Error?n(k.message.length>0?k.message:"Upload failed"):n(typeof k=="string"?k:"List files failed")}}return P.useEffect(()=>{y&&new Cn(b,y).getSelf().then(k=>{t(k.data),p(!1)}).catch(()=>{p(!1)})},[g,y,b]),P.useEffect(()=>{y&&(e!=null&&e.is_admin)&&L(h)},[h,y,e==null?void 0:e.is_admin,L]),P.useEffect(()=>{y&&(e!=null&&e.is_admin)&&v(d)},[d,y,e==null?void 0:e.is_admin,v]),x?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"text-lg text-neutral-400",children:"Loading..."})}):g?e&&!e.is_admin?m.jsx(qh,{to:"/",replace:!0}):m.jsxs("div",{className:"space-y-8 px-4",children:[m.jsx("div",{className:"flex items-center justify-between",children:m.jsx("h1",{className:"text-3xl font-bold text-neutral-100",children:"Admin Panel"})}),r&&m.jsx("div",{className:"bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded",children:r}),m.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[m.jsx("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4 text-neutral-100",children:"File Management"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2 text-neutral-300",children:"Filter by MIME type"}),m.jsxs("select",{className:"flex h-9 w-full rounded-md border border-neutral-600 bg-neutral-700 px-3 py-1 text-sm text-neutral-100 shadow-sm transition-colors focus:outline-none focus:ring-1 focus:ring-neutral-500 disabled:cursor-not-allowed disabled:opacity-50",value:E||"",onChange:M=>S(M.target.value||void 0),children:[m.jsx("option",{value:"",children:"All Files"}),m.jsx("option",{value:"image/webp",children:"WebP Images"}),m.jsx("option",{value:"image/jpeg",children:"JPEG Images"}),m.jsx("option",{value:"image/png",children:"PNG Images"}),m.jsx("option",{value:"image/gif",children:"GIF Images"}),m.jsx("option",{value:"video/mp4",children:"MP4 Videos"}),m.jsx("option",{value:"video/mov",children:"MOV Videos"})]})]}),m.jsx(jn,{onClick:()=>L(0),className:"w-full",children:"Load All Files"})]})]})}),m.jsx("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4 text-neutral-100",children:"Reports Management"}),m.jsx(jn,{onClick:()=>v(0),className:"w-full",children:"Load Reports"})]})})]}),i&&m.jsx("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4 text-neutral-100",children:"All Files"}),m.jsx(r0,{files:i.files,pages:Math.ceil(i.total/i.count),page:i.page,onPage:M=>w(M),onDelete:async M=>{await O(M),await L(h)},adminMode:!0})]})}),o&&m.jsx("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4 text-neutral-100",children:"Reports"}),m.jsx(q4,{reports:o,pages:l,page:d,onPage:M=>f(M),onAcknowledge:F,onDeleteFile:async M=>{await O(M),await v(d)}})]})})]}):m.jsx("div",{className:"max-w-md mx-auto bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"text-center p-6",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4 text-neutral-100",children:"Authentication Required"}),m.jsx("p",{className:"text-neutral-300",children:"Please log in to access the admin panel."})]})})}function G4(){const{pubkey:e}=uk(),[t,r]=P.useState(),[n,i]=P.useState(),[s,o]=P.useState(),[a,l]=P.useState(!0),[u,d]=P.useState(0),[f,h]=P.useState(!1),w=oo(),E=Nu(),S=`${location.protocol}//${location.host}`;P.useEffect(()=>{E&&!t&&new Cn(S,E).getSelf().then(g=>{r(g.data)}).catch(()=>{l(!1)})},[E,t,S]),P.useEffect(()=>{E&&(t!=null&&t.is_admin)&&e&&(l(!0),new Cn(S,E).getUserInfo(e,u,50).then(g=>{i(g.data),l(!1)}).catch(g=>{o(g.message||"Failed to load user information"),l(!1)}))},[E,t==null?void 0:t.is_admin,e,u,S]);async function x(){if(!E||!e||!window.confirm(`Are you sure you want to delete ALL files for this user?

This action cannot be undone and will permanently delete:
- ${(n==null?void 0:n.file_count)||0} files
- ${yt((n==null?void 0:n.total_size)||0,2)} of storage

Type "DELETE" to confirm.`))return;if(window.prompt('Please type "DELETE" to confirm this destructive action:')!=="DELETE"){alert("Confirmation text did not match. Operation cancelled.");return}h(!0),o(void 0);try{const y=new Cn(S,E);await y.purgeUser(e);const b=await y.getUserInfo(e,u,50);i(b.data),alert("User account purged successfully. All files have been deleted.")}catch(y){const b=y instanceof Error?y.message:"Failed to purge user account";o(b)}finally{h(!1)}}return a?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"text-lg text-neutral-400",children:"Loading..."})}):w?t!=null&&t.is_admin?e?s?m.jsxs("div",{className:"space-y-8 px-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h1",{className:"text-3xl font-bold text-neutral-100",children:"User Scope"}),m.jsx(Ws,{to:"/admin",className:"text-blue-400 hover:text-blue-300 underline",children:"← Back to Admin"})]}),m.jsx("div",{className:"bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded",children:s})]}):n?m.jsxs("div",{className:"space-y-8 px-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h1",{className:"text-3xl font-bold text-neutral-100",children:"User Scope"}),m.jsx("a",{href:"/admin",className:"text-blue-400 hover:text-blue-300 underline",children:"← Back to Admin"})]}),m.jsx("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4 text-neutral-100",children:"User Information"}),m.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-neutral-400",children:"Public Key"}),m.jsx("div",{className:"text-neutral-100 font-mono text-sm break-all",children:qd("npub",e)}),m.jsx("div",{className:"text-neutral-400 font-mono text-xs break-all mt-1",children:e})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-neutral-400",children:"Account Created"}),m.jsx("div",{className:"text-neutral-100",children:new Date(n.created).toLocaleDateString()})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-neutral-400",children:"Files Uploaded"}),m.jsxs("div",{className:"text-neutral-100",children:[n.file_count," files"]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-neutral-400",children:"Total Storage Used"}),m.jsx("div",{className:"text-neutral-100",children:yt(n.total_size,2)})]}),n.is_admin&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-neutral-400",children:"Role"}),m.jsx("div",{className:"text-yellow-400 font-semibold",children:"Administrator"})]})]}),m.jsxs("div",{className:"mt-6 pt-6 border-t border-neutral-600",children:[m.jsx("h4",{className:"text-lg font-semibold mb-4 text-red-400",children:"Danger Zone"}),m.jsx("div",{className:"bg-red-900/20 border border-red-700/50 rounded-lg p-4",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h5",{className:"text-sm font-medium text-red-300",children:"Purge User Account"}),m.jsxs("p",{className:"text-sm text-red-400/80 mt-1",children:["Permanently delete all ",n.file_count," files for this user (",yt(n.total_size,2),")"]})]}),m.jsx("button",{onClick:x,disabled:f||n.file_count===0,className:"bg-red-600 hover:bg-red-500 disabled:bg-red-800 disabled:text-red-400 text-white px-4 py-2 rounded font-medium text-sm transition-colors",children:f?"Purging...":"Purge Account"})]})})]})]})}),(n.quota!==void 0||n.free_quota!==void 0)&&m.jsx("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4 text-neutral-100",children:"Quota Information"}),m.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.free_quota!==void 0&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-neutral-400",children:"Free Quota"}),m.jsx("div",{className:"text-neutral-100",children:yt(n.free_quota,2)})]}),n.quota!==void 0&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-neutral-400",children:"Paid Quota"}),m.jsx("div",{className:"text-neutral-100",children:yt(n.quota,2)})]}),n.total_available_quota!==void 0&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-neutral-400",children:"Total Available"}),m.jsx("div",{className:"text-neutral-100",children:yt(n.total_available_quota,2)})]}),n.paid_until!==void 0&&n.paid_until>0&&m.jsxs("div",{className:"md:col-span-3",children:[m.jsx("label",{className:"block text-sm font-medium text-neutral-400",children:"Paid Until"}),m.jsx("div",{className:"text-neutral-100",children:new Date(n.paid_until*1e3).toLocaleDateString()})]})]})]})}),n.payments&&n.payments.length>0&&m.jsx("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4 text-neutral-100",children:"Payment History"}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full bg-neutral-800 border border-neutral-600 rounded-lg",children:[m.jsx("thead",{className:"bg-neutral-700/50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-400 uppercase tracking-wider border-b border-neutral-600",children:"Date"}),m.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-400 uppercase tracking-wider border-b border-neutral-600",children:"Amount"}),m.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-400 uppercase tracking-wider border-b border-neutral-600",children:"Status"})]})}),m.jsx("tbody",{className:"divide-y divide-neutral-600",children:n.payments.map((p,g)=>m.jsxs("tr",{className:"hover:bg-neutral-700/30",children:[m.jsx("td",{className:"px-4 py-3 text-sm text-neutral-100",children:new Date(p.created).toLocaleDateString()}),m.jsx("td",{className:"px-4 py-3 text-sm text-neutral-100",children:p.amount}),m.jsx("td",{className:"px-4 py-3 text-sm",children:m.jsx("span",{className:`px-2 py-1 rounded text-xs ${p.is_paid?"bg-green-700 text-green-200":"bg-yellow-700 text-yellow-200"}`,children:p.is_paid?"Paid":"Pending"})})]},g))})]})})]})}),m.jsx("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"p-6",children:[m.jsxs("h3",{className:"text-lg font-semibold mb-4 text-neutral-100",children:["User Files (",n.files.total," total)"]}),n.files.files.length>0?m.jsx(r0,{files:n.files.files,pages:Math.ceil(n.files.total/n.files.count),page:n.files.page,onPage:p=>d(p)}):m.jsx("div",{className:"text-neutral-400 text-center py-8",children:"No files found for this user."})]})})]}):m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"text-lg text-neutral-400",children:"User not found"})}):m.jsx(qh,{to:"/admin",replace:!0}):m.jsx(qh,{to:"/",replace:!0}):m.jsx("div",{className:"max-w-md mx-auto bg-neutral-800 border border-neutral-700 rounded-lg shadow-sm",children:m.jsxs("div",{className:"text-center p-6",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4 text-neutral-100",children:"Authentication Required"}),m.jsx("p",{className:"text-neutral-300",children:"Please log in to access the admin panel."})]})})}const gE=new EN({});["wss://nos.lol/","wss://relay.damus.io/","wss://relay.nostr.band/","wss://relay.snort.social/"].map(e=>gE.ConnectToRelay(e,{read:!0,write:!0}));const Q4=Xk([{path:"",element:m.jsx(P4,{}),children:[{path:"/",element:m.jsx(V4,{})},{path:"/admin",element:m.jsx(K4,{})},{path:"/admin/user/:pubkey",element:m.jsx(G4,{})}]}]);ex(document.getElementById("root")).render(m.jsx(P.StrictMode,{children:m.jsx(t0.Provider,{value:gE,children:m.jsx(cC,{router:Q4})})}));</script>
    <style rel="stylesheet" crossorigin>*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}body{--tw-bg-opacity: 1;background-color:rgb(23 23 23 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(245 245 245 / var(--tw-text-opacity, 1))}.visible{visibility:visible}.absolute{position:absolute}.relative{position:relative}.inset-0{top:0;right:0;bottom:0;left:0}.mx-auto{margin-left:auto;margin-right:auto}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.ml-2{margin-left:.5rem}.mr-2{margin-right:.5rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.block{display:block}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.contents{display:contents}.aspect-square{aspect-ratio:1 / 1}.h-10{height:2.5rem}.h-12{height:3rem}.h-2{height:.5rem}.h-64{height:16rem}.h-8{height:2rem}.h-9{height:2.25rem}.h-full{height:100%}.max-h-32{max-height:8rem}.min-h-screen{min-height:100vh}.w-12{width:3rem}.w-16{width:4rem}.w-full{width:100%}.min-w-8{min-width:2rem}.min-w-80{min-width:20rem}.min-w-full{min-width:100%}.max-w-2xl{max-width:42rem}.max-w-md{max-width:28rem}.max-w-xs{max-width:20rem}.flex-1{flex:1 1 0%}.border-collapse{border-collapse:collapse}.cursor-pointer{cursor:pointer}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.gap-8{gap:2rem}.space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.75rem * var(--tw-space-x-reverse));margin-left:calc(.75rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-6>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1.5rem * var(--tw-space-x-reverse));margin-left:calc(1.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-8>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(2rem * var(--tw-space-x-reverse));margin-left:calc(2rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse: 0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse))}.divide-neutral-600>:not([hidden])~:not([hidden]){--tw-divide-opacity: 1;border-color:rgb(82 82 82 / var(--tw-divide-opacity, 1))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.break-all{word-break:break-all}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-l-md{border-top-left-radius:.375rem;border-bottom-left-radius:.375rem}.rounded-r-md{border-top-right-radius:.375rem;border-bottom-right-radius:.375rem}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-l{border-left-width:1px}.border-t{border-top-width:1px}.border-neutral-300{--tw-border-opacity: 1;border-color:rgb(212 212 212 / var(--tw-border-opacity, 1))}.border-neutral-500{--tw-border-opacity: 1;border-color:rgb(115 115 115 / var(--tw-border-opacity, 1))}.border-neutral-600{--tw-border-opacity: 1;border-color:rgb(82 82 82 / var(--tw-border-opacity, 1))}.border-neutral-700{--tw-border-opacity: 1;border-color:rgb(64 64 64 / var(--tw-border-opacity, 1))}.border-red-700{--tw-border-opacity: 1;border-color:rgb(185 28 28 / var(--tw-border-opacity, 1))}.border-red-700\/50{border-color:#b91c1c80}.bg-black\/75{background-color:#000000bf}.bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-green-700{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.bg-green-900{--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity, 1))}.bg-neutral-100{--tw-bg-opacity: 1;background-color:rgb(245 245 245 / var(--tw-bg-opacity, 1))}.bg-neutral-300{--tw-bg-opacity: 1;background-color:rgb(212 212 212 / var(--tw-bg-opacity, 1))}.bg-neutral-400{--tw-bg-opacity: 1;background-color:rgb(163 163 163 / var(--tw-bg-opacity, 1))}.bg-neutral-600{--tw-bg-opacity: 1;background-color:rgb(82 82 82 / var(--tw-bg-opacity, 1))}.bg-neutral-700{--tw-bg-opacity: 1;background-color:rgb(64 64 64 / var(--tw-bg-opacity, 1))}.bg-neutral-700\/50{background-color:#40404080}.bg-neutral-800{--tw-bg-opacity: 1;background-color:rgb(38 38 38 / var(--tw-bg-opacity, 1))}.bg-neutral-900{--tw-bg-opacity: 1;background-color:rgb(23 23 23 / var(--tw-bg-opacity, 1))}.bg-red-600{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.bg-red-900{--tw-bg-opacity: 1;background-color:rgb(127 29 29 / var(--tw-bg-opacity, 1))}.bg-red-900\/20{background-color:#7f1d1d33}.bg-yellow-700{--tw-bg-opacity: 1;background-color:rgb(161 98 7 / var(--tw-bg-opacity, 1))}.bg-yellow-900{--tw-bg-opacity: 1;background-color:rgb(113 63 18 / var(--tw-bg-opacity, 1))}.object-contain{-o-object-fit:contain;object-fit:contain}.object-center{-o-object-position:center;object-position:center}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-1{padding-bottom:.25rem}.pb-2{padding-bottom:.5rem}.pb-3{padding-bottom:.75rem}.pt-2{padding-top:.5rem}.pt-6{padding-top:1.5rem}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.tracking-wider{letter-spacing:.05em}.text-blue-400{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.text-green-200{--tw-text-opacity: 1;color:rgb(187 247 208 / var(--tw-text-opacity, 1))}.text-green-400{--tw-text-opacity: 1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.text-neutral-100{--tw-text-opacity: 1;color:rgb(245 245 245 / var(--tw-text-opacity, 1))}.text-neutral-200{--tw-text-opacity: 1;color:rgb(229 229 229 / var(--tw-text-opacity, 1))}.text-neutral-300{--tw-text-opacity: 1;color:rgb(212 212 212 / var(--tw-text-opacity, 1))}.text-neutral-400{--tw-text-opacity: 1;color:rgb(163 163 163 / var(--tw-text-opacity, 1))}.text-neutral-500{--tw-text-opacity: 1;color:rgb(115 115 115 / var(--tw-text-opacity, 1))}.text-neutral-800{--tw-text-opacity: 1;color:rgb(38 38 38 / var(--tw-text-opacity, 1))}.text-neutral-900{--tw-text-opacity: 1;color:rgb(23 23 23 / var(--tw-text-opacity, 1))}.text-orange-400{--tw-text-opacity: 1;color:rgb(251 146 60 / var(--tw-text-opacity, 1))}.text-red-200{--tw-text-opacity: 1;color:rgb(254 202 202 / var(--tw-text-opacity, 1))}.text-red-300{--tw-text-opacity: 1;color:rgb(252 165 165 / var(--tw-text-opacity, 1))}.text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.text-red-400\/80{color:#f87171cc}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-200{--tw-text-opacity: 1;color:rgb(254 240 138 / var(--tw-text-opacity, 1))}.text-yellow-400{--tw-text-opacity: 1;color:rgb(250 204 21 / var(--tw-text-opacity, 1))}.underline{text-decoration-line:underline}.opacity-0{opacity:0}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.ring-offset-neutral-800{--tw-ring-offset-color: #262626}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-shadow{transition-property:box-shadow;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-300{transition-duration:.3s}.placeholder\:text-neutral-400::-moz-placeholder{--tw-text-opacity: 1;color:rgb(163 163 163 / var(--tw-text-opacity, 1))}.placeholder\:text-neutral-400::placeholder{--tw-text-opacity: 1;color:rgb(163 163 163 / var(--tw-text-opacity, 1))}.hover\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-neutral-600:hover{--tw-bg-opacity: 1;background-color:rgb(82 82 82 / var(--tw-bg-opacity, 1))}.hover\:bg-neutral-700:hover{--tw-bg-opacity: 1;background-color:rgb(64 64 64 / var(--tw-bg-opacity, 1))}.hover\:bg-neutral-700\/30:hover{background-color:#4040404d}.hover\:bg-red-500:hover{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.hover\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.hover\:text-blue-300:hover{--tw-text-opacity: 1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}.hover\:text-neutral-100:hover{--tw-text-opacity: 1;color:rgb(245 245 245 / var(--tw-text-opacity, 1))}.hover\:text-neutral-300:hover{--tw-text-opacity: 1;color:rgb(212 212 212 / var(--tw-text-opacity, 1))}.hover\:text-neutral-900:hover{--tw-text-opacity: 1;color:rgb(23 23 23 / var(--tw-text-opacity, 1))}.hover\:shadow-md:hover{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-1:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-neutral-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(115 115 115 / var(--tw-ring-opacity, 1))}.focus\:ring-red-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(239 68 68 / var(--tw-ring-opacity, 1))}.focus\:ring-offset-2:focus{--tw-ring-offset-width: 2px}.focus-visible\:outline-none:focus-visible{outline:2px solid transparent;outline-offset:2px}.focus-visible\:ring-1:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\:ring-neutral-500:focus-visible{--tw-ring-opacity: 1;--tw-ring-color: rgb(115 115 115 / var(--tw-ring-opacity, 1))}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:bg-red-800:disabled{--tw-bg-opacity: 1;background-color:rgb(153 27 27 / var(--tw-bg-opacity, 1))}.disabled\:text-red-400:disabled{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.disabled\:opacity-50:disabled{opacity:.5}.group:hover .group-hover\:opacity-100{opacity:1}@media not all and (min-width: 1024px){.max-lg\:px-6{padding-left:1.5rem;padding-right:1.5rem}}@media (min-width: 640px){.sm\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.sm\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.sm\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}}@media (min-width: 768px){.md\:col-span-3{grid-column:span 3 / span 3}.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.md\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.md\:grid-cols-6{grid-template-columns:repeat(6,minmax(0,1fr))}}@media (min-width: 1024px){.lg\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.lg\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\:grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.lg\:grid-cols-6{grid-template-columns:repeat(6,minmax(0,1fr))}.lg\:grid-cols-8{grid-template-columns:repeat(8,minmax(0,1fr))}.lg\:grid-cols-9{grid-template-columns:repeat(9,minmax(0,1fr))}}@media (min-width: 1280px){.xl\:grid-cols-10{grid-template-columns:repeat(10,minmax(0,1fr))}.xl\:grid-cols-12{grid-template-columns:repeat(12,minmax(0,1fr))}.xl\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.xl\:grid-cols-6{grid-template-columns:repeat(6,minmax(0,1fr))}.xl\:grid-cols-8{grid-template-columns:repeat(8,minmax(0,1fr))}}</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
